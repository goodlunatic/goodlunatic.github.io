<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Python Basic Knowledge - ⚡Lunatic BLOG⚡</title><meta name=author content="Lunatic"><meta name=description content="Basic knowledge of Python Language.
"><meta name=keywords content='Language'><meta itemprop=name content="Python Basic Knowledge"><meta itemprop=description content="Basic knowledge of Python Language."><meta itemprop=datePublished content="2024-11-05T16:51:48+08:00"><meta itemprop=dateModified content="2025-10-23T17:18:16+08:00"><meta itemprop=wordCount content="10772"><meta itemprop=keywords content="Language"><meta property="og:url" content="https://goodlunatic.github.io/posts/e19da63/"><meta property="og:site_name" content="⚡Lunatic BLOG⚡"><meta property="og:title" content="Python Basic Knowledge"><meta property="og:description" content="Basic knowledge of Python Language."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-05T16:51:48+08:00"><meta property="article:modified_time" content="2025-10-23T17:18:16+08:00"><meta property="article:tag" content="Language"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python Basic Knowledge"><meta name=twitter:description content="Basic knowledge of Python Language."><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=https://www.nssctf.cn/files/2024/4/28/7f130a1387.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical type=text/html href=https://goodlunatic.github.io/posts/e19da63/ title="Python Basic Knowledge - ⚡Lunatic BLOG⚡"><link rel=prev type=text/html href=https://goodlunatic.github.io/posts/69280be/ title="2024 某金融系统内部赛 Misc Writeup"><link rel=next type=text/html href=https://goodlunatic.github.io/posts/1618f6c/ title="2024 古剑山全国大学生网络攻防大赛 Misc Writeup"><link rel=alternate type=text/markdown href=https://goodlunatic.github.io/posts/e19da63/index.md title="Python Basic Knowledge - ⚡Lunatic BLOG⚡"><link rel=stylesheet href=/css/config.min.css><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Python Basic Knowledge","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/goodlunatic.github.io\/posts\/e19da63\/"},"genre":"posts","keywords":"Language","wordcount":10772,"url":"https:\/\/goodlunatic.github.io\/posts\/e19da63\/","datePublished":"2024-11-05T16:51:48+08:00","dateModified":"2025-10-23T17:18:16+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Lunatic"},"description":""}</script><script src=/js/head/color-scheme.min.js></script></head><body data-header-desktop=sticky data-header-mobile=auto><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=left><div class=header-title><a href=/ title="⚡Lunatic BLOG⚡"><span class=header-title-text>⚡Lunatic BLOG⚡</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/archives/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> Archives</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden=true></i> Categories</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class=menu-item><a class=menu-link href=/friends/><i class="fa-solid fa-chain fa-fw fa-sm" aria-hidden=true></i> Friends</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-graduation-cap fa-fw fa-sm" aria-hidden=true></i> About</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="Search titles or contents ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="⚡Lunatic BLOG⚡"><span class=header-title-text>⚡Lunatic BLOG⚡</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></li><li class=menu-item><a class=menu-link href=/archives/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> Archives</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden=true></i> Categories</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class=menu-item><a class=menu-link href=/friends/><i class="fa-solid fa-chain fa-fw fa-sm" aria-hidden=true></i> Friends</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-graduation-cap fa-fw fa-sm" aria-hidden=true></i> About</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=fi-container><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label=Collections></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Python Basic Knowledge</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://goodlunatic.github.io title=Author target=_blank rel="external nofollow noopener noreferrer author" class=author><img class=avatar src=https://www.nssctf.cn/files/2024/4/28/7f130a1387.png alt=Lunatic height=16 width=16>&nbsp;Lunatic</a></span><span class=post-included-in>&nbsp;included in <a href=/categories/language/ class=post-category title="Category - Language"><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> Language</a></span></div><div class=post-meta-line><span title="published on 2024-11-05 16:51:48"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden=true></i><time datetime=2024-11-05>2024-11-05</time></span>&nbsp;<span title="Updated on 2025-10-23 17:18:16"><i class="fa-regular fa-calendar-check fa-fw me-1" aria-hidden=true></i><time datetime=2025-10-23>2025-10-23</time></span>&nbsp;<span title="10772 words"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>About 10800 words</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>51 minutes</span>&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title="Python Basic Knowledge"><i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_page_pv>-</span>&nbsp;views
</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#字符串处理>字符串处理</a><ul><li><ul><li><a href=#ljust和rjust>ljust和rjust</a></li></ul></li></ul></li><li><a href=#format_string>format_string</a><ul><li><ul><li><a href=#python字符串前urbf的含义>Python字符串前u、r、b、f的含义</a></li></ul></li></ul></li><li><a href=#匿名函数lambda>匿名函数Lambda</a></li><li><a href=#enumerate关键字的使用>enumerate关键字的使用</a></li><li><a href=#open函数打开文件的模式>open函数打开文件的模式</a><ul><li><ul><li><a href=#文件格式相关参数>文件格式相关参数</a></li><li><a href=#读写模式相关参数>读写模式相关参数</a></li><li><a href=#组合模式>组合模式</a></li></ul></li></ul></li><li><a href=#try语句的使用>try语句的使用</a></li><li><a href=#第三方模块库的使用>第三方模块(库)的使用</a><ul><li><ul><li><a href=#libnum模块的使用>libnum模块的使用</a></li><li><a href=#itertools模块的使用>itertools模块的使用</a><ul><li><a href=#1-product生成笛卡尔积嵌套循环>1. product生成笛卡尔积（嵌套循环）</a></li><li><a href=#2-permutations生成排列组合>2. permutations生成排列组合</a></li><li><a href=#3-combinations生成组合>3. combinations生成组合</a></li></ul></li><li><a href=#hashlib模块的使用>hashlib模块的使用</a></li><li><a href=#re模块的使用>re模块的使用</a></li><li><a href=#pilpillow模块的使用>PIL(Pillow)模块的使用</a><ul><li><a href=#1打开--显示--保存图片>1.打开 显示 保存图片</a></li><li><a href=#2转换图片模式>2.转换图片模式</a></li><li><a href=#3通道的分离合并>3.通道的分离合并</a></li><li><a href=#4图片的裁剪缩放旋转和镜像>4.图片的裁剪、缩放、旋转和镜像</a></li><li><a href=#5给图片添加文字>5.给图片添加文字</a></li><li><a href=#6pil滤镜功能>6.PIL滤镜功能</a></li><li><a href=#7图片的拼接>7.图片的拼接</a></li><li><a href=#8二进制数据转图片>8.二进制数据转图片</a></li><li><a href=#比赛中使用的例子>比赛中使用的例子</a></li></ul></li><li><a href=#pyzipper模块的使用>pyzipper模块的使用</a><ul><li><a href=#比赛中的使用记录>比赛中的使用记录</a></li></ul></li><li><a href=#pyzbar模块的使用>pyzbar模块的使用</a><ul><li><a href=#识别二维码>识别二维码</a></li></ul></li><li><a href=#subprocess模块的使用>subprocess模块的使用</a><ul><li><a href=#subprocessrun-函数的基本用法>subprocess.run() 函数的基本用法：</a></li><li><a href=#使用subprocess运行tshark处理流量包>使用subprocess运行tshark处理流量包</a></li></ul></li><li><a href=#csv模块的使用>CSV模块的使用</a><ul><li><a href=#比赛中使用的例子-1>比赛中使用的例子</a></li></ul></li><li><a href=#pandas模块的使用>pandas模块的使用</a></li><li><a href=#numpy库模块的使用>numpy库模块的使用</a><ul><li><a href=#使用numpy处理图像>使用numpy处理图像</a></li></ul></li><li><a href=#cv2模块的使用>cv2模块的使用</a><ul><li><a href=#比赛中的使用记录-1>比赛中的使用记录</a></li></ul></li><li><a href=#urllib模块>urllib模块</a></li><li><a href=#urllib3模块>urllib3模块</a></li><li><a href=#wave模块>wave模块</a></li><li><a href=#librosa模块>librosa模块</a><ul><li><a href=#比赛中的使用记录-2>比赛中的使用记录</a></li></ul></li><li><a href=#scipy模块的使用>scipy模块的使用</a></li><li><a href=#turtle模块的使用>turtle模块的使用</a></li><li><a href=#struct模块的使用>struct模块的使用</a></li><li><a href=#time模块的使用>time模块的使用</a></li><li><a href=#datetime模块的使用>datetime模块的使用</a></li><li><a href=#urllib模块使用>Urllib模块使用</a></li><li><a href=#requests模块的使用>requests模块的使用</a><ul><li><a href=#使用python脚本发送http请求>使用python脚本发送HTTP请求</a></li><li><a href=#使用session发送请求>使用session发送请求</a></li><li><a href=#关闭ssl警告>关闭SSL警告</a></li></ul></li><li><a href=#requests-html模块的使用>requests-html模块的使用</a><ul><li><a href=#例子>例子</a></li></ul></li><li><a href=#optparse模块的使用>optparse模块的使用</a></li><li><a href=#xlwt模块的简单使用>xlwt模块的简单使用</a></li><li><a href=#xlsxwriter模块的使用>xlsxwriter模块的使用</a></li><li><a href=#json模块的简单使用>json模块的简单使用</a></li><li><a href=#scipy模块的使用-1>scipy模块的使用</a></li><li><a href=#seaborn模块的使用>seaborn模块的使用</a></li><li><a href=#asyncio模块的学习与使用>asyncio模块的学习与使用</a><ul><li><a href=#协程的概念>协程的概念</a></li><li><a href=#协程的优点>协程的优点</a></li><li><a href=#协程缺点>协程缺点：</a></li><li><a href=#生成器的学习>生成器的学习</a></li><li><a href=#同步程序与异步程序的区别>同步程序与异步程序的区别</a></li><li><a href=#asyncio中的概念>asyncio中的概念</a></li><li><a href=#协程嵌套>协程嵌套</a></li><li><a href=#协程并发>协程并发</a></li></ul></li><li><a href=#aiohttp模块的使用>aiohttp模块的使用</a></li><li><a href=#pydocx库的使用>pydocx库的使用</a></li><li><a href=#colorama模块的使用>colorama模块的使用</a></li><li><a href=#prettytable模块的使用>prettytable模块的使用</a></li><li><a href=#paramiko模块的使用>paramiko模块的使用</a></li></ul></li></ul></li><li><a href=#利用python脚本对数据库进行操作>利用Python脚本对数据库进行操作</a><ul><li><ul><li><a href=#pymysql模块的简单使用>pymysql模块的简单使用</a></li><li><a href=#pymongo模块的简单使用>pymongo模块的简单使用</a></li></ul></li></ul></li><li><a href=#多线程多进程协程微线程>多线程、多进程、协程(微线程)</a></li><li><a href=#python启动一个本地服务>Python启动一个本地服务</a></li><li><a href=#python数据可视化>Python数据可视化</a><ul><li><ul><li><a href=#画sin和cos线>画sin和cos线</a></li><li><a href=#画个饼图>画个饼图</a></li><li><a href=#画直方图>画直方图</a></li><li><a href=#画散点图>画散点图</a></li><li><a href=#画折线图>画折线图</a></li><li><a href=#画直方图-1>画直方图</a></li><li><a href=#pyecharts>pyecharts</a></li></ul></li></ul></li><li><a href=#object-oriented-programe>Object-Oriented-Programe</a></li><li><a href=#人工智能>人工智能</a></li><li><a href=#数字图像处理>数字图像处理</a><ul><li><ul><li><a href=#基于opencv的svm算法识别手写数字>基于opencv的svm算法识别手写数字</a></li></ul></li></ul></li><li><a href=#利用python进行自动化处理>利用Python进行自动化处理</a><ul><li><ul><li><a href=#1读取指定目录下的文件列表并按照数字顺序排列>1.读取指定目录下的文件列表，并按照数字顺序排列</a></li><li><a href=#2读取目录中的文件并合并到一个文件中>2.读取目录中的文件并合并到一个文件中</a></li><li><a href=#2压缩包相关zipfile模块>2.压缩包相关（zipfile模块）</a></li></ul></li></ul></li><li><a href=#python中各种框架的使用>Python中各种框架的使用</a><ul><li><ul><li><a href=#scrapy框架的使用>Scrapy框架的使用</a></li><li><a href=#flask后端框架的使用>Flask后端框架的使用</a></li><li><a href=#helloworld>Helloworld</a></li><li><a href=#路由的使用>路由的使用</a></li><li><a href=#变量规则>变量规则</a></li><li><a href=#自定义转换器>自定义转换器</a></li><li><a href=#渲染form表单>渲染form表单</a></li><li><a href=#request对象>request对象</a></li></ul></li></ul></li><li><a href=#python中的进程与线程>Python中的进程与线程</a><ul><li><ul><li><a href=#进程与线程的关系>进程与线程的关系</a></li><li><a href=#python中的gil锁全局解释器锁>Python中的GIL锁(全局解释器锁)</a></li><li><a href=#解决gil限制python并行计算问题的方法>解决GIL限制Python并行计算问题的方法</a></li></ul></li></ul></li><li><a href=#python中的算法>Python中的算法</a><ul><li><ul><li><a href=#二分查找>二分查找</a></li><li><a href=#python运行时--u-参数的作用>Python运行时 -u 参数的作用</a></li><li><a href=#踩过的坑>踩过的坑</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><p>Basic knowledge of Python Language.</p><h2 class=heading-element id=字符串处理><span>字符串处理</span>
<a href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%a4%84%e7%90%86 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h4 class=heading-element id=ljust和rjust><span>ljust和rjust</span>
<a href=#ljust%e5%92%8crjust class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><ul><li><code>str.ljust(width, fillchar)</code>: 这个方法返回一个左对齐的版本的原字符串，并使用 <code>fillchar</code> 填充至少 <code>width</code> 长度的字符。</li><li>如果原字符串的长度超过了 <code>width</code>，则返回原字符串。</li><li><code>str.rjust(width, fillchar)</code>: 与 <code>ljust</code> 相似，但是它返回一个右对齐的版本</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=s2>&#34;1101&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>## 使用 rjust 在 res 的前面补零直到其长度是 8 的倍数</span>
</span></span><span class=line><span class=cl><span class=c1>## ((len(res) + 7) // 8) * 8: 得到下一个8的倍数</span>
</span></span><span class=line><span class=cl><span class=n>required_length</span> <span class=o>=</span> <span class=p>((</span><span class=nb>len</span><span class=p>(</span><span class=n>res</span><span class=p>)</span> <span class=o>+</span> <span class=mi>7</span><span class=p>)</span> <span class=o>//</span> <span class=mi>8</span><span class=p>)</span> <span class=o>*</span> <span class=mi>8</span>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=n>res</span><span class=o>.</span><span class=n>rjust</span><span class=p>(</span><span class=n>required_length</span><span class=p>,</span> <span class=s1>&#39;0&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>  <span class=c1>## 输出: 00001101</span></span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=format_string><span>format_string</span>
<a href=#format_string class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h4 class=heading-element id=python字符串前urbf的含义><span>Python字符串前u、r、b、f的含义</span>
<a href=#python%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%89%8durbf%e7%9a%84%e5%90%ab%e4%b9%89 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>字符串前加u——表示unicode字符串
</span></span><span class=line><span class=cl>	可能是因为这段字符串中含有中文
</span></span><span class=line><span class=cl>字符串前加r——表示非转义的原始字符串
</span></span><span class=line><span class=cl>	去掉反斜杠的转义机制
</span></span><span class=line><span class=cl>字符串前加b——表示这是一个bytes类型的对象
</span></span><span class=line><span class=cl>	python2默认字符编码是ASCII
</span></span><span class=line><span class=cl>	python3默认的字符编码是Unicode
</span></span><span class=line><span class=cl>	在python3中bytes和str的互相转换方式是：
</span></span><span class=line><span class=cl>		str.encode(&#39;utf-8&#39;)
</span></span><span class=line><span class=cl>		bytes.decode(&#39;utf-8&#39;)
</span></span><span class=line><span class=cl>字符串前加f——表示在字符串内支持大括号包裹的Python表达式</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>name</span> <span class=o>=</span> <span class=s2>&#34;Li&#34;</span>
</span></span><span class=line><span class=cl><span class=n>age</span> <span class=o>=</span> <span class=mi>16</span>
</span></span><span class=line><span class=cl><span class=c1>## print(&#34;Hello &#34; + name + &#34; you are &#34; + str(age) + &#34; years old&#34;)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Hello </span><span class=si>%s</span><span class=s2> ,you are </span><span class=si>%d</span><span class=s2> years old&#34;</span> <span class=o>%</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;</span><span class=si>%.3f</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=mf>3.14159</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>your_name</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s2>&#34;please input your name:</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Hello,</span><span class=si>{</span><span class=n>your_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Hello,</span><span class=si>{</span><span class=n>your_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Hello&#34;</span><span class=p>,</span> <span class=n>your_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Hello&#34;</span> <span class=o>+</span> <span class=n>your_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>Hello,Tom
</span></span></span><span class=line><span class=cl><span class=s1>Hello,Tom
</span></span></span><span class=line><span class=cl><span class=s1>Hello Tom
</span></span></span><span class=line><span class=cl><span class=s1>HelloTom
</span></span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=mf>1.05555</span>
</span></span><span class=line><span class=cl><span class=c1>## 第一种方式</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;b 的值为:</span><span class=si>{</span><span class=n>b</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## float 类型输出</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;a 的值为:</span><span class=si>{</span><span class=n>a</span><span class=si>:</span><span class=s1>f</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## float 保留两位小数 五舍六入</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;a 的值为:</span><span class=si>{</span><span class=n>a</span><span class=si>:</span><span class=s1>.4f</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 第二种方式</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;a 的值为:&#39;</span><span class=o>+</span><span class=nb>str</span><span class=p>(</span><span class=n>a</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>## 第三种方式</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;a 的值为:</span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>a</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=匿名函数lambda><span>匿名函数Lambda</span>
<a href=#%e5%8c%bf%e5%90%8d%e5%87%bd%e6%95%b0lambda class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>add_lambda</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=o>=</span><span class=mi>1</span><span class=p>):</span> <span class=k>return</span> <span class=n>a</span><span class=o>+</span><span class=n>b</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>add_lambda</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>add_lambda</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#三项表达式</span>
</span></span><span class=line><span class=cl><span class=n>get_odd_even</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span><span class=s1>&#39;even&#39;</span> <span class=k>if</span> <span class=n>x</span><span class=o>%</span><span class=mi>2</span><span class=o>==</span><span class=mi>0</span> <span class=k>else</span> <span class=s1>&#39;odd&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>get_odd_even</span><span class=p>(</span><span class=mi>8</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>get_odd_even</span><span class=p>(</span><span class=mi>9</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#无参数表达式</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl><span class=n>ran_lambda</span> <span class=o>=</span> <span class=k>lambda</span><span class=p>:</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>ran_lambda</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#map函数，将列表中的元素作为参数传入指定函数</span>
</span></span><span class=line><span class=cl><span class=n>mobj</span> <span class=o>=</span> <span class=nb>map</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span><span class=n>x</span><span class=o>**</span><span class=mi>2</span><span class=p>,[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>mobj</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=enumerate关键字的使用><span>enumerate关键字的使用</span>
<a href=#enumerate%e5%85%b3%e9%94%ae%e5%ad%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>在Python中，enumerate()是一个内建函数，它允许你在遍历一个序列（例如列表、字符串或元组）的同时，追踪当前元素的索引</p><p>基本用法如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>some_list</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;At index </span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>, the value is </span><span class=si>{</span><span class=n>value</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=open函数打开文件的模式><span>open函数打开文件的模式</span>
<a href=#open%e5%87%bd%e6%95%b0%e6%89%93%e5%bc%80%e6%96%87%e4%bb%b6%e7%9a%84%e6%a8%a1%e5%bc%8f class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>open()函数完整的语法格式为：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>open</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=err>‘</span><span class=n>r</span><span class=err>’</span><span class=p>,</span> <span class=n>buffering</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>errors</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>newline</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>closefd</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=文件格式相关参数><span>文件格式相关参数</span>
<a href=#%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f%e7%9b%b8%e5%85%b3%e5%8f%82%e6%95%b0 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>t：以文本格式打开文件（默认）。一般用于文本文件，如：txt。
</span></span><span class=line><span class=cl>b：以二进制格式打开文件。一般用于非文本文件，如：图片。</span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=读写模式相关参数><span>读写模式相关参数</span>
<a href=#%e8%af%bb%e5%86%99%e6%a8%a1%e5%bc%8f%e7%9b%b8%e5%85%b3%e5%8f%82%e6%95%b0 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>r：以只读方式打开文件（默认模式）。文件指针定位在文件头的位置。如果文件不存在会报错。
</span></span><span class=line><span class=cl>w：以只写方式打开文件。如果文件存在，则打开文件，清空文件内容，从文件头开始编辑；如果文件不存在，则创建新文件，打开编辑。
</span></span><span class=line><span class=cl>a：以追加方式打开文件，同样是只写，不允许进行读操作。如果文件存在，则打开文件，将文件指针定位到文件尾。因此，新的内容是追加在已有内容之后。如果文件不存在，则创建新文件进行写入。
</span></span><span class=line><span class=cl>+：打开一个文件进行更新（可读写）。注意：该模式不能单独使用，需要与r/w/a组合使用。打开文件后文件指针的位置取决于另一个组合参数。</span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=组合模式><span>组合模式</span>
<a href=#%e7%bb%84%e5%90%88%e6%a8%a1%e5%bc%8f class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>r+：打开一个文件用于读写。如果文件存在，则打开文件，将文件指针定位在文件头，新写入的内容在原有内容的前面；如果文件不存在会报错。
</span></span><span class=line><span class=cl>w+：打开一个文件用于读写。如果文件存在，则打开文件，清空原有内容，进入编辑模式；如果文件不存在，则创建一个新文件进行读写操作。
</span></span><span class=line><span class=cl>a+：以追加模式打开一个文件用于读写。如果文件存在，则打开文件，将文件指针定位在文件尾，新写入的内容在原有内容的后面；如果文件不存在，则创建一个新文件用于读写。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>所有上面这些模式默认都是t——文本模式，如果要以二进制模式打开，需要加上参数b，如：rb、rb+、wb、wb+、ab、ab+。</span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=try语句的使用><span>try语句的使用</span>
<a href=#try%e8%af%ad%e5%8f%a5%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## -*- encoding: utf-8 -*-</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>@File    :   try.py
</span></span></span><span class=line><span class=cl><span class=s1>@Time    :   2022/11/14 15:27:12
</span></span></span><span class=line><span class=cl><span class=s1>@Author  :   Lunatic 
</span></span></span><span class=line><span class=cl><span class=s1>@Version :   1.0
</span></span></span><span class=line><span class=cl><span class=s1>@Contact :   goodlunatic0@gmail.com
</span></span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>traceback</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## try:</span>
</span></span><span class=line><span class=cl><span class=c1>##     &lt;statements&gt;        #运行try语句块，并试图捕获异常</span>
</span></span><span class=line><span class=cl><span class=c1>## except &lt;name1&gt;:</span>
</span></span><span class=line><span class=cl><span class=c1>##     &lt;statements&gt;        #如果name1异常发现，那么执行该语句块。</span>
</span></span><span class=line><span class=cl><span class=c1>## except (name2, name3):</span>
</span></span><span class=line><span class=cl><span class=c1>##     &lt;statements&gt;        #如果元组内的任意异常发生，那么捕获它</span>
</span></span><span class=line><span class=cl><span class=c1>## except &lt;name4&gt; as &lt;variable&gt;:</span>
</span></span><span class=line><span class=cl><span class=c1>##     &lt;statements&gt;        #如果name4异常发生，那么进入该语句块，并把异常实例命名为variable</span>
</span></span><span class=line><span class=cl><span class=c1>## except:</span>
</span></span><span class=line><span class=cl><span class=c1>##     &lt;statements&gt;        #发生了以上所有列出的异常之外的异常</span>
</span></span><span class=line><span class=cl><span class=c1>## else:</span>
</span></span><span class=line><span class=cl><span class=c1>## &lt;statements&gt;            #如果没有异常发生，那么执行该语句块</span>
</span></span><span class=line><span class=cl><span class=c1>## finally:</span>
</span></span><span class=line><span class=cl><span class=c1>##     &lt;statement&gt;         #无论是否有异常发生，均会执行该语句块。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## try:</span>
</span></span><span class=line><span class=cl><span class=c1>##     num = int(input(&#39;请输入一个整数:&#39;))</span>
</span></span><span class=line><span class=cl><span class=c1>##     result = 8 / num</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(result)</span>
</span></span><span class=line><span class=cl><span class=c1>## ## except ZeroDivisionError:</span>
</span></span><span class=line><span class=cl><span class=c1>## ##     print(&#39;0不能做除数&#39;)</span>
</span></span><span class=line><span class=cl><span class=c1>## except ValueError as r:</span>
</span></span><span class=line><span class=cl><span class=c1>##     ## r 是前面 ValueError 类的一个实例,下面是打印报错的明细</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(&#39;输入的值不是合法的整数 %s&#39; % (r))</span>
</span></span><span class=line><span class=cl><span class=c1>## except Exception as r:</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(&#39;未知错误 %s&#39; % (r))</span>
</span></span><span class=line><span class=cl><span class=c1>## ## 没有预先判断到的错误怎么办?</span>
</span></span><span class=line><span class=cl><span class=c1>## finally:</span>
</span></span><span class=line><span class=cl><span class=c1>##     ## 无论是否有异常，都会执行的代码</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(&#39;%%%%%%%%%%%%%%%&#39;)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## def demo1():</span>
</span></span><span class=line><span class=cl><span class=c1>##     return int(input(&#39;请输入整数:&#39;))</span>
</span></span><span class=line><span class=cl><span class=c1>## def demo2():</span>
</span></span><span class=line><span class=cl><span class=c1>##     return demo1()</span>
</span></span><span class=line><span class=cl><span class=c1>## ## 函数的错误：一级一级的去找，最终会将异常传递到主函数里</span>
</span></span><span class=line><span class=cl><span class=c1>## try:</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(demo2())</span>
</span></span><span class=line><span class=cl><span class=c1>## except Exception as r:</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(&#39;未知错误 %s&#39; % r)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(demo2())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## def input_passwd():</span>
</span></span><span class=line><span class=cl><span class=c1>##     ## 1.提示用户输入密码</span>
</span></span><span class=line><span class=cl><span class=c1>##     pwd = input(&#39;请输入密码：&#39;)</span>
</span></span><span class=line><span class=cl><span class=c1>##     ## 2.判断密码的长度</span>
</span></span><span class=line><span class=cl><span class=c1>##     if len(pwd) &gt;= 8:</span>
</span></span><span class=line><span class=cl><span class=c1>##         return pwd</span>
</span></span><span class=line><span class=cl><span class=c1>##     ## 3.如果&lt;8就主动抛出异常</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(&#39;主动抛出异常&#39;)</span>
</span></span><span class=line><span class=cl><span class=c1>##     #a.创建异常对象</span>
</span></span><span class=line><span class=cl><span class=c1>##     ex = Exception(&#39;长度不够&#39;)</span>
</span></span><span class=line><span class=cl><span class=c1>##     #b.主动抛出</span>
</span></span><span class=line><span class=cl><span class=c1>##     raise ex</span>
</span></span><span class=line><span class=cl><span class=c1>## ## 注意：只抛出异常而不捕获异常 代码会出错</span>
</span></span><span class=line><span class=cl><span class=c1>## try:</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(input_passwd())</span>
</span></span><span class=line><span class=cl><span class=c1>## except Exception as re:</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(re)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#-----------以下是断言(assert())的内容</span>
</span></span><span class=line><span class=cl><span class=c1>## def func(num, div):</span>
</span></span><span class=line><span class=cl><span class=c1>##     ## 断言，可以理解为提前预言，让人更清楚报错的原因</span>
</span></span><span class=line><span class=cl><span class=c1>##     assert (div != 0), &#39;div不能为0&#39;</span>
</span></span><span class=line><span class=cl><span class=c1>##     return num / div</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## print(func(10, 0))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## a = 1</span>
</span></span><span class=line><span class=cl><span class=c1>## assert (a &lt; 0), &#39;出错了，a&gt;=0&#39;</span>
</span></span><span class=line><span class=cl><span class=c1>## print(&#34;正常运行&#34;)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## a = 1</span>
</span></span><span class=line><span class=cl><span class=c1>## try:</span>
</span></span><span class=line><span class=cl><span class=c1>##     assert a &lt; 0</span>
</span></span><span class=line><span class=cl><span class=c1>## except AssertionError as er:  #明确抛出此异常</span>
</span></span><span class=line><span class=cl><span class=c1>##     #抛出AssertionError 不含任何信息，所以无法通过er.__str__()获取异常描述</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(&#39;AssertionError&#39;, er, er.__str__())</span>
</span></span><span class=line><span class=cl><span class=c1>##     ## 通过traceback打印详细异常信息</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(&#39;traceback 打印异常&#39;)</span>
</span></span><span class=line><span class=cl><span class=c1>##     traceback.print_exc()</span>
</span></span><span class=line><span class=cl><span class=c1>## except:  #不会命中其他异常</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(&#39;assert except&#39;)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## try:</span>
</span></span><span class=line><span class=cl><span class=c1>##     raise AssertionError(&#39;测试 raise AssertionError&#39;)</span>
</span></span><span class=line><span class=cl><span class=c1>## except AssertionError as er:</span>
</span></span><span class=line><span class=cl><span class=c1>##     print(&#39;raise AssertionError 异常&#39;, er.__str__())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#函数调用异常</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>foo</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>divide</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=n>divide</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;divide 不能为0&#39;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>value</span> <span class=o>/</span> <span class=n>divide</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>foo</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>foo</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=第三方模块库的使用><span>第三方模块(库)的使用</span>
<a href=#%e7%ac%ac%e4%b8%89%e6%96%b9%e6%a8%a1%e5%9d%97%e5%ba%93%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h4 class=heading-element id=libnum模块的使用><span>libnum模块的使用</span>
<a href=#libnum%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>libnum</span>
</span></span><span class=line><span class=cl><span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;flag</span><span class=si>{114514}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>bin</span> <span class=o>=</span> <span class=s2>&#34;11001100110110001100001011001110111101100110001001100010011010000110101001100010011010001111101&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>libnum</span><span class=o>.</span><span class=n>n2s</span><span class=p>(</span><span class=mi>97</span><span class=p>))</span>  <span class=c1>## a</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>libnum</span><span class=o>.</span><span class=n>s2n</span><span class=p>(</span><span class=nb>str</span><span class=p>))</span>  <span class=c1>## 31698494968735985349289915517</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>hex</span><span class=p>(</span><span class=n>libnum</span><span class=o>.</span><span class=n>s2n</span><span class=p>(</span><span class=nb>str</span><span class=p>)))</span>  <span class=c1>## 0x666c61677b3131343531347d</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>libnum</span><span class=o>.</span><span class=n>s2b</span><span class=p>(</span><span class=nb>str</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>## 011001100110110001100001011001110111101100110001001100010011010000110101001100010011010001111101</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>libnum</span><span class=o>.</span><span class=n>b2s</span><span class=p>(</span><span class=nb>bin</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>## 会自动在前面补零对齐8位 b&#39;flag{114514}&#39;</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=itertools模块的使用><span>itertools模块的使用</span>
<a href=#itertools%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><h5 class=heading-element id=1-product生成笛卡尔积嵌套循环><span>1. product生成笛卡尔积（嵌套循环）</span>
<a href=#1-product%e7%94%9f%e6%88%90%e7%ac%9b%e5%8d%a1%e5%b0%94%e7%a7%af%e5%b5%8c%e5%a5%97%e5%be%aa%e7%8e%af class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>itertools</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>string</span> <span class=kn>import</span> <span class=n>printable</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># for i in printable:</span>
</span></span><span class=line><span class=cl><span class=c1>#     for j in printable:</span>
</span></span><span class=line><span class=cl><span class=c1>#         for k in printable:</span>
</span></span><span class=line><span class=cl><span class=c1>#             for l in printable:</span>
</span></span><span class=line><span class=cl><span class=c1>#                 print(i+j+k+l)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>strs</span> <span class=ow>in</span> <span class=n>itertools</span><span class=o>.</span><span class=n>product</span><span class=p>(</span><span class=n>printable</span><span class=p>,</span> <span class=n>repeat</span><span class=o>=</span><span class=mi>4</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>strs</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=2-permutations生成排列组合><span>2. permutations生成排列组合</span>
<a href=#2-permutations%e7%94%9f%e6%88%90%e6%8e%92%e5%88%97%e7%bb%84%e5%90%88 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>itertools</span> <span class=kn>import</span> <span class=n>permutations</span>
</span></span><span class=line><span class=cl><span class=c1># 生成长度为2的排列组合</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>permutations</span><span class=p>(</span><span class=s2>&#34;ABC&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>)))</span>  
</span></span><span class=line><span class=cl><span class=c1># [(&#39;A&#39;, &#39;B&#39;), (&#39;A&#39;, &#39;C&#39;), (&#39;B&#39;, &#39;A&#39;), (&#39;B&#39;, &#39;C&#39;), (&#39;C&#39;, &#39;A&#39;), (&#39;C&#39;, &#39;B&#39;)]</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=3-combinations生成组合><span>3. combinations生成组合</span>
<a href=#3-combinations%e7%94%9f%e6%88%90%e7%bb%84%e5%90%88 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>itertools</span> <span class=kn>import</span> <span class=n>combinations</span>
</span></span><span class=line><span class=cl><span class=c1># 生成长度为2的组合</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>combinations</span><span class=p>(</span><span class=s2>&#34;ABC&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>)))</span>  
</span></span><span class=line><span class=cl><span class=c1># [(&#39;A&#39;, &#39;B&#39;), (&#39;A&#39;, &#39;C&#39;), (&#39;B&#39;, &#39;C&#39;)]</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=hashlib模块的使用><span>hashlib模块的使用</span>
<a href=#hashlib%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>常见的加密</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>hashlib</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;Hello&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># md5加密</span>
</span></span><span class=line><span class=cl><span class=n>md5_hash</span> <span class=o>=</span> <span class=n>hashlib</span><span class=o>.</span><span class=n>md5</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>md5_hash</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>text</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=n>md5_hash</span><span class=o>.</span><span class=n>hexdigest</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># SHA1加密</span>
</span></span><span class=line><span class=cl><span class=n>sha1_hash</span> <span class=o>=</span> <span class=n>hashlib</span><span class=o>.</span><span class=n>sha1</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>sha1_hash</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>text</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=n>sha1_hash</span><span class=o>.</span><span class=n>hexdigest</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=re模块的使用><span>re模块的使用</span>
<a href=#re%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><table><thead><tr><th style=text-align:center>字符</th><th style=text-align:center>描述</th></tr></thead><tbody><tr><td style=text-align:center>\d</td><td style=text-align:center>代表任意数字，就是阿拉伯数字 0-9 这些玩意。</td></tr><tr><td style=text-align:center>\D</td><td style=text-align:center>大写的就是和小写的唱反调，d 你代表的是任意数字是吧？那么我 D 就代表不是数字的。</td></tr><tr><td style=text-align:center>\w</td><td style=text-align:center>代表字母，数字，下划线。也就是 a-z、A-Z、0-9、中文字符。</td></tr><tr><td style=text-align:center>\W</td><td style=text-align:center>跟 w 唱反调，代表不是字母，不是数字，不是下划线的。</td></tr><tr><td style=text-align:center>\n</td><td style=text-align:center>代表一个换行。</td></tr><tr><td style=text-align:center>\r</td><td style=text-align:center>代表一个回车。</td></tr><tr><td style=text-align:center>\f</td><td style=text-align:center>代表换页。</td></tr><tr><td style=text-align:center>\t</td><td style=text-align:center>代表一个 Tab 。</td></tr><tr><td style=text-align:center>\s</td><td style=text-align:center>代表所有的空白字符，也就是上面这个：\n、\r、\t、\f</td></tr><tr><td style=text-align:center>\S</td><td style=text-align:center>跟 s 唱反调，代表所有不是空白的字符。</td></tr><tr><td style=text-align:center><code>A</code></td><td style=text-align:center>代表字符串的开始。</td></tr><tr><td style=text-align:center><code>Z</code></td><td style=text-align:center>代表字符串的结束。</td></tr><tr><td style=text-align:center>^</td><td style=text-align:center>匹配字符串开始的位置。</td></tr><tr><td style=text-align:center>$</td><td style=text-align:center>匹配字符创结束的位置。</td></tr><tr><td style=text-align:center>.</td><td style=text-align:center>代表所有的单个字符，除了 \n \r</td></tr><tr><td style=text-align:center><code>[...]</code></td><td style=text-align:center>代表在 [] 范围内的字符，比如 [a-z] 就代表 a到z的字母</td></tr><tr><td style=text-align:center><code>[^...]</code></td><td style=text-align:center>跟 […] 唱反调，代表不在 [] 范围内的字符</td></tr><tr><td style=text-align:center>{n}</td><td style=text-align:center>匹配在 {n} 前面的东西，比如: o{2} 不能匹配 Bob 中的 o ，但是能匹配 food 中的两个o。</td></tr><tr><td style=text-align:center><code>{n,m}</code></td><td style=text-align:center>匹配在 {n,m} 前面的东西，比如：o{1,3} 将匹配“fooooood”中的前三个o。</td></tr><tr><td style=text-align:center><code>{n，}</code></td><td style=text-align:center>匹配在 {n,} 前面的东西，比如：o{2,} 不能匹配“Bob”中的“o”，但能匹配“foooood”中的所有o。</td></tr><tr><td style=text-align:center><code>*</code></td><td style=text-align:center>和 {0,} 一个样，匹配 * 前面的 0 次或多次。 比如 zo* 能匹配“z”、“zo”以及“zoo”。</td></tr><tr><td style=text-align:center><code>+</code></td><td style=text-align:center>和{1，} 一个样，匹配 + 前面 1 次或多次。 比如 zo+”能匹配“zo”以及“zoo”，但不能匹配“z”。</td></tr><tr><td style=text-align:center><code>？</code></td><td style=text-align:center>和{0,1} 一个样，匹配 ？前面 0 次或 1 次。</td></tr><tr><td style=text-align:center>a|b</td><td style=text-align:center>匹配 a 或者 b。</td></tr><tr><td style=text-align:center><code>（）</code></td><td style=text-align:center>匹配括号里面的内容。</td></tr></tbody></table><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## -*- encoding: utf-8 -*-</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## *代表匹配零次或多次</span>
</span></span><span class=line><span class=cl><span class=c1>## +代表匹配一次或多次</span>
</span></span><span class=line><span class=cl><span class=c1>## ?代表匹配零次或一次</span>
</span></span><span class=line><span class=cl><span class=c1>## $匹配输入字符串的结束位置</span>
</span></span><span class=line><span class=cl><span class=c1>## \\.代表小数点</span>
</span></span><span class=line><span class=cl><span class=c1>## \\s代表空格，则\\s*代表匹配多个空格</span>
</span></span><span class=line><span class=cl><span class=c1>## \\d代表匹配一个数字字符，等价于[0-9]，则\\d+\\.\\d*可匹配1.或1.0等\\d*\\.\\d+可匹配.0或1.0等</span>
</span></span><span class=line><span class=cl><span class=c1>## [+-]代表匹配包含的任一字符+或-，[+-]?则说明+或-可有可无</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>str</span> <span class=o>=</span> <span class=s1>&#39;aabbabaabbaa&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># 一个&#34;.&#34;就是匹配除 \n (换行符)以外的任意一个字符</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;a.b&#39;</span><span class=p>,</span> <span class=nb>str</span><span class=p>))</span>  <span class=c1>#[&#39;aab&#39;, &#39;aab&#39;]</span>
</span></span><span class=line><span class=cl><span class=c1># *前面的字符出现0次或以上</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;a*b&#39;</span><span class=p>,</span> <span class=nb>str</span><span class=p>))</span>  <span class=c1>#[&#39;aab&#39;, &#39;b&#39;, &#39;ab&#39;, &#39;aab&#39;, &#39;b&#39;]</span>
</span></span><span class=line><span class=cl><span class=c1># 贪婪，匹配从.*前面为开始到后面为结束的所有内容</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;a.*b&#39;</span><span class=p>,</span> <span class=nb>str</span><span class=p>))</span>  <span class=c1>#[&#39;aabbabaabb&#39;]</span>
</span></span><span class=line><span class=cl><span class=c1># 非贪婪，遇到开始和结束就进行截取，因此截取多次符合的结果，中间没有字符也会被截取</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;a.*?b&#39;</span><span class=p>,</span> <span class=nb>str</span><span class=p>))</span>  <span class=c1>#[&#39;aab&#39;, &#39;ab&#39;, &#39;aab&#39;]</span>
</span></span><span class=line><span class=cl><span class=c1># 非贪婪，与上面一样，只是与上面的相比多了一个括号，只保留括号的内容</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;a(.*?)b&#39;</span><span class=p>,</span> <span class=nb>str</span><span class=p>))</span>  <span class=c1>#[&#39;a&#39;, &#39;&#39;, &#39;a&#39;]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>str</span> <span class=o>=</span> <span class=s1>&#39;&#39;&#39;aabbab
</span></span></span><span class=line><span class=cl><span class=s1>         aabbaa
</span></span></span><span class=line><span class=cl><span class=s1>         bb&#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 后面多加了2个b</span>
</span></span><span class=line><span class=cl><span class=c1># 没有把最后一个换行的aab算进来</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;a.*?b&#39;</span><span class=p>,</span> <span class=nb>str</span><span class=p>))</span>  <span class=c1>#[&#39;aab&#39;, &#39;ab&#39;, &#39;aab&#39;]</span>
</span></span><span class=line><span class=cl><span class=c1># re.S不会对\n进行中断</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;a.*?b&#39;</span><span class=p>,</span> <span class=nb>str</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>S</span><span class=p>))</span>  <span class=c1>#[&#39;aab&#39;, &#39;ab&#39;, &#39;aab&#39;, &#39;aa\n         b&#39;]</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>content</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;苹果是绿色的
</span></span></span><span class=line><span class=cl><span class=s2>橙子是橙色的
</span></span></span><span class=line><span class=cl><span class=s2>香蕉是黄色的
</span></span></span><span class=line><span class=cl><span class=s2>乌鸦是黑色的&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>p</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;.色&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># 代表所有的单个字符，除了 \n \r</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>p</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>one</span> <span class=ow>in</span> <span class=n>p</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>content</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># 找出所有符合条件的文本</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>one</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>one</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>source</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;王亚辉
</span></span></span><span class=line><span class=cl><span class=s2>tony
</span></span></span><span class=line><span class=cl><span class=s2>刘文武&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># p = re.compile(r&#34;\w{2,4}&#34;)</span>
</span></span><span class=line><span class=cl><span class=n>p</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;\w{2,4}&#34;</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>A</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># 不匹配中文</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>p</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>source</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>content</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;001-苹果价格-60
</span></span></span><span class=line><span class=cl><span class=s2>002-橙子价格-78
</span></span></span><span class=line><span class=cl><span class=s2>003-香蕉价格-88&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># p = re.compile(r&#34;^\d+&#34;)</span>
</span></span><span class=line><span class=cl><span class=n>p</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;^\d+&#34;</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>M</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># ^可以表示每行开头</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>one</span> <span class=ow>in</span> <span class=n>p</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>content</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>one</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>content</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;001-苹果价格-60
</span></span></span><span class=line><span class=cl><span class=s2>002-橙子价格-78
</span></span></span><span class=line><span class=cl><span class=s2>003-香蕉价格-88&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># p = re.compile(r&#34;^\d+&#34;)</span>
</span></span><span class=line><span class=cl><span class=n>p</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;\d+$&#34;</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>M</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># ^可以表示每行开头</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>one</span> <span class=ow>in</span> <span class=n>p</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>content</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>one</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>content</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;张三，手机号码15945678901
</span></span></span><span class=line><span class=cl><span class=s2>李四，手机号码13945677701
</span></span></span><span class=line><span class=cl><span class=s2>王二，手机号码13845666901&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>p</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;^(.+)，.+(\d</span><span class=si>{11}</span><span class=s2>)&#34;</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>M</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># ^可以表示每行开头</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>one</span> <span class=ow>in</span> <span class=n>p</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>content</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>one</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>content</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;Python3高级开发工程师上海互教教育科技有限公司上海-浦东新区2万/月02-18满员
</span></span></span><span class=line><span class=cl><span class=s2>测试开发工程师(C+/python)上海墨鹍数码科技有限公司上海-浦东新区2.5万/每月02-18未满员
</span></span></span><span class=line><span class=cl><span class=s2>Python.3开发工程师上海德拓信息技术股份有限公司上海-徐汇区1.3万/每月02-18乘剩余11人
</span></span></span><span class=line><span class=cl><span class=s2>测试开发工程师(Python)赫里普（上海）信息科技有限公司上海-浦东新区1.1万/每月02-18剩余5人&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>p</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;([\d.]+)万/每{0,1}月&#34;</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>M</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># p = re.compile(r&#34;([\d.]+)万/每{0,1}月&#34;)</span>
</span></span><span class=line><span class=cl><span class=c1># ^可以表示每行开头</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>one</span> <span class=ow>in</span> <span class=n>p</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>content</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>one</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>names</span> <span class=o>=</span> <span class=s2>&#34;关羽; 张飞, 赵云,马超, 黄忠  李逵&#34;</span>
</span></span><span class=line><span class=cl><span class=n>namelist</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;[;,\s]\s*&#34;</span><span class=p>,</span> <span class=n>names</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>namelist</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## PhoneNumRegex = re.compile(r&#34;\d{3}-\d{3}-\d{3}&#34;)</span>
</span></span><span class=line><span class=cl><span class=n>PhoneNumRegex</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;(\d</span><span class=si>{3}</span><span class=s2>)-(\d</span><span class=si>{3}</span><span class=s2>-\d</span><span class=si>{3}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 向 re.compile()传入一个字符串值，表示正则表达式，它将返回一个 Regex 模式对象</span>
</span></span><span class=line><span class=cl><span class=n>mo</span> <span class=o>=</span> <span class=n>PhoneNumRegex</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=s2>&#34;My Phone number is 415-555-4242&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mo</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mo</span><span class=o>.</span><span class=n>group</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mo</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mo</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mo</span><span class=o>.</span><span class=n>groups</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>areacode</span><span class=p>,</span> <span class=n>mainNumber</span> <span class=o>=</span> <span class=n>mo</span><span class=o>.</span><span class=n>groups</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>areacode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mainNumber</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(&#34;Phone number founded:&#34; + mo.group())</span>
</span></span><span class=line><span class=cl><span class=c1>## Regex 对象的 search()方法查找传入的字符串，寻找该正则表达式的所有匹配。如</span>
</span></span><span class=line><span class=cl><span class=c1>## 果字符串中没有找到该正则表达式模式，search()方法将返回 None。如果找到了该模式，</span>
</span></span><span class=line><span class=cl><span class=c1>## search()方法将返回一个 Match 对象。Match 对象有一个 group()方法，它返回被查找字</span>
</span></span><span class=line><span class=cl><span class=c1>## 符串中实际匹配的文本</span>
</span></span><span class=line><span class=cl><span class=n>PhoneNumRegex2</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;(\(\d</span><span class=si>{3}</span><span class=s2>\))-(\d</span><span class=si>{3}</span><span class=s2>-\d</span><span class=si>{3}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>mo2</span> <span class=o>=</span> <span class=n>PhoneNumRegex2</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=s2>&#34;My Phone number is (415)-555-4242&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mo2</span><span class=o>.</span><span class=n>groups</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mo2</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>PhoneNumRegex3</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;(\d</span><span class=si>{3}</span><span class=s2>-)?\d</span><span class=si>{3}</span><span class=s2>-\d</span><span class=si>{4}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>mo3</span> <span class=o>=</span> <span class=n>PhoneNumRegex3</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=s2>&#34;My Phonenumber is 415-555-4224&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mo3</span><span class=o>.</span><span class=n>group</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>mo4</span> <span class=o>=</span> <span class=n>PhoneNumRegex3</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=s2>&#34;My Phonenumber is 555-4224&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>mo4</span><span class=o>.</span><span class=n>group</span><span class=p>())</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>agentNamesRegex</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;Agent (\w)\w*&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=n>agentNamesRegex</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=sa>r</span><span class=s2>&#34;\1****&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Agent Alice told Agent Carol that Agent Eve knew Agent Bob was a double agent.&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 字符串中的\1 将由分组 1 匹配的文本所替代，也就是正则表达式的(\w)分组。</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## phoneAndEmail.py - Finds phone numbers and email addresses on the clipboard.</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pyperclip</span><span class=o>,</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>phoneRegex</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=sa>r</span><span class=s2>&#34;&#34;&#34;(
</span></span></span><span class=line><span class=cl><span class=s2>(\d</span><span class=si>{3}</span><span class=s2>|\(\d</span><span class=si>{3}</span><span class=s2>\))? ## area code
</span></span></span><span class=line><span class=cl><span class=s2>(\s|-|\.)? ## separator
</span></span></span><span class=line><span class=cl><span class=s2>(\d</span><span class=si>{3}</span><span class=s2>) ## first 3 digits
</span></span></span><span class=line><span class=cl><span class=s2>(\s|-|\.) ## separator
</span></span></span><span class=line><span class=cl><span class=s2>(\d</span><span class=si>{4}</span><span class=s2>) ## last 4 digits
</span></span></span><span class=line><span class=cl><span class=s2>(\s*(ext|x|ext.)\s*(\d{2,5}))? ## extension
</span></span></span><span class=line><span class=cl><span class=s2>)&#34;&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>re</span><span class=o>.</span><span class=n>VERBOSE</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>emailRegex</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=sa>r</span><span class=s2>&#34;&#34;&#34;(
</span></span></span><span class=line><span class=cl><span class=s2>[a-zA-Z0-9._%+-]+ ## username
</span></span></span><span class=line><span class=cl><span class=s2>@ ## @ symbol
</span></span></span><span class=line><span class=cl><span class=s2>[a-zA-Z0-9.-]+ ## domain name
</span></span></span><span class=line><span class=cl><span class=s2>(\.[a-zA-Z]{2,4}) ## dot-something
</span></span></span><span class=line><span class=cl><span class=s2>)&#34;&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>re</span><span class=o>.</span><span class=n>VERBOSE</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>text</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>pyperclip</span><span class=o>.</span><span class=n>paste</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=c1>## 从剪切板获取内容</span>
</span></span><span class=line><span class=cl><span class=n>matches</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>groups</span> <span class=ow>in</span> <span class=n>phoneRegex</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>text</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>phoneNum</span> <span class=o>=</span> <span class=s2>&#34;-&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>([</span><span class=n>groups</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>groups</span><span class=p>[</span><span class=mi>3</span><span class=p>],</span> <span class=n>groups</span><span class=p>[</span><span class=mi>5</span><span class=p>]])</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 用-连接各部分</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>groups</span><span class=p>[</span><span class=mi>8</span><span class=p>]</span> <span class=o>!=</span> <span class=s2>&#34;&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>phoneNum</span> <span class=o>+=</span> <span class=s2>&#34; x&#34;</span> <span class=o>+</span> <span class=n>groups</span><span class=p>[</span><span class=mi>8</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>matches</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>phoneNum</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>groups</span> <span class=ow>in</span> <span class=n>emailRegex</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>text</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>matches</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>groups</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=c1>## group[0]是匹配r&#39;&#39;中的所有东西</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>matches</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>pyperclip</span><span class=o>.</span><span class=n>copy</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>matches</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 以换行符为行分隔符复制到剪切板</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Copied to clipboard:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>matches</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;No phone numbers or email addresses found.&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=pilpillow模块的使用><span>PIL(Pillow)模块的使用</span>
<a href=#pilpillow%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><h5 class=heading-element id=1打开--显示--保存图片><span>1.打开 显示 保存图片</span>
<a href=#1%e6%89%93%e5%bc%80--%e6%98%be%e7%a4%ba--%e4%bf%9d%e5%ad%98%e5%9b%be%e7%89%87 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>png格式的图片保存为jpg格式时会报错是因为PNG和JPG的通道数不同</p><p>PNG:RGBA</p><p>JPG:RGB</p><p>所以，PNG格式图片要保存成JPG格式就要丢弃A通道</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s1>&#39;0.jpg&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#打开这张图片</span>
</span></span><span class=line><span class=cl><span class=n>image</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1>## 显示这张图片</span>
</span></span><span class=line><span class=cl><span class=n>image</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s1>&#39;1.jpg&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#保持打开的图片</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>image</span><span class=o>.</span><span class=n>mode</span><span class=p>,</span> <span class=n>image</span><span class=o>.</span><span class=n>size</span><span class=p>,</span> <span class=n>image</span><span class=o>.</span><span class=n>format</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## RGB (1920, 1080) JPEG</span>
</span></span><span class=line><span class=cl><span class=c1>## mode代表图片的属性，RGB代表彩色图像，L代表光照图像即灰度图像等</span>
</span></span><span class=line><span class=cl><span class=c1>## size属性为图片的大小（长度，宽度）</span>
</span></span><span class=line><span class=cl><span class=c1>## format属性为图片的格式</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=2转换图片模式><span>2.转换图片模式</span>
<a href=#2%e8%bd%ac%e6%8d%a2%e5%9b%be%e7%89%87%e6%a8%a1%e5%bc%8f class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>任何支持的图片模式都可以直接转为彩色模式或者灰度模式，但是，若是想转化为其他模式，</p><p>则需要借助一个中间模式（通常是彩色）来进行过转</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s1>&#39;0.jpg&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## image.show()</span>
</span></span><span class=line><span class=cl><span class=n>grey_image</span><span class=o>=</span><span class=n>image</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;L&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>grey_image</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>grey_image</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s1>&#39;grey.jpg&#39;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=3通道的分离合并><span>3.通道的分离合并</span>
<a href=#3%e9%80%9a%e9%81%93%e7%9a%84%e5%88%86%e7%a6%bb%e5%90%88%e5%b9%b6 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>彩色图像可以分离出 R、G、B 通道，但若是灰度图像，则返回灰度图像本身。</p><p>然后，可以将 R、G、B 通道按照一定的顺序再合并成彩色图像。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s1>&#39;0.jpg&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>r</span><span class=p>,</span><span class=n>g</span><span class=p>,</span><span class=n>b</span> <span class=o>=</span> <span class=n>image</span><span class=o>.</span><span class=n>split</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>im</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=s1>&#39;RGB&#39;</span><span class=p>,(</span><span class=n>b</span><span class=p>,</span><span class=n>g</span><span class=p>,</span><span class=n>r</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>im</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=4图片的裁剪缩放旋转和镜像><span>4.图片的裁剪、缩放、旋转和镜像</span>
<a href=#4%e5%9b%be%e7%89%87%e7%9a%84%e8%a3%81%e5%89%aa%e7%bc%a9%e6%94%be%e6%97%8b%e8%bd%ac%e5%92%8c%e9%95%9c%e5%83%8f class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s1>&#39;0.jpg&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 获取图像尺寸</span>
</span></span><span class=line><span class=cl><span class=n>w</span><span class=p>,</span><span class=n>h</span> <span class=o>=</span> <span class=n>img</span><span class=o>.</span><span class=n>size</span>
</span></span><span class=line><span class=cl><span class=c1>## 缩放50%</span>
</span></span><span class=line><span class=cl><span class=n>img</span><span class=o>.</span><span class=n>thumbnail</span><span class=p>((</span><span class=n>w</span><span class=o>//</span><span class=mi>2</span><span class=p>,</span><span class=n>h</span><span class=o>//</span><span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>img</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1>## 水平翻转图片</span>
</span></span><span class=line><span class=cl><span class=n>img1</span> <span class=o>=</span> <span class=n>img</span><span class=o>.</span><span class=n>transpose</span><span class=p>(</span><span class=n>Image</span><span class=o>.</span><span class=n>FLIP_LEFT_RIGHT</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 保存图片</span>
</span></span><span class=line><span class=cl><span class=n>img1</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>img1</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s1>&#39;1.png&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#垂直翻转图片</span>
</span></span><span class=line><span class=cl><span class=n>img2</span> <span class=o>=</span> <span class=n>img</span><span class=o>.</span><span class=n>rotate</span><span class=p>(</span><span class=mi>180</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>img2</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1>#水平+垂直翻转图片</span>
</span></span><span class=line><span class=cl><span class=n>img3</span> <span class=o>=</span> <span class=n>img</span><span class=o>.</span><span class=n>transpose</span><span class=p>(</span><span class=n>Image</span><span class=o>.</span><span class=n>FLIP_LEFT_RIGHT</span><span class=p>)</span><span class=o>.</span><span class=n>rotate</span><span class=p>(</span><span class=mi>180</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>img3</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1>#裁剪图片</span>
</span></span><span class=line><span class=cl><span class=c1>#图片裁剪用到的方法是image.crop()，这个方法能从图像中提取出某个矩形大小的图像。它接收一个四元素的元组作为参数，各元素为（left, upper, right, lower），坐标系统的原点（0, 0）是左上角。</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>img</span><span class=o>.</span><span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>imgcut</span> <span class=o>=</span> <span class=n>img</span><span class=o>.</span><span class=n>crop</span><span class=p>((</span><span class=mi>100</span><span class=p>,</span><span class=mi>200</span><span class=p>,</span><span class=mi>500</span><span class=p>,</span><span class=mi>600</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>imgcut</span><span class=o>.</span><span class=n>show</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>transpose有这么几种模式：</p><ul><li>FLIP_LEFT_RIGHT：左右镜像</li><li>FLIP_TOP_BOTTOM：上下镜像</li><li>ROTATE_90：逆时针转90度</li><li>ROTATE_180：逆时针转180度</li><li>ROTATE_270：逆时针转270度</li><li>TRANSPOSE：像素矩阵转置</li><li>TRANSVERSE：对角线对转</li></ul><h5 class=heading-element id=5给图片添加文字><span>5.给图片添加文字</span>
<a href=#5%e7%bb%99%e5%9b%be%e7%89%87%e6%b7%bb%e5%8a%a0%e6%96%87%e5%ad%97 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span><span class=p>,</span><span class=n>ImageDraw</span><span class=p>,</span><span class=n>ImageFont</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s1>&#39;0.jpg&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 调用画图模块</span>
</span></span><span class=line><span class=cl><span class=n>draw</span> <span class=o>=</span> <span class=n>ImageDraw</span><span class=o>.</span><span class=n>Draw</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 设置字体</span>
</span></span><span class=line><span class=cl><span class=n>tfont</span> <span class=o>=</span> <span class=n>ImageFont</span><span class=o>.</span><span class=n>truetype</span><span class=p>(</span><span class=s2>&#34;arial.ttf&#34;</span><span class=p>,</span><span class=mi>24</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 添加文字</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    参数一：文字在图片的位置：(x, y)
</span></span></span><span class=line><span class=cl><span class=s2>    参数二：文字内容
</span></span></span><span class=line><span class=cl><span class=s2>    参数三：字体颜色，当然颜色也可以用RGB值指定
</span></span></span><span class=line><span class=cl><span class=s2>    参数四：字体类型
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>draw</span><span class=o>.</span><span class=n>text</span><span class=p>((</span><span class=mi>50</span><span class=p>,</span><span class=mi>30</span><span class=p>),</span><span class=s2>&#34;eyes++&#34;</span><span class=p>,</span><span class=n>fill</span><span class=o>=</span><span class=s2>&#34;red&#34;</span><span class=p>,</span><span class=n>font</span><span class=o>=</span><span class=n>tfont</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 保存图片</span>
</span></span><span class=line><span class=cl><span class=n>img</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;addword.png&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>img</span><span class=o>.</span><span class=n>show</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=6pil滤镜功能><span>6.PIL滤镜功能</span>
<a href=#6pil%e6%bb%a4%e9%95%9c%e5%8a%9f%e8%83%bd class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span><span class=p>,</span><span class=n>ImageFilter</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s1>&#39;0.jpg&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>img</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>ImageFilter</span><span class=o>.</span><span class=n>CONTOUR</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>img</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s1>&#39;filter.png&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>img</span><span class=o>.</span><span class=n>show</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>滤镜类型如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mageFilter.BLUR			模糊滤镜
</span></span><span class=line><span class=cl>mageFilter.CONTOUR			轮廓
</span></span><span class=line><span class=cl>mageFilter.EDGE_ENHANCE			边界加强
</span></span><span class=line><span class=cl>mageFilter.EDGE_ENHANCE_MORE			边界加强（阀值更大）
</span></span><span class=line><span class=cl>mageFilter.EMBOSS			浮雕滤镜
</span></span><span class=line><span class=cl>mageFilter.FIND_EDGES			边界滤镜
</span></span><span class=line><span class=cl>mageFilter.SMOOTH			平滑滤镜
</span></span><span class=line><span class=cl>mageFilter.SMOOTH MORE			平滑滤镜（阀值更大）
</span></span><span class=line><span class=cl>mageFilter.SHARPEN			锐化滤镜
</span></span><span class=line><span class=cl>ImageFilter.DETAIL			细节滤镜</span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=7图片的拼接><span>7.图片的拼接</span>
<a href=#7%e5%9b%be%e7%89%87%e7%9a%84%e6%8b%bc%e6%8e%a5 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>img1</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s1>&#39;0.jpg&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>img2</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s1>&#39;1.jpg&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#先查看图片尺寸</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>img1</span><span class=o>.</span><span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>img2</span><span class=o>.</span><span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 新建空白图片,三个参数分别是模式(RGB/RGBA) 大小 颜色</span>
</span></span><span class=line><span class=cl><span class=n>newimg</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=n>mode</span><span class=o>=</span><span class=s2>&#34;RGB&#34;</span><span class=p>,</span><span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=mi>3840</span><span class=p>,</span><span class=mi>2160</span><span class=p>),</span><span class=n>color</span><span class=o>=</span><span class=p>(</span><span class=mi>255</span><span class=p>,</span><span class=mi>100</span><span class=p>,</span><span class=mi>50</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>## 拼接图片 第一个参数是图片 第二个参数是图片的位置</span>
</span></span><span class=line><span class=cl><span class=n>newimg</span><span class=o>.</span><span class=n>paste</span><span class=p>(</span><span class=n>img1</span><span class=p>,(</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>newimg</span><span class=o>.</span><span class=n>paste</span><span class=p>(</span><span class=n>img1</span><span class=p>,(</span><span class=mi>1920</span><span class=p>,</span><span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>newimg</span><span class=o>.</span><span class=n>show</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>将小图片合成为大图片(二维码)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>IMAGES_PATH</span> <span class=o>=</span> <span class=s1>&#39;signal1</span><span class=se>\\</span><span class=s1>&#39;</span>  <span class=c1>## 图片集（文件夹）地址</span>
</span></span><span class=line><span class=cl><span class=n>IMAGES_FORMAT</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;.png&#39;</span><span class=p>,</span> <span class=s1>&#39;.PNG&#39;</span><span class=p>]</span>  <span class=c1>## 图片格式</span>
</span></span><span class=line><span class=cl><span class=n>IMAGE_WIDTH</span> <span class=o>=</span> <span class=mi>100</span>  <span class=c1>## 每张小图片的宽</span>
</span></span><span class=line><span class=cl><span class=n>IMAGE_HEIGHT</span> <span class=o>=</span> <span class=mi>100</span>  <span class=c1>## 每张小图片的高</span>
</span></span><span class=line><span class=cl><span class=n>IMAGE_ROW</span> <span class=o>=</span> <span class=mi>25</span>  <span class=c1>## 大图片一共有几行</span>
</span></span><span class=line><span class=cl><span class=n>IMAGE_COLUMN</span> <span class=o>=</span> <span class=mi>25</span>  <span class=c1>## 大图片一共有几列</span>
</span></span><span class=line><span class=cl><span class=c1>## IMAGE_SAVE_PATH = &#39;final.jpg&#39;  ## 图片转换后的地址</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>newimg</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=s1>&#39;RGB&#39;</span><span class=p>,(</span><span class=n>IMAGE_COLUMN</span> <span class=o>*</span> <span class=n>IMAGE_HEIGHT</span><span class=p>,</span> <span class=n>IMAGE_ROW</span> <span class=o>*</span> <span class=n>IMAGE_WIDTH</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>## 新建一个2500x2500的图像</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>y</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>25</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>25</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>timg</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=n>IMAGES_PATH</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>y</span><span class=o>*</span><span class=n>IMAGE_COLUMN</span> <span class=o>+</span> <span class=n>x</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;.png&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 打开文件夹中的图片</span>
</span></span><span class=line><span class=cl>        <span class=n>newimg</span><span class=o>.</span><span class=n>paste</span><span class=p>(</span><span class=n>timg</span><span class=p>,</span> <span class=p>(</span><span class=n>x</span><span class=o>*</span><span class=n>IMAGE_WIDTH</span><span class=p>,</span> <span class=n>y</span><span class=o>*</span><span class=n>IMAGE_HEIGHT</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 将打开的图片粘贴到newimg的指定位置</span>
</span></span><span class=line><span class=cl><span class=n>newimg</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s1>&#39;new.png&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 将图片保存new.png</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=8二进制数据转图片><span>8.二进制数据转图片</span>
<a href=#8%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%95%b0%e6%8d%ae%e8%bd%ac%e5%9b%be%e7%89%87 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>bin2img</span><span class=p>(</span><span class=n>bin_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>imgname</span> <span class=o>=</span> <span class=s2>&#34;tmp.png&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>pixels</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=n>img</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=s2>&#34;RGB&#34;</span><span class=p>,(</span><span class=mi>50</span><span class=p>,</span><span class=mi>50</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>bin_data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>item</span> <span class=o>==</span><span class=s1>&#39;0&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>pixels</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>pixels</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=mi>255</span><span class=p>,</span><span class=mi>255</span><span class=p>,</span><span class=mi>255</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>img</span><span class=o>.</span><span class=n>putdata</span><span class=p>(</span><span class=n>pixels</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># img.show()</span>
</span></span><span class=line><span class=cl>    <span class=n>img</span> <span class=o>=</span> <span class=n>img</span><span class=o>.</span><span class=n>resize</span><span class=p>((</span><span class=mi>500</span><span class=p>,</span><span class=mi>500</span><span class=p>))</span> 
</span></span><span class=line><span class=cl>    <span class=c1># 这里调整一下图片的大小，便于后面pyzbar的识别</span>
</span></span><span class=line><span class=cl>    <span class=n>img</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>imgname</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>imgname</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=比赛中使用的例子><span>比赛中使用的例子</span>
<a href=#%e6%af%94%e8%b5%9b%e4%b8%ad%e4%bd%bf%e7%94%a8%e7%9a%84%e4%be%8b%e5%ad%90 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>例题1-2024浙江省赛初赛-EZtraffic(100张图片按照顺序合并)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>merge_img</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>cols</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=n>rows</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=n>img_list</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=n>new_img</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=s2>&#34;RGB&#34;</span><span class=p>,(</span><span class=mi>500</span><span class=p>,</span><span class=mi>500</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>101</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>img</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;./final_out/</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>.png&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>img_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>y</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>rows</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>cols</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>idx</span> <span class=o>=</span> <span class=n>y</span> <span class=o>*</span> <span class=n>cols</span> <span class=o>+</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>            <span class=n>img</span> <span class=o>=</span> <span class=n>img_list</span><span class=p>[</span><span class=n>idx</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>x_offset</span> <span class=o>=</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>50</span>
</span></span><span class=line><span class=cl>            <span class=n>y_offset</span> <span class=o>=</span> <span class=n>y</span> <span class=o>*</span> <span class=mi>50</span>
</span></span><span class=line><span class=cl>            <span class=n>new_img</span><span class=o>.</span><span class=n>paste</span><span class=p>(</span><span class=n>img</span><span class=p>,(</span><span class=n>x_offset</span><span class=p>,</span><span class=n>y_offset</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>    <span class=c1># new_img.show()</span>
</span></span><span class=line><span class=cl>    <span class=n>new_img</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;flag.png&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>例题2-2023SICTF-color</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>itertools</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>num</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>128</span><span class=p>,</span> <span class=mi>255</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>lis</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>itertools</span><span class=o>.</span><span class=n>product</span><span class=p>(</span><span class=n>num</span><span class=p>,</span> <span class=n>repeat</span><span class=o>=</span><span class=mi>3</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s2>&#34;./save.png&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建一张灰度图，并设置图像的初始颜色为255（白色）</span>
</span></span><span class=line><span class=cl><span class=n>new_img</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=s2>&#34;L&#34;</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=n>img</span><span class=o>.</span><span class=n>width</span><span class=p>,</span> <span class=n>img</span><span class=o>.</span><span class=n>height</span><span class=p>),</span> <span class=n>color</span><span class=o>=</span><span class=mi>255</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># 创建一个 RGB 模式的图像</span>
</span></span><span class=line><span class=cl><span class=c1># new_img = Image.new(&#34;RGB&#34;, size=(img.width, img.height), color=(255, 255, 255))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>y</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>img</span><span class=o>.</span><span class=n>height</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>img</span><span class=o>.</span><span class=n>width</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>img</span><span class=o>.</span><span class=n>getpixel</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>))</span> <span class=ow>in</span> <span class=n>lis</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>new_img</span><span class=o>.</span><span class=n>putpixel</span><span class=p>((</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>),</span> <span class=n>value</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=c1># 设置像素值为 (0, 0, 0)（黑色）</span>
</span></span><span class=line><span class=cl>            <span class=c1># new_img.putpixel((x, y), (0, 0, 0))</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl><span class=n>new_img</span><span class=o>.</span><span class=n>show</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>例题3-2023楚慧杯-gb2312-80(元组转图片)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>draw2pic2</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;hint.txt&#34;</span><span class=p>,</span><span class=s2>&#34;r&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>row_list</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>split</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>idx</span><span class=p>,</span><span class=n>row</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>row_list</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># print(row)</span>
</span></span><span class=line><span class=cl>        <span class=n>pixel_data</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=n>img</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=n>mode</span><span class=o>=</span><span class=s2>&#34;RGB&#34;</span><span class=p>,</span><span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=mi>16</span><span class=p>,</span><span class=mi>16</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>bin_data</span> <span class=ow>in</span> <span class=n>row</span><span class=p>:</span>                
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>bin_data</span> <span class=o>!=</span> <span class=s1>&#39;0&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>pixel_data</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=mi>255</span><span class=p>,</span><span class=mi>255</span><span class=p>,</span><span class=mi>255</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>pixel_data</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=n>img</span><span class=o>.</span><span class=n>putdata</span><span class=p>(</span><span class=n>pixel_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>img</span> <span class=o>=</span> <span class=n>img</span><span class=o>.</span><span class=n>resize</span><span class=p>((</span><span class=mi>250</span><span class=p>,</span><span class=mi>250</span><span class=p>))</span> <span class=c1># 调整一下图片大小，便于查看</span>
</span></span><span class=line><span class=cl>        <span class=c1># img.show()</span>
</span></span><span class=line><span class=cl>        <span class=n>img</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;./out1/</span><span class=si>{</span><span class=n>idx</span><span class=si>}</span><span class=s2>.png&#34;</span><span class=p>)</span> </span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=pyzipper模块的使用><span>pyzipper模块的使用</span>
<a href=#pyzipper%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><h5 class=heading-element id=比赛中的使用记录><span>比赛中的使用记录</span>
<a href=#%e6%af%94%e8%b5%9b%e4%b8%ad%e7%9a%84%e4%bd%bf%e7%94%a8%e8%ae%b0%e5%bd%95 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>例题1-2024HITCTF邀请赛-BOMB</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pyzipper</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>extract_zip</span><span class=p>(</span><span class=n>zip_file</span><span class=p>,</span><span class=n>passwd</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=s1>&#39;./tmp&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>os</span><span class=o>.</span><span class=n>mkdir</span><span class=p>(</span><span class=s1>&#39;./tmp&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=n>pyzipper</span><span class=o>.</span><span class=n>ZipFile</span><span class=p>(</span><span class=n>zip_file</span><span class=p>,</span><span class=s2>&#34;r&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>zip_ref</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>zipinfo</span> <span class=ow>in</span> <span class=n>zip_ref</span><span class=o>.</span><span class=n>filelist</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=s1>&#39;.txt&#39;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>zipinfo</span><span class=o>.</span><span class=n>filename</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>zip_ref</span><span class=o>.</span><span class=n>extract</span><span class=p>(</span><span class=n>zipinfo</span><span class=p>,</span><span class=s1>&#39;./tmp&#39;</span><span class=p>,</span><span class=n>pwd</span><span class=o>=</span><span class=n>passwd</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># 提取压缩包中特定压缩大小的文件</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>zipinfo</span><span class=o>.</span><span class=n>compress_size</span> <span class=o>&gt;</span> <span class=mi>17</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>zip_ref</span><span class=o>.</span><span class=n>extract</span><span class=p>(</span><span class=n>zipinfo</span><span class=p>,</span><span class=s1>&#39;./tmp&#39;</span><span class=p>,</span><span class=n>pwd</span><span class=o>=</span><span class=n>passwd</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;./tmp/Password.txt&#34;</span><span class=p>,</span><span class=s2>&#34;r&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>passwd</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>os</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>zip_file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>os</span><span class=o>.</span><span class=n>system</span><span class=p>(</span><span class=s2>&#34;mv ./tmp/*.zip .&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>passwd</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>zip_file</span> <span class=o>=</span> <span class=s2>&#34;nextlevel.zip&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>passwd</span> <span class=o>=</span> <span class=s2>&#34;Ll3zHsArHF&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>cnt</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[+] 第</span><span class=si>{</span><span class=n>cnt</span><span class=si>}</span><span class=s2>层的密码是：</span><span class=si>{</span><span class=n>passwd</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>passwd</span> <span class=o>=</span> <span class=n>extract_zip</span><span class=p>(</span><span class=n>zip_file</span><span class=p>,</span><span class=n>passwd</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>cnt</span> <span class=o>+=</span> <span class=mi>1</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=pyzbar模块的使用><span>pyzbar模块的使用</span>
<a href=#pyzbar%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><h5 class=heading-element id=识别二维码><span>识别二维码</span>
<a href=#%e8%af%86%e5%88%ab%e4%ba%8c%e7%bb%b4%e7%a0%81 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pyzbar.pyzbar</span> <span class=kn>import</span> <span class=n>decode</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>read_qrcode</span><span class=p>(</span><span class=n>imgname</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>img</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=n>imgname</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>img</span> <span class=o>=</span> <span class=n>img</span><span class=o>.</span><span class=n>resize</span><span class=p>((</span><span class=mi>500</span><span class=p>,</span><span class=mi>500</span><span class=p>))</span> 
</span></span><span class=line><span class=cl>    <span class=c1># 这里调整一下图片的大小，便于二维码的识别</span>
</span></span><span class=line><span class=cl>    <span class=n>decode_data</span> <span class=o>=</span> <span class=n>decode</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># print(decode_data)</span>
</span></span><span class=line><span class=cl>    <span class=n>res</span> <span class=o>=</span> <span class=n>decode_data</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>os</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>imgname</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>res</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=subprocess模块的使用><span>subprocess模块的使用</span>
<a href=#subprocess%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><h5 class=heading-element id=subprocessrun-函数的基本用法><span>subprocess.run() 函数的基本用法：</span>
<a href=#subprocessrun-%e5%87%bd%e6%95%b0%e7%9a%84%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><blockquote><p><code>subprocess.run()</code> 用来启动一个子进程，并等待该进程执行完毕。它的返回值是一个 <code>CompletedProcess</code> 对象，包含了子进程的返回码、标准输出、标准错误等信息。</p></blockquote><p>函数签名：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>stdin</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>stdout</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>stderr</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=nb>input</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>check</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>cwd</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>env</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>universal_newlines</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>errors</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>bufsize</span><span class=o>=-</span><span class=mi>1</span><span class=p>,</span> <span class=n>pass_fds</span><span class=o>=</span><span class=p>(),</span> <span class=n>preexec_fn</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>close_fds</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>常见参数：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>args：表示命令和参数，通常是一个字符串（如果shell=True）或一个列表（如果shell=False）。
</span></span><span class=line><span class=cl>stdout：指定标准输出的流，通常是一个文件对象或subprocess.PIPE（捕获输出）。
</span></span><span class=line><span class=cl>stderr：指定标准错误的流，通常是一个文件对象或subprocess.PIPE（捕获错误输出）。
</span></span><span class=line><span class=cl>shell：如果是True，命令会通过shell执行，可以使用shell特性（如管道、重定向等）。
</span></span><span class=line><span class=cl>capture_output：如果是True，会捕获标准输出和标准错误的内容。可以用来替代stdout=subprocess.PIPE和stderr=subprocess.PIPE。
</span></span><span class=line><span class=cl>check：如果是True，当命令返回非零退出码时会抛出subprocess.CalledProcessError异常。</span></span></code></pre></td></tr></table></div></div><p>返回值：</p><p>subprocess.run()会返回一个CompletedProcess对象，其中包含以下信息：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>args：传入的命令和参数。
</span></span><span class=line><span class=cl>returncode：子进程的退出码。
</span></span><span class=line><span class=cl>stdout：标准输出（如果使用了capture_output=True）。
</span></span><span class=line><span class=cl>stderr：标准错误输出（如果使用了capture_output=True）。</span></span></code></pre></td></tr></table></div></div><p>举例：</p><p>1、简单的命令执行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 执行命令，返回结果并打印</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s2>&#34;ls&#34;</span><span class=p>,</span> <span class=s2>&#34;-l&#34;</span><span class=p>],</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;命令输出：&#34;</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;返回码：&#34;</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>returncode</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>这个例子中，<code>subprocess.run()</code> 执行了 <code>ls -l</code> 命令，捕获了命令的标准输出，并打印出来。如果命令执行成功，返回码 <code>returncode</code> 会是 0。</p><p>2、使用 <code>shell=True</code> 执行复杂的命令</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用shell执行命令，允许使用管道</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&#34;echo &#39;Hello World&#39; | grep &#39;Hello&#39;&#34;</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;命令输出：&#34;</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;返回码：&#34;</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>returncode</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>这里使用了 <code>shell=True</code>，可以在命令中使用管道（<code>|</code>）。命令 <code>echo 'Hello World' | grep 'Hello'</code> 会输出 <code>Hello World</code>，因为 <code>grep 'Hello'</code> 会过滤出包含 &ldquo;Hello&rdquo; 的行。</p><p>3、捕获标准错误</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 运行一个不存在的命令</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s2>&#34;nonexistent_command&#34;</span><span class=p>],</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 打印标准错误</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;标准错误：&#34;</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>stderr</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>在这个例子中，我们尝试执行一个不存在的命令。<code>subprocess.run()</code> 会捕获标准错误，并将其存储在 <code>stderr</code> 中。可以通过 <code>result.stderr</code> 打印出来。</p><p>4、检查命令是否成功执行（<code>check=True</code>）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 运行一个可能失败的命令，使用 check=True</span>
</span></span><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s2>&#34;ls&#34;</span><span class=p>,</span> <span class=s2>&#34;non_existent_directory&#34;</span><span class=p>],</span> <span class=n>check</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>CalledProcessError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;命令失败！返回码：</span><span class=si>{</span><span class=n>e</span><span class=o>.</span><span class=n>returncode</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;标准错误：</span><span class=si>{</span><span class=n>e</span><span class=o>.</span><span class=n>stderr</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>在这个例子中，命令 <code>ls non_existent_directory</code> 会失败（因为目录不存在）。设置 <code>check=True</code> 后，<code>subprocess.run()</code> 会在命令返回非零退出码时抛出 <code>CalledProcessError</code> 异常。</p><p>5、设置超时（<code>timeout</code>）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 设置超时，如果命令运行超过5秒，会抛出 TimeoutExpired 异常</span>
</span></span><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s2>&#34;sleep&#34;</span><span class=p>,</span> <span class=s2>&#34;10&#34;</span><span class=p>],</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>TimeoutExpired</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;命令超时！命令：</span><span class=si>{</span><span class=n>e</span><span class=o>.</span><span class=n>cmd</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>在这个例子中，<code>sleep 10</code> 会执行 10 秒，但因为设置了 <code>timeout=5</code>，它会在 5 秒后超时并抛出 <code>TimeoutExpired</code> 异常。</p><p>6、与输入交互（<code>input</code> 参数）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 向命令传递输入数据</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s2>&#34;grep&#34;</span><span class=p>,</span> <span class=s2>&#34;Hello&#34;</span><span class=p>],</span> <span class=nb>input</span><span class=o>=</span><span class=s2>&#34;Hello World</span><span class=se>\n</span><span class=s2>Hello Python&#34;</span><span class=p>,</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;命令输出：&#34;</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>这个例子中，我们通过 <code>input="Hello World\nHello Python"</code> 向 <code>grep</code> 命令传递了输入数据，<code>grep</code> 会搜索包含 &ldquo;Hello&rdquo; 的行并输出。</p><h5 class=heading-element id=使用subprocess运行tshark处理流量包><span>使用subprocess运行tshark处理流量包</span>
<a href=#%e4%bd%bf%e7%94%a8subprocess%e8%bf%90%e8%a1%8ctshark%e5%a4%84%e7%90%86%e6%b5%81%e9%87%8f%e5%8c%85 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>tshark_path</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;D:\MD\CTF\Tools\Misc\Wireshark\tshark.exe&#34;</span>
</span></span><span class=line><span class=cl><span class=n>output</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>command</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>	<span class=n>tshark_path</span><span class=p>,</span>  <span class=c1># 使用完整的 tshark 路径</span>
</span></span><span class=line><span class=cl>	<span class=s1>&#39;-r&#39;</span><span class=p>,</span> <span class=n>file_path</span><span class=p>,</span>  <span class=c1># 读取指定的 pcapng 文件</span>
</span></span><span class=line><span class=cl>	<span class=s1>&#39;-Y&#39;</span><span class=p>,</span> <span class=s1>&#39;http&#39;</span><span class=p>,</span>  <span class=c1># 过滤出 HTTP 数据包</span>
</span></span><span class=line><span class=cl>	<span class=s1>&#39;-T&#39;</span><span class=p>,</span> <span class=s1>&#39;json&#39;</span><span class=p>,</span>  <span class=c1># 输出为 JSON 格式</span>
</span></span><span class=line><span class=cl>	<span class=s1>&#39;-e&#39;</span><span class=p>,</span> <span class=s1>&#39;http.request.method&#39;</span><span class=p>,</span>  <span class=c1># 请求方法</span>
</span></span><span class=line><span class=cl>	<span class=s1>&#39;-e&#39;</span><span class=p>,</span> <span class=s1>&#39;http.host&#39;</span><span class=p>,</span>  <span class=c1># 请求主机</span>
</span></span><span class=line><span class=cl>	<span class=s1>&#39;-e&#39;</span><span class=p>,</span> <span class=s1>&#39;http.request.uri&#39;</span><span class=p>,</span>  <span class=c1># 请求 URI</span>
</span></span><span class=line><span class=cl>	<span class=s1>&#39;-e&#39;</span><span class=p>,</span> <span class=s1>&#39;http.user_agent&#39;</span><span class=p>,</span>  <span class=c1># 用户代理</span>
</span></span><span class=line><span class=cl>	<span class=s1>&#39;-e&#39;</span><span class=p>,</span> <span class=s1>&#39;http.file_data&#39;</span><span class=p>,</span>  <span class=c1># 请求中的文件数据（POST 请求的内容）</span>
</span></span><span class=line><span class=cl>	<span class=s1>&#39;-e&#39;</span><span class=p>,</span> <span class=s1>&#39;http.response.code&#39;</span><span class=p>,</span>  <span class=c1># 响应代码</span>
</span></span><span class=line><span class=cl>	<span class=s1>&#39;-e&#39;</span><span class=p>,</span> <span class=s1>&#39;http.response.phrase&#39;</span><span class=p>,</span>  <span class=c1># 响应短语</span>
</span></span><span class=line><span class=cl>	<span class=s1>&#39;-e&#39;</span><span class=p>,</span> <span class=s1>&#39;http.content_type&#39;</span>  <span class=c1># 响应内容类型</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>	<span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
</span></span><span class=line><span class=cl>		<span class=n>command</span><span class=p>,</span> <span class=n>check</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>stdout</span><span class=o>=</span><span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>,</span> <span class=n>stderr</span><span class=o>=</span><span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>json_output</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=c1># print(json.dumps(json_output, indent=4))  # 这个输出是用来调试的，可以移除</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=c1># 遍历 JSON 数据并提取字段</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=n>packet</span> <span class=ow>in</span> <span class=n>json_output</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=n>layers</span> <span class=o>=</span> <span class=n>packet</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;_source&#39;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;layers&#39;</span><span class=p>,</span> <span class=p>{})</span>
</span></span><span class=line><span class=cl>		<span class=c1># 提取请求方法、主机、URI等字段</span>
</span></span><span class=line><span class=cl>		<span class=n>request_method</span> <span class=o>=</span> <span class=n>layers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;http.request.method&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;None&#39;</span><span class=p>])[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>		<span class=n>request_host</span> <span class=o>=</span> <span class=n>layers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;http.host&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;None&#39;</span><span class=p>])[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>		<span class=n>request_uri</span> <span class=o>=</span> <span class=n>layers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;http.request.uri&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;None&#39;</span><span class=p>])[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>		<span class=n>user_agent</span> <span class=o>=</span> <span class=n>layers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;http.user_agent&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;None&#39;</span><span class=p>])[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>		<span class=n>file_data</span> <span class=o>=</span> <span class=n>layers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;http.file_data&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;None&#39;</span><span class=p>])[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>		<span class=n>response_code</span> <span class=o>=</span> <span class=n>layers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;http.response.code&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;None&#39;</span><span class=p>])[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>		<span class=n>response_phrase</span> <span class=o>=</span> <span class=n>layers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;http.response.phrase&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;None&#39;</span><span class=p>])[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>		<span class=n>content_type</span> <span class=o>=</span> <span class=n>layers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;http.content_type&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;None&#39;</span><span class=p>])[</span><span class=mi>0</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=csv模块的使用><span>CSV模块的使用</span>
<a href=#csv%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## -*- encoding: gbk -*-</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>csv</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;xiaoshuaib.csv&#34;</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>&#34;w&#34;</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s2>&#34;gbk&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>csv_file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>fieldnames</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;你是谁&#34;</span><span class=p>,</span> <span class=s2>&#34;你几岁&#34;</span><span class=p>,</span> <span class=s2>&#34;你多高&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>writer</span> <span class=o>=</span> <span class=n>csv</span><span class=o>.</span><span class=n>DictWriter</span><span class=p>(</span><span class=n>csv_file</span><span class=p>,</span> <span class=n>fieldnames</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>writer</span><span class=o>.</span><span class=n>writeheader</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>writer</span><span class=o>.</span><span class=n>writerow</span><span class=p>({</span><span class=s2>&#34;你是谁&#34;</span><span class=p>:</span> <span class=s2>&#34;小帅b&#34;</span><span class=p>,</span> <span class=s2>&#34;你几岁&#34;</span><span class=p>:</span> <span class=s2>&#34;18岁&#34;</span><span class=p>,</span> <span class=s2>&#34;你多高&#34;</span><span class=p>:</span> <span class=s2>&#34;18cm&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=n>writer</span><span class=o>.</span><span class=n>writerow</span><span class=p>({</span><span class=s2>&#34;你是谁&#34;</span><span class=p>:</span> <span class=s2>&#34;小帅c&#34;</span><span class=p>,</span> <span class=s2>&#34;你几岁&#34;</span><span class=p>:</span> <span class=s2>&#34;19岁&#34;</span><span class=p>,</span> <span class=s2>&#34;你多高&#34;</span><span class=p>:</span> <span class=s2>&#34;17cm&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=n>writer</span><span class=o>.</span><span class=n>writerow</span><span class=p>({</span><span class=s2>&#34;你是谁&#34;</span><span class=p>:</span> <span class=s2>&#34;小帅d&#34;</span><span class=p>,</span> <span class=s2>&#34;你几岁&#34;</span><span class=p>:</span> <span class=s2>&#34;20岁&#34;</span><span class=p>,</span> <span class=s2>&#34;你多高&#34;</span><span class=p>:</span> <span class=s2>&#34;16cm&#34;</span><span class=p>})</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=比赛中使用的例子-1><span>比赛中使用的例子</span>
<a href=#%e6%af%94%e8%b5%9b%e4%b8%ad%e4%bd%bf%e7%94%a8%e7%9a%84%e4%be%8b%e5%ad%90-1 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>例1-2024浙江省赛初赛-ds-encode</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>csv</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>data_list</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=n>res_list</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 读取csv文件</span>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;data.csv&#34;</span><span class=p>,</span> <span class=s2>&#34;r&#34;</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>reader</span> <span class=o>=</span> <span class=n>csv</span><span class=o>.</span><span class=n>reader</span><span class=p>(</span><span class=n>f</span><span class=p>)</span> <span class=c1># 创建 CSV 读取器</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>reader</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>data_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>row</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>data_list</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>data_list</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>6</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>res_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>data_list</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>data_list</span><span class=p>[</span><span class=mi>1</span><span class=p>:]:</span>
</span></span><span class=line><span class=cl>    <span class=n>basedecode</span><span class=p>(</span><span class=n>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>line</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>username_solve</span><span class=p>(</span><span class=n>line</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>line</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=n>password_solve</span><span class=p>(</span><span class=n>line</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>line</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span> <span class=o>=</span> <span class=n>name_solve</span><span class=p>(</span><span class=n>line</span><span class=p>[</span><span class=mi>3</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>line</span><span class=p>[</span><span class=mi>4</span><span class=p>]</span> <span class=o>=</span> <span class=n>id_solve</span><span class=p>(</span><span class=n>line</span><span class=p>[</span><span class=mi>4</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>line</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span> <span class=o>=</span> <span class=n>phone_solve</span><span class=p>(</span><span class=n>line</span><span class=p>[</span><span class=mi>5</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>line</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>line</span><span class=p>[</span><span class=mi>6</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>res_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 保存列表到csv文件</span>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;data1.csv&#39;</span><span class=p>,</span><span class=s2>&#34;w&#34;</span><span class=p>,</span><span class=n>newline</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>,</span><span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>writer</span> <span class=o>=</span> <span class=n>csv</span><span class=o>.</span><span class=n>writer</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>writer</span><span class=o>.</span><span class=n>writerows</span><span class=p>(</span><span class=n>res_list</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=pandas模块的使用><span>pandas模块的使用</span>
<a href=#pandas%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## -*- encoding: gbk -*-</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>xiaoshuaib</span> <span class=o>=</span> <span class=n>pandas</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&#34;xiaoshuaib.csv&#34;</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s2>&#34;gbk&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>xiaoshuaib</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;xiaoshuaib&#34;</span><span class=p>,</span> <span class=s2>&#34;xiaoshuaic&#34;</span><span class=p>,</span> <span class=s2>&#34;xiaoshuaid&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;18&#34;</span><span class=p>,</span> <span class=s2>&#34;19&#34;</span><span class=p>,</span> <span class=s2>&#34;20&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;18&#34;</span><span class=p>,</span> <span class=s2>&#34;17&#34;</span><span class=p>,</span> <span class=s2>&#34;16&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span><span class=s2>&#34;你是谁&#34;</span><span class=p>:</span> <span class=n>b</span><span class=p>,</span> <span class=s2>&#34;你几岁&#34;</span><span class=p>:</span> <span class=n>c</span><span class=p>,</span> <span class=s2>&#34;你多高&#34;</span><span class=p>:</span> <span class=n>d</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>to_csv</span><span class=p>(</span><span class=s2>&#34;xsb.csv&#34;</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=s2>&#34;,&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#这个代码有点问题</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>obj</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>40</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=o>-</span><span class=mi>3</span><span class=p>,</span> <span class=mi>25</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>## print(obj)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(obj[0])</span>
</span></span><span class=line><span class=cl><span class=c1>## print(obj.index)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(obj.values)</span>
</span></span><span class=line><span class=cl><span class=n>obj1</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mi>40</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=o>-</span><span class=mi>3</span><span class=p>,</span> <span class=mi>25</span><span class=p>],</span> <span class=n>index</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>,</span> <span class=s2>&#34;c&#34;</span><span class=p>,</span> <span class=s2>&#34;d&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>## print(obj1)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(obj1[&#34;c&#34;])</span>
</span></span><span class=line><span class=cl><span class=c1>## print(obj1[obj1 &gt; 15])</span>
</span></span><span class=line><span class=cl><span class=c1>## a    40</span>
</span></span><span class=line><span class=cl><span class=c1>## d    25</span>
</span></span><span class=line><span class=cl><span class=c1>## abcd是索引，25、40是值，这里打印的是值大于15的obj中的元素</span>
</span></span><span class=line><span class=cl><span class=c1>## print(obj.describe())  ## 查看obj中的count、mean、std、min、max、25%、50%、75%</span>
</span></span><span class=line><span class=cl><span class=n>dic</span> <span class=o>=</span> <span class=n>obj</span><span class=o>.</span><span class=n>to_dict</span><span class=p>()</span>  <span class=c1>## Series可以转换为字典</span>
</span></span><span class=line><span class=cl><span class=c1>## print(dic)</span>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;one&#34;</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=mf>1.0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=mf>2.0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=mf>3.0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=n>index</span><span class=o>=</span><span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;a&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;b&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;c&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;two&#34;</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>,</span> <span class=mf>3.0</span><span class=p>,</span> <span class=mf>4.0</span><span class=p>],</span> <span class=n>index</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>,</span> <span class=s2>&#34;c&#34;</span><span class=p>,</span> <span class=s2>&#34;d&#34;</span><span class=p>]),</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>d</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>df</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 当由多个Series组成DataFrame时，Pandas会自动按照index对齐数据，如果某个Series的index缺失，则Pandas会将其自动填写为np.nan</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=numpy库模块的使用><span>numpy库模块的使用</span>
<a href=#numpy%e5%ba%93%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy.random</span> <span class=k>as</span> <span class=nn>npr</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>arr</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 创建一个一维数组</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr.dtype)</span>
</span></span><span class=line><span class=cl><span class=n>data1</span> <span class=o>=</span> <span class=p>[</span><span class=n>data</span><span class=p>,</span> <span class=n>data</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>arr1</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>data1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 创建一个二维数组</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr1)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>arr2</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>zeros</span><span class=p>((</span><span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>## 创建3x3的全0的数组</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr2)</span>
</span></span><span class=line><span class=cl><span class=n>arr3</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>ones</span><span class=p>((</span><span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr3)</span>
</span></span><span class=line><span class=cl><span class=n>arr4</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 创建1-10且差为2的等差数列</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr4)</span>
</span></span><span class=line><span class=cl><span class=n>arr5</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linspace</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 创建1~10且长度为4的等差数列</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr5)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>arr6</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=s2>&#34;量&#34;</span><span class=p>,</span> <span class=s2>&#34;话&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr6.dtype)  ## &lt;U1 是unicode数据类型</span>
</span></span><span class=line><span class=cl><span class=n>arr1_1</span> <span class=o>=</span> <span class=n>arr1</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>unicode_</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 不同的数据类型之间也能互相转换</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr1_1)</span>
</span></span><span class=line><span class=cl><span class=n>arr7</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>],</span> <span class=p>[</span><span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>]])</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr7)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr7[1])</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr7[1][1])</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr7[:2])</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr7[:2, :2])</span>
</span></span><span class=line><span class=cl><span class=n>arr7</span><span class=p>[:</span><span class=mi>2</span><span class=p>,</span> <span class=p>:</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## print(arr7)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr7 * arr7)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr7.sum())</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr7.std())</span>
</span></span><span class=line><span class=cl><span class=c1>## print(arr7.mean())</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span><span class=o>**</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## print(f(arr7))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>npr</span><span class=o>.</span><span class=n>rand</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>  <span class=c1>## npr.rand函数可以用来生成[0，1）的随机多维数组</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>npr</span><span class=o>.</span><span class=n>rand</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=o>*</span> <span class=mi>2</span> <span class=o>+</span> <span class=mi>2</span><span class=p>)</span>  <span class=c1>## 随机区间转化为[2，4）</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy.random</span> <span class=k>as</span> <span class=nn>npr</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>size</span> <span class=o>=</span> <span class=mi>1000</span>
</span></span><span class=line><span class=cl><span class=n>rn1</span> <span class=o>=</span> <span class=n>npr</span><span class=o>.</span><span class=n>rand</span><span class=p>(</span><span class=n>size</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>rn2</span> <span class=o>=</span> <span class=n>npr</span><span class=o>.</span><span class=n>randn</span><span class=p>(</span><span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>rn3</span> <span class=o>=</span> <span class=n>npr</span><span class=o>.</span><span class=n>randint</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ranq</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>30</span><span class=p>,</span> <span class=mi>40</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>rn4</span> <span class=o>=</span> <span class=n>npr</span><span class=o>.</span><span class=n>choice</span><span class=p>(</span><span class=n>ranq</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=p>,</span> <span class=p>((</span><span class=n>ax1</span><span class=p>,</span> <span class=n>ax2</span><span class=p>),</span> <span class=p>(</span><span class=n>ax3</span><span class=p>,</span> <span class=n>ax4</span><span class=p>))</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=n>nrows</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>ncols</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>ax1</span><span class=o>.</span><span class=n>hist</span><span class=p>(</span><span class=n>rn1</span><span class=p>,</span> <span class=n>bins</span><span class=o>=</span><span class=mi>25</span><span class=p>,</span> <span class=n>stacked</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax1</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>&#34;rard&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax1</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s2>&#34;frequency&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax1</span><span class=o>.</span><span class=n>grid</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax2</span><span class=o>.</span><span class=n>hist</span><span class=p>(</span><span class=n>rn2</span><span class=p>,</span> <span class=n>bins</span><span class=o>=</span><span class=mi>25</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax2</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>&#34;rardn&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax2</span><span class=o>.</span><span class=n>grid</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax3</span><span class=o>.</span><span class=n>hist</span><span class=p>(</span><span class=n>rn3</span><span class=p>,</span> <span class=n>bins</span><span class=o>=</span><span class=mi>25</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax3</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>&#34;rardint&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax3</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s2>&#34;frequency&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax3</span><span class=o>.</span><span class=n>grid</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax4</span><span class=o>.</span><span class=n>hist</span><span class=p>(</span><span class=n>rn4</span><span class=p>,</span> <span class=n>bins</span><span class=o>=</span><span class=mi>25</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax4</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>&#34;choice&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax4</span><span class=o>.</span><span class=n>grid</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#np.concatenate()的用法</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>11</span><span class=p>,</span> <span class=mi>22</span><span class=p>,</span> <span class=mi>33</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>44</span><span class=p>,</span> <span class=mi>55</span><span class=p>,</span> <span class=mi>66</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>concatenate</span><span class=p>((</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>),</span> <span class=n>axis</span><span class=o>=</span><span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>## 默认情况下，axis=0可以不写</span>
</span></span><span class=line><span class=cl><span class=c1>## 对于一维数组拼接，axis的值不影响最后的结果</span>
</span></span><span class=line><span class=cl><span class=c1>## [ 1  2  3 11 22 33 44 55 66]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>]])</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mi>11</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mi>31</span><span class=p>],</span> <span class=p>[</span><span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>]])</span>
</span></span><span class=line><span class=cl><span class=c1>## print(np.concatenate((a, b), axis=0))</span>
</span></span><span class=line><span class=cl><span class=c1>## [[ 1  2  3]</span>
</span></span><span class=line><span class=cl><span class=c1>##  [ 4  5  6]</span>
</span></span><span class=line><span class=cl><span class=c1>##  [11 21 31]</span>
</span></span><span class=line><span class=cl><span class=c1>##  [ 7  8  9]]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>concatenate</span><span class=p>((</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>),</span> <span class=n>axis</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>## axis=1表示对应行的数组进行拼接</span>
</span></span><span class=line><span class=cl><span class=c1>## [[ 1  2  3 11 21 31]</span>
</span></span><span class=line><span class=cl><span class=c1>##  [ 4  5  6  7  8  9]]</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=使用numpy处理图像><span>使用numpy处理图像</span>
<a href=#%e4%bd%bf%e7%94%a8numpy%e5%a4%84%e7%90%86%e5%9b%be%e5%83%8f class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>根据RGB值爆破宽高并还原图像</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>math</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;basic.txt&#39;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>lines</span> <span class=o>=</span> <span class=n>file</span><span class=o>.</span><span class=n>readlines</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 将每行数据转换为元组，并存储在列表中</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=p>[</span><span class=nb>eval</span><span class=p>(</span><span class=n>line</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span> <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>lines</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 将列表转换为NumPy数组，形状为 (N, 3)</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>uint8</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>data_length</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sqrt_length</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>data_length</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>sqrt_length</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>data_length</span> <span class=o>%</span> <span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>  <span class=c1># 如果长度可以整除</span>
</span></span><span class=line><span class=cl>        <span class=n>rows</span> <span class=o>=</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>        <span class=n>cols</span> <span class=o>=</span> <span class=n>data_length</span> <span class=o>//</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;尝试重塑为 </span><span class=si>{</span><span class=n>rows</span><span class=si>}</span><span class=s2> 行, </span><span class=si>{</span><span class=n>cols</span><span class=si>}</span><span class=s2> 列&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>reshaped_data</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=n>rows</span><span class=p>,</span> <span class=n>cols</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>image</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>fromarray</span><span class=p>(</span><span class=n>reshaped_data</span><span class=p>,</span> <span class=s1>&#39;RGB&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>image</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>rows</span><span class=si>}</span><span class=s2>x</span><span class=si>{</span><span class=n>cols</span><span class=si>}</span><span class=s2>.png&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;无法重塑为 </span><span class=si>{</span><span class=n>rows</span><span class=si>}</span><span class=s2> 行, </span><span class=si>{</span><span class=n>cols</span><span class=si>}</span><span class=s2> 列: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=cv2模块的使用><span>cv2模块的使用</span>
<a href=#cv2%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><h5 class=heading-element id=比赛中的使用记录-1><span>比赛中的使用记录</span>
<a href=#%e6%af%94%e8%b5%9b%e4%b8%ad%e7%9a%84%e4%bd%bf%e7%94%a8%e8%ae%b0%e5%bd%95-1 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>读取视频中每一帧第一行前225个像素的红色通道LSB数据</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>extract_flag</span><span class=p>(</span><span class=n>video_path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># 使用cv2读取视频</span>
</span></span><span class=line><span class=cl>    <span class=n>cap</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>VideoCapture</span><span class=p>(</span><span class=n>video_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># frame_width = cap.get(3)</span>
</span></span><span class=line><span class=cl>    <span class=c1># frame_height = cap.get(4)</span>
</span></span><span class=line><span class=cl>    <span class=c1># print(frame_width,frame_height)# 224,224</span>
</span></span><span class=line><span class=cl>    <span class=n>res</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>frames_cnt</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span> 
</span></span><span class=line><span class=cl>        <span class=c1># 读取视频的下一帧，并返回布尔值和当前帧的图像数据</span>
</span></span><span class=line><span class=cl>        <span class=n>ret</span><span class=p>,</span> <span class=n>frame</span> <span class=o>=</span> <span class=n>cap</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=c1># print(frame[0][0][0])</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>frames_cnt</span> <span class=o>==</span> <span class=mi>5</span><span class=p>):</span><span class=c1># 经过尝试发现flag就藏在每个视频的第 5 帧中</span>
</span></span><span class=line><span class=cl>            <span class=c1># 自动计算行数，待转换的列数为3，并取出前225个像素R通道的值</span>
</span></span><span class=line><span class=cl>            <span class=n>pixels</span> <span class=o>=</span> <span class=n>frame</span><span class=o>.</span><span class=n>reshape</span><span class=p>((</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>))[:</span><span class=mi>224</span><span class=p>][:,</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>pixels</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>pixels</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>pixels</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>pixels</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=n>res</span> <span class=o>=</span> <span class=n>decode_pixel</span><span class=p>(</span><span class=n>pixels</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=n>frames_cnt</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>res</span></span></span></code></pre></td></tr></table></div></div><p>读取视频黑白帧转二进制</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>cv2</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>libnum</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cap</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>VideoCapture</span><span class=p>(</span><span class=s1>&#39;s4cret.mov&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>frame_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>ret</span><span class=p>,</span> <span class=n>frame</span> <span class=o>=</span> <span class=n>cap</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>ret</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>
</span></span><span class=line><span class=cl>    <span class=n>pixel</span> <span class=o>=</span> <span class=n>frame</span><span class=o>.</span><span class=n>reshape</span><span class=p>((</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>))</span> <span class=c1># 将像素化为3列n行的格式</span>
</span></span><span class=line><span class=cl>    <span class=n>r</span> <span class=o>=</span> <span class=n>pixel</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=c1># 获取第一个像素r通道的数值</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>r</span> <span class=o>&gt;</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>res</span> <span class=o>+=</span> <span class=s1>&#39;0&#39;</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>res</span> <span class=o>+=</span> <span class=s1>&#39;1&#39;</span>
</span></span><span class=line><span class=cl><span class=n>cap</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># print(libnum.b2s(res))</span>
</span></span><span class=line><span class=cl><span class=n>lenth</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>res</span><span class=p>)</span> <span class=c1># 259</span>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>+=</span> <span class=p>(</span><span class=mi>8</span> <span class=o>-</span> <span class=p>(</span><span class=n>lenth</span> <span class=o>%</span> <span class=mi>8</span><span class=p>))</span> <span class=o>*</span> <span class=s1>&#39;0&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>libnum</span><span class=o>.</span><span class=n>b2s</span><span class=p>(</span><span class=n>res</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1># b&#39;the flag3 is -13891ba324da}\xff\xff\xff\xff\xff\xe0&#39;</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=urllib模块><span>urllib模块</span>
<a href=#urllib%e6%a8%a1%e5%9d%97 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>URL编码和解码</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>urllib.parse</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>encoded_text</span> <span class=o>=</span> <span class=n>urllib</span><span class=o>.</span><span class=n>parse</span><span class=o>.</span><span class=n>quote</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>decoded_str</span> <span class=o>=</span> <span class=n>urllib</span><span class=o>.</span><span class=n>parse</span><span class=o>.</span><span class=n>unquote</span><span class=p>(</span><span class=n>encoded_str</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=urllib3模块><span>urllib3模块</span>
<a href=#urllib3%e6%a8%a1%e5%9d%97 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>使用 urllib3 模块禁用 SSL 警告</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>urllib3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 禁用 SSL 警告</span>
</span></span><span class=line><span class=cl><span class=n>urllib3</span><span class=o>.</span><span class=n>disable_warnings</span><span class=p>(</span><span class=n>urllib3</span><span class=o>.</span><span class=n>exceptions</span><span class=o>.</span><span class=n>InsecureRequestWarning</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;https://example.com&#39;</span><span class=p>,</span> <span class=n>verify</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=wave模块><span>wave模块</span>
<a href=#wave%e6%a8%a1%e5%9d%97 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>TODO&mldr;</p><h4 class=heading-element id=librosa模块><span>librosa模块</span>
<a href=#librosa%e6%a8%a1%e5%9d%97 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><h5 class=heading-element id=比赛中的使用记录-2><span>比赛中的使用记录</span>
<a href=#%e6%af%94%e8%b5%9b%e4%b8%ad%e7%9a%84%e4%bd%bf%e7%94%a8%e8%ae%b0%e5%bd%95-2 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>例题1-2024极客大挑战-音乐大师</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>librosa</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>libnum</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>res</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=n>flag</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>table</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;19&#39;</span><span class=p>:</span><span class=s2>&#34;01&#34;</span><span class=p>,</span><span class=s2>&#34;9&#34;</span><span class=p>:</span><span class=s2>&#34;00&#34;</span><span class=p>,</span><span class=s2>&#34;39&#34;</span><span class=p>:</span><span class=s2>&#34;11&#34;</span><span class=p>,</span><span class=s2>&#34;29&#34;</span><span class=p>:</span><span class=s2>&#34;10&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1># 使用文件原始采样率获取音频数据和采样率</span>
</span></span><span class=line><span class=cl><span class=n>data1</span><span class=p>,</span><span class=n>sr1</span> <span class=o>=</span> <span class=n>librosa</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s2>&#34;secret.wav&#34;</span><span class=p>,</span><span class=n>sr</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span><span class=n>dtype</span><span class=o>=</span><span class=s2>&#34;float32&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>data2</span><span class=p>,</span><span class=n>sr2</span> <span class=o>=</span> <span class=n>librosa</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s2>&#34;1.wav&#34;</span><span class=p>,</span><span class=n>sr</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span><span class=n>dtype</span><span class=o>=</span><span class=s2>&#34;float32&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>148</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>res</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=nb>int</span><span class=p>((</span><span class=n>data1</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>-</span><span class=n>data2</span><span class=p>[</span><span class=n>i</span><span class=p>])</span><span class=o>*</span><span class=mf>1e7</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>res</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>flag</span> <span class=o>+=</span> <span class=n>table</span><span class=p>[</span><span class=n>item</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>libnum</span><span class=o>.</span><span class=n>b2s</span><span class=p>(</span><span class=n>flag</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1># b&#39;SYC{wav_LSB_but_You_can_get_M3_Coll!}&#39;</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=scipy模块的使用><span>scipy模块的使用</span>
<a href=#scipy%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>TODO&mldr;</p><h4 class=heading-element id=turtle模块的使用><span>turtle模块的使用</span>
<a href=#turtle%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## 画太极图</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>turtle</span> <span class=kn>import</span> <span class=o>*</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>rset</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>pensize</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>  <span class=c1>## 设置画笔大小为1px</span>
</span></span><span class=line><span class=cl>    <span class=n>pencolor</span><span class=p>(</span><span class=s1>&#39;black&#39;</span><span class=p>)</span>  <span class=c1>## 设置画笔颜色为黑色</span>
</span></span><span class=line><span class=cl>    <span class=n>penup</span><span class=p>()</span>  <span class=c1>## 提起画笔</span>
</span></span><span class=line><span class=cl>    <span class=n>home</span><span class=p>()</span>  <span class=c1>## 将画笔移动到屏幕中心</span>
</span></span><span class=line><span class=cl>    <span class=n>pendown</span><span class=p>()</span>  <span class=c1>## 放下画笔</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>offset</span><span class=p>(</span><span class=n>off_set</span><span class=p>,</span> <span class=n>angle</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s1>&#39;taiji&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 设置画笔偏移量。该函数用于设置画笔开始绘图的位置。</span>
</span></span><span class=line><span class=cl>    <span class=c1>## off_set太极时为大圆半径，八卦时要大于半径，否则会与太极重合。</span>
</span></span><span class=line><span class=cl>    <span class=c1>## angle：当画八卦时用于旋转特定角度。</span>
</span></span><span class=line><span class=cl>    <span class=n>penup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>home</span><span class=p>()</span>  <span class=c1>## 回到原点，朝向东</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>mode</span> <span class=o>==</span> <span class=s1>&#39;taiji&#39;</span><span class=p>:</span>  <span class=c1>## 太极模式</span>
</span></span><span class=line><span class=cl>        <span class=n>right</span><span class=p>(</span><span class=mi>90</span><span class=p>)</span>  <span class=c1>## 向右旋转90度，使画笔指向南方。</span>
</span></span><span class=line><span class=cl>        <span class=n>fd</span><span class=p>(</span><span class=n>off_set</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>seth</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>  <span class=c1>## 朝向东</span>
</span></span><span class=line><span class=cl>    <span class=n>pendown</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 绘制太极函数</span>
</span></span><span class=line><span class=cl><span class=c1>## radius：太极的大圆半径。</span>
</span></span><span class=line><span class=cl><span class=c1>## pen_size：画笔大小，默认为2像素。</span>
</span></span><span class=line><span class=cl><span class=c1>## color：画笔颜色，默认为黑色。</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>taiji</span><span class=p>(</span><span class=n>radius</span><span class=p>,</span> <span class=n>pen_size</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;black&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>rset</span><span class=p>()</span>  <span class=c1>## 初始化画笔</span>
</span></span><span class=line><span class=cl>    <span class=n>pensize</span><span class=p>(</span><span class=n>pen_size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>pencolor</span><span class=p>(</span><span class=n>color</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>offset</span><span class=p>(</span><span class=n>radius</span><span class=p>)</span>  <span class=c1>## 画笔偏移至起始点</span>
</span></span><span class=line><span class=cl>    <span class=n>fillcolor</span><span class=p>(</span><span class=s1>&#39;black&#39;</span><span class=p>)</span>  <span class=c1>## 填充颜色</span>
</span></span><span class=line><span class=cl>    <span class=n>begin_fill</span><span class=p>()</span>  <span class=c1>## 开始填充</span>
</span></span><span class=line><span class=cl>    <span class=n>circle</span><span class=p>(</span><span class=n>radius</span><span class=p>,</span> <span class=mi>180</span><span class=p>)</span>  <span class=c1>## 画大圆的半圆</span>
</span></span><span class=line><span class=cl>    <span class=n>circle</span><span class=p>(</span><span class=n>radius</span> <span class=o>/</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>180</span><span class=p>)</span>  <span class=c1>## 画s型</span>
</span></span><span class=line><span class=cl>    <span class=n>circle</span><span class=p>(</span><span class=o>-</span><span class=n>radius</span> <span class=o>/</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>180</span><span class=p>)</span>  <span class=c1>## 反向画s型</span>
</span></span><span class=line><span class=cl>    <span class=n>end_fill</span><span class=p>()</span>  <span class=c1>## 结束填充</span>
</span></span><span class=line><span class=cl>    <span class=n>circle</span><span class=p>(</span><span class=o>-</span><span class=n>radius</span><span class=p>,</span> <span class=mi>180</span><span class=p>)</span>  <span class=c1>## 画大圆的另一半圆，且不用填充</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 上面小圆</span>
</span></span><span class=line><span class=cl>    <span class=n>begin_fill</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>fillcolor</span><span class=p>(</span><span class=s1>&#39;white&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>penup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>home</span><span class=p>()</span>  <span class=c1>## 返回原点，默认朝东</span>
</span></span><span class=line><span class=cl>    <span class=n>left</span><span class=p>(</span><span class=mi>90</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>fd</span><span class=p>(</span><span class=n>radius</span> <span class=o>*</span> <span class=mf>0.7</span><span class=p>)</span>  <span class=c1>## 初始化小圆画笔起始点</span>
</span></span><span class=line><span class=cl>    <span class=n>right</span><span class=p>(</span><span class=mi>90</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>pendown</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>circle</span><span class=p>(</span><span class=o>-</span><span class=n>radius</span> <span class=o>*</span> <span class=mf>0.2</span><span class=p>)</span>  <span class=c1>## 画小圆</span>
</span></span><span class=line><span class=cl>    <span class=n>end_fill</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>rset</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>penup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 下面的小圆</span>
</span></span><span class=line><span class=cl>    <span class=n>begin_fill</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>fillcolor</span><span class=p>(</span><span class=s1>&#39;black&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>right</span><span class=p>(</span><span class=mi>90</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>fd</span><span class=p>(</span><span class=n>radius</span> <span class=o>*</span> <span class=mf>0.7</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>left</span><span class=p>(</span><span class=mi>90</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>pendown</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>circle</span><span class=p>(</span><span class=n>radius</span> <span class=o>*</span> <span class=mf>0.2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>end_fill</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>taiji</span><span class=p>(</span><span class=mi>200</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>done</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## 画奥运五环</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>turtle</span> <span class=kn>import</span> <span class=o>*</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>draw_ring</span><span class=p>(</span><span class=n>radius</span><span class=p>,</span> <span class=n>ring_color</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>pensize</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>          <span class=c1>## 设置线宽，使五环更显眼</span>
</span></span><span class=line><span class=cl>    <span class=n>pendown</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>pencolor</span><span class=p>(</span><span class=n>ring_color</span><span class=p>)</span>  <span class=c1>## 设置画笔颜色</span>
</span></span><span class=line><span class=cl>    <span class=n>circle</span><span class=p>(</span><span class=n>radius</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>penup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>draw_olympic_rings</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>speed</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>penup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>## 修改环的颜色</span>
</span></span><span class=line><span class=cl>    <span class=n>colors</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;blue&#34;</span><span class=p>,</span> <span class=s2>&#34;black&#34;</span><span class=p>,</span> <span class=s2>&#34;red&#34;</span><span class=p>,</span> <span class=s2>&#34;yellow&#34;</span><span class=p>,</span> <span class=s2>&#34;green&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 上面三个环的间距是2*70，下面两个环相对于上面的环稍微向右移动了35</span>
</span></span><span class=line><span class=cl>    <span class=n>positions</span> <span class=o>=</span> <span class=p>[(</span><span class=o>-</span><span class=mi>3</span><span class=o>*</span><span class=mi>35</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=o>*</span><span class=mi>35</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=p>(</span><span class=mi>1</span><span class=o>*</span><span class=mi>35</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                 <span class=p>(</span><span class=o>-</span><span class=mi>2</span><span class=o>*</span><span class=mi>35</span><span class=p>,</span> <span class=o>-</span><span class=mi>60</span><span class=p>),</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=o>-</span><span class=mi>60</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>goto</span><span class=p>(</span><span class=n>positions</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>  <span class=c1>## 使用预设的位置</span>
</span></span><span class=line><span class=cl>        <span class=n>draw_ring</span><span class=p>(</span><span class=mi>50</span><span class=p>,</span> <span class=n>colors</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>draw_olympic_rings</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>done</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=struct模块的使用><span>struct模块的使用</span>
<a href=#struct%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>struct</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>display_binary</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>#将字节数据转化为十六进制表示形式</span>
</span></span><span class=line><span class=cl>    <span class=c1>## return &#39; &#39;.join([&#39;{:02x}&#39;.format(byte) for byte in data])</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39; &#39;</span><span class=o>.</span><span class=n>join</span><span class=p>([</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>byte</span><span class=si>:</span><span class=s2>02x</span><span class=si>}</span><span class=s2>&#34;</span> <span class=k>for</span> <span class=n>byte</span> <span class=ow>in</span> <span class=n>data</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 定义要打包的数据</span>
</span></span><span class=line><span class=cl><span class=n>int_data</span> <span class=o>=</span> <span class=mi>10240099</span>
</span></span><span class=line><span class=cl><span class=n>float_data</span> <span class=o>=</span> <span class=mf>123.456</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 使用默认端序（小端序）打包</span>
</span></span><span class=line><span class=cl><span class=n>packed_int_little</span> <span class=o>=</span> <span class=n>struct</span><span class=o>.</span><span class=n>pack</span><span class=p>(</span><span class=s1>&#39;I&#39;</span><span class=p>,</span> <span class=n>int_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>packed_float_little</span> <span class=o>=</span> <span class=n>struct</span><span class=o>.</span><span class=n>pack</span><span class=p>(</span><span class=s1>&#39;f&#39;</span><span class=p>,</span> <span class=n>float_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 使用大端序打包</span>
</span></span><span class=line><span class=cl><span class=n>packed_int_big</span> <span class=o>=</span> <span class=n>struct</span><span class=o>.</span><span class=n>pack</span><span class=p>(</span><span class=s1>&#39;&gt;I&#39;</span><span class=p>,</span> <span class=n>int_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>packed_float_big</span> <span class=o>=</span> <span class=n>struct</span><span class=o>.</span><span class=n>pack</span><span class=p>(</span><span class=s1>&#39;&gt;f&#39;</span><span class=p>,</span> <span class=n>float_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 打印打包的结果,display_binary()是以十六进制的形式显示</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Packed data (Little Endian):&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>packed_int_little</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Int:&#34;</span><span class=p>,</span> <span class=n>display_binary</span><span class=p>(</span><span class=n>packed_int_little</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>packed_float_little</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Float:&#34;</span><span class=p>,</span> <span class=n>display_binary</span><span class=p>(</span><span class=n>packed_float_little</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>Packed data (Big Endian):&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>packed_int_big</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Int:&#34;</span><span class=p>,</span> <span class=n>display_binary</span><span class=p>(</span><span class=n>packed_int_big</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>packed_float_big</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Float:&#34;</span><span class=p>,</span> <span class=n>display_binary</span><span class=p>(</span><span class=n>packed_float_big</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 解包数据,由于返回的是一个元组，所以需要[0]</span>
</span></span><span class=line><span class=cl><span class=n>unpacked_int_little</span> <span class=o>=</span> <span class=n>struct</span><span class=o>.</span><span class=n>unpack</span><span class=p>(</span><span class=s1>&#39;I&#39;</span><span class=p>,</span> <span class=n>packed_int_little</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>unpacked_float_little</span> <span class=o>=</span> <span class=n>struct</span><span class=o>.</span><span class=n>unpack</span><span class=p>(</span><span class=s1>&#39;f&#39;</span><span class=p>,</span> <span class=n>packed_float_little</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>unpacked_int_big</span> <span class=o>=</span> <span class=n>struct</span><span class=o>.</span><span class=n>unpack</span><span class=p>(</span><span class=s1>&#39;&gt;I&#39;</span><span class=p>,</span> <span class=n>packed_int_big</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>unpacked_float_big</span> <span class=o>=</span> <span class=n>struct</span><span class=o>.</span><span class=n>unpack</span><span class=p>(</span><span class=s1>&#39;&gt;f&#39;</span><span class=p>,</span> <span class=n>packed_float_big</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 打印解包的结果</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>Unpacked data (Little Endian):&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Int:&#34;</span><span class=p>,</span> <span class=n>unpacked_int_little</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Float:&#34;</span><span class=p>,</span> <span class=n>unpacked_float_little</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>Unpacked data (Big Endian):&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Int:&#34;</span><span class=p>,</span> <span class=n>unpacked_int_big</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Float:&#34;</span><span class=p>,</span> <span class=n>unpacked_float_big</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 验证打包和解包是否保持数据的完整性(float类型的数据先打包再解包后可能会有误差)</span>
</span></span><span class=line><span class=cl><span class=k>assert</span> <span class=n>int_data</span> <span class=o>==</span> <span class=n>unpacked_int_little</span>
</span></span><span class=line><span class=cl><span class=c1>## assert float_data == unpacked_float_little</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>assert</span> <span class=n>int_data</span> <span class=o>==</span> <span class=n>unpacked_int_big</span>
</span></span><span class=line><span class=cl><span class=c1>## assert float_data == unpacked_float_big</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>Data integrity maintained!&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=time模块的使用><span>time模块的使用</span>
<a href=#time%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## -*- encoding: utf-8 -*-</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>@File    :   time.py
</span></span></span><span class=line><span class=cl><span class=s1>@Time    :   2022/11/14 17:55:10
</span></span></span><span class=line><span class=cl><span class=s1>@Author  :   Lunatic 
</span></span></span><span class=line><span class=cl><span class=s1>@Version :   1.0
</span></span></span><span class=line><span class=cl><span class=s1>@Contact :   goodlunatic0@gmail.com
</span></span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=c1>## 通常来说，时间戳表示的是从1970年1月1日00:00:00开始按秒计算的偏移量。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=c1>## 返回当前时间的时间戳,是一个浮点数</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>localtime</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=c1>## 将一个时间戳转换为当前时区的struct_time。secs参数未提供，则以当前时间为准</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>gmtime</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=c1>## gmtime()方法是将一个时间戳转换为UTC时区（0时区）的struct_time</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>mktime</span><span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>localtime</span><span class=p>()))</span>
</span></span><span class=line><span class=cl><span class=c1>#time.mktime()接收struct_time对象转化用秒数来表示时间的浮点数</span>
</span></span><span class=line><span class=cl><span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 线程推迟指定的时间运行。单位为秒</span>
</span></span><span class=line><span class=cl><span class=c1>## time.clock()</span>
</span></span><span class=line><span class=cl><span class=c1>## time.clock()在不同的系统上含义不同。在UNIX系统上，它返回的是“进程时间”，它是用秒表示的浮点数（时间戳）。而在WINDOWS中，第一次调用，返回的是进程运行的实际时间。而第二次之后的调用是自第一次调用以后到现在的运行时间。（实际上是以WIN32上QueryPerformanceCounter()为基础，它比毫秒表示更为精确）</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>asctime</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=c1>#把一个表示时间的元组或者struct_time表示为这种形式：&#39;Sun Jun 20 23:21:05 1993&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>ctime</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=c1>## 把一个时间戳（按秒计算的浮点数）转化为time.asctime()的形式</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## time.strptime(string[, format])：把一个格式化时间字符串转化为struct_time。实际上它和strftime()是逆操作</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>strptime</span><span class=p>(</span><span class=s1>&#39;2011-05-05 16:37:06&#39;</span><span class=p>,</span> <span class=s1>&#39;%Y-%m-</span><span class=si>%d</span><span class=s1> </span><span class=si>%X</span><span class=s1>&#39;</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=datetime模块的使用><span>datetime模块的使用</span>
<a href=#datetime%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>datetime</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>today_date</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>today</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1>## 今天的日期</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>today_date</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=p>(</span><span class=mi>2012</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>start_time</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=p>(</span><span class=mi>2012</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>start_time</span> <span class=o>+</span> <span class=n>datetime</span><span class=o>.</span><span class=n>timedelta</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>## datetime.timedelta()常用于日期的加减</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>start_time</span> <span class=o>+</span> <span class=n>datetime</span><span class=o>.</span><span class=n>timedelta</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>start_time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&#34;%Y-%m-</span><span class=si>%d</span><span class=s2>&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>## .strftime()用于日期格式的转换</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>start_time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&#34;%Y%m</span><span class=si>%d</span><span class=s2>&#34;</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=urllib模块使用><span>Urllib模块使用</span>
<a href=#urllib%e6%a8%a1%e5%9d%97%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>urllib</span> <span class=kn>import</span> <span class=n>request</span><span class=p>,</span> <span class=n>parse</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>ssl</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 使用ssl未经验证的上下文</span>
</span></span><span class=line><span class=cl><span class=n>context</span> <span class=o>=</span> <span class=n>ssl</span><span class=o>.</span><span class=n>_create_unverified_context</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;https://biihu.cc//account/ajax/login_process/&#39;</span>
</span></span><span class=line><span class=cl><span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 假装自己是浏览器</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;User-Agent&#39;</span><span class=p>:</span> <span class=s1>&#39;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 &#39;</span>
</span></span><span class=line><span class=cl>                  <span class=s1>&#39;Safari/537.36&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nb>dict</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 定义请求参数</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;return_url&#39;</span><span class=p>:</span> <span class=s1>&#39;https://biihu.cc/&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;user_name&#39;</span><span class=p>:</span> <span class=s1>&#39;xiaoshuaib@gmail.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;password&#39;</span><span class=p>:</span> <span class=s1>&#39;123456789&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;_post_type&#39;</span><span class=p>:</span> <span class=s1>&#39;ajax&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>## 把请求参数转化为byte</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=nb>bytes</span><span class=p>(</span><span class=n>parse</span><span class=o>.</span><span class=n>urlencode</span><span class=p>(</span><span class=nb>dict</span><span class=p>),</span> <span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## response = urllib.request.urlopen(&#39;http://www.baidu.com&#39;)</span>
</span></span><span class=line><span class=cl><span class=c1>## 封装request</span>
</span></span><span class=line><span class=cl><span class=n>req</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>Request</span><span class=p>(</span><span class=n>url</span><span class=p>,</span><span class=n>data</span><span class=o>=</span><span class=n>data</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>,</span><span class=n>method</span><span class=o>=</span><span class=s1>&#39;POST&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#最后进行请求</span>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span><span class=n>req</span><span class=p>,</span><span class=n>context</span><span class=o>=</span><span class=n>context</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>read</span><span class=p>()</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;urllib.request.urlopen(url, data=None, [timeout, ]*)
</span></span></span><span class=line><span class=cl><span class=s2>data是给post请求携带参数的，timeout是设置请求超时时间&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>## print(response.read().decode(&#39;utf-8&#39;))</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;urllib.request.Request(url, data=None, headers=</span><span class=si>{}</span><span class=s2>, method=None)
</span></span></span><span class=line><span class=cl><span class=s2>## urlopen 默认是 Get 请求，当我们传入参数它就为 Post 请求了
</span></span></span><span class=line><span class=cl><span class=s2>## 而 Request 可以让我们自己定义请求的方式&#34;&#34;&#34;</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=requests模块的使用><span>requests模块的使用</span>
<a href=#requests%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><h5 class=heading-element id=使用python脚本发送http请求><span>使用python脚本发送HTTP请求</span>
<a href=#%e4%bd%bf%e7%94%a8python%e8%84%9a%e6%9c%ac%e5%8f%91%e9%80%81http%e8%af%b7%e6%b1%82 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p><strong>requests支持的请求协议有GET POST PUT&mldr;</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#GET请求带参数使用params，POST请求带参数使用data</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>rep</span><span class=o>=</span><span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;http://111.200.241.244:62607&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>rep</span><span class=o>=</span><span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=s2>&#34;http://111.200.241.244:62607&#34;</span><span class=p>,</span><span class=n>params</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;a&#34;</span><span class=p>:</span><span class=s2>&#34;1&#34;</span><span class=p>},</span><span class=n>data</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;b&#34;</span><span class=p>:</span><span class=s2>&#34;2&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=c1>#获得响应包中的数据</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>rep</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#以byte类型返回响应包中的数据</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>rep</span><span class=o>.</span><span class=n>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#将byte类型的数据转换为字符串</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>rep</span><span class=o>.</span><span class=n>content</span><span class=o>.</span><span class=n>decode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#获取HTTP状态码</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>rep</span><span class=o>.</span><span class=n>status_code</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#获取请求头和响应头</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>rep</span><span class=o>.</span><span class=n>headers</span><span class=p>)</span><span class=c1>#获取请求头</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>rep</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>headers</span><span class=p>)</span><span class=c1>#获取响应头</span>
</span></span><span class=line><span class=cl><span class=c1>#获取请求url</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#获取Cookie</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>cookies</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#没有参数传递的GET请求</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;https://www.baidu.com&#34;</span>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>status_code</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#有参数传递的GET请求</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;http://127.0.0.1/index.php&#34;</span>
</span></span><span class=line><span class=cl><span class=n>payload</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;username&#39;</span><span class=p>:</span><span class=s1>&#39;admin&#39;</span><span class=p>,</span><span class=s1>&#39;password&#39;</span><span class=p>:</span><span class=s1>&#39;admin&#39;</span><span class=p>,</span><span class=s1>&#39;submit&#39;</span><span class=p>:</span><span class=s1>&#39;登录&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span><span class=n>params</span><span class=o>=</span><span class=n>payload</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>r</span><span class=o>.</span><span class=n>content</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>str</span><span class=p>(</span><span class=n>result</span><span class=p>)</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;succ&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>#在返回报文中找到succ字符时：</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;admin:admin&#34;</span><span class=o>+</span><span class=s1>&#39;successful&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#但是实际情况下，一般都是通过读取字典文件来获取用户名和密码</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=c1>#有参数传递的POST请求</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;http://127.0.0.1/index.php&#34;</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;username&#39;</span><span class=p>:</span><span class=s1>&#39;admin&#39;</span><span class=p>,</span> <span class=s1>&#39;password&#39;</span><span class=p>:</span><span class=s1>&#39;admin&#39;</span><span class=p>,</span> <span class=s1>&#39;submit&#39;</span><span class=p>:</span><span class=s1>&#39;登录&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>status_code</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>r</span><span class=o>.</span><span class=n>text</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;succ&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;admin:admin&#39;</span> <span class=o>+</span> <span class=s1>&#39;successful&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=c1>#自定义请求头</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;http://127.0.0.1/index.php&#34;</span>
</span></span><span class=line><span class=cl><span class=n>headers</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;User-Agent&#34;</span><span class=p>:</span><span class=s2>&#34;HAHA&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>r1</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>r1</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>request</span><span class=o>.</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#HTTP代理和BP截断</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;https://www.baidu.com&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>#kali的ip:192.168.1.101</span>
</span></span><span class=line><span class=cl><span class=n>proxies</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;http&#39;</span><span class=p>:</span><span class=s1>&#39;http://192.168.100.9:8080&#39;</span><span class=p>,</span> <span class=s1>&#39;https&#39;</span><span class=p>:</span><span class=s1>&#39;https://192.168.100.9:8080&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>proxies</span><span class=o>=</span><span class=n>proxies</span><span class=p>,</span> <span class=n>verify</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#verify=False不进行证书合法性的验证</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>status_code</span><span class=p>)</span>  
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=c1>#Python IIS PUT漏洞探测工具</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;http://192.168.0.107&#34;</span>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>options</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(r.headers)       </span>
</span></span><span class=line><span class=cl><span class=c1>## print(r.headers[&#34;Allow&#34;])</span>
</span></span><span class=line><span class=cl><span class=c1>## print(r.headers[&#34;Public&#34;])</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>r</span><span class=o>.</span><span class=n>headers</span><span class=p>[</span><span class=s1>&#39;Public&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=c1>## print(type(result))</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>result</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;PUT&#34;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>result</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;MOVE&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;exist IIS put vul&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;not exist&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=c1>#获取HTTP服务器信息</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;http://192.168.0.107&#34;</span>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;服务器中间件为：&#34;</span><span class=o>+</span><span class=n>r</span><span class=o>.</span><span class=n>headers</span><span class=p>[</span><span class=s1>&#39;Server&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;服务器脚本语言为：&#34;</span><span class=o>+</span><span class=n>r</span><span class=o>.</span><span class=n>headers</span><span class=p>[</span><span class=s1>&#39;X-Powered-By&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=c1>#Python漏洞检测工具</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;http://192.168.0.107&#34;</span>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(r.headers)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(r.headers[&#39;Server&#39;])</span>
</span></span><span class=line><span class=cl><span class=n>remote_server</span> <span class=o>=</span> <span class=n>r</span><span class=o>.</span><span class=n>headers</span><span class=p>[</span><span class=s1>&#39;Server&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>remote_server</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>remote_server</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>remote_server</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;IIS/7.5&#34;</span><span class=p>)</span> <span class=ow>or</span> <span class=n>remote_server</span><span class=p>(</span><span class=s2>&#34;IIS/8.0&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>payload</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=n>r1</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>r1</span><span class=o>.</span><span class=n>requests</span><span class=o>.</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>r1</span><span class=o>.</span><span class=n>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>str</span><span class=p>(</span><span class=n>r1</span><span class=o>.</span><span class=n>content</span><span class=p>)</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&#34;Requested Range Not Satisfiable&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>url</span><span class=o>+</span><span class=s2>&#34;exist vuln ms15-034&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>url</span><span class=o>+</span><span class=s2>&#34;not exist vuln ms15-034&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>#开始探测</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Server not a iis 7.5 or iis 8.0&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=使用session发送请求><span>使用session发送请求</span>
<a href=#%e4%bd%bf%e7%94%a8session%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>fake_useragent</span> <span class=kn>import</span> <span class=n>UserAgent</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>session</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>session</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>ua</span> <span class=o>=</span> <span class=n>UserAgent</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 使用随机的UA头</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;user-agent&#39;</span><span class=p>:</span> <span class=n>ua</span><span class=o>.</span><span class=n>random</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;http://www.baidu.com&#34;</span>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=关闭ssl警告><span>关闭SSL警告</span>
<a href=#%e5%85%b3%e9%97%adssl%e8%ad%a6%e5%91%8a class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>方法一：使用 verify=False 关闭 SSL 验证</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;https://example.com&#39;</span><span class=p>,</span> <span class=n>verify</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>方法二：使用urllib3模块禁用 SSL 警告</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>urllib3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 禁用 SSL 警告</span>
</span></span><span class=line><span class=cl><span class=n>urllib3</span><span class=o>.</span><span class=n>disable_warnings</span><span class=p>(</span><span class=n>urllib3</span><span class=o>.</span><span class=n>exceptions</span><span class=o>.</span><span class=n>InsecureRequestWarning</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;https://example.com&#39;</span><span class=p>,</span> <span class=n>verify</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=requests-html模块的使用><span>requests-html模块的使用</span>
<a href=#requests-html%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p><strong>基本用法</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>requests_html</span> <span class=kn>import</span> <span class=n>HTMLSession</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>fake_useragent</span> <span class=kn>import</span> <span class=n>UserAgent</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>random_UA</span> <span class=o>=</span> <span class=n>UserAgent</span><span class=p>()</span><span class=o>.</span><span class=n>random</span>
</span></span><span class=line><span class=cl><span class=c1>## print(random_UA)</span>
</span></span><span class=line><span class=cl><span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;user-agent&#39;</span><span class=p>:</span> <span class=n>random_UA</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span> <span class=o>=</span> <span class=s1>&#39;127.0.0.1:7890&#39;</span>
</span></span><span class=line><span class=cl><span class=n>port</span> <span class=o>=</span> <span class=n>proxy</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span> <span class=o>=</span> <span class=n>proxy</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=c1>## print(proxy,port)</span>
</span></span><span class=line><span class=cl><span class=n>proxies</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;http&#34;</span><span class=p>:</span><span class=sa>f</span><span class=s2>&#34;http://</span><span class=si>{</span><span class=n>proxy</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;https&#34;</span><span class=p>:</span><span class=sa>f</span><span class=s2>&#34;http://</span><span class=si>{</span><span class=n>proxy</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;https://www.baidu.com&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 获取实例化session对象</span>
</span></span><span class=line><span class=cl>    <span class=n>session</span> <span class=o>=</span> <span class=n>HTMLSession</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>responese</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>,</span><span class=n>proxies</span><span class=o>=</span><span class=n>proxies</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>responese</span><span class=o>.</span><span class=n>status_code</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 获取html页面</span>
</span></span><span class=line><span class=cl>    <span class=c1>## html = responese.content.decode()</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 使用requests_html中的方法</span>
</span></span><span class=line><span class=cl>    <span class=n>html</span> <span class=o>=</span> <span class=n>responese</span><span class=o>.</span><span class=n>html</span><span class=o>.</span><span class=n>html</span>
</span></span><span class=line><span class=cl>    <span class=c1>## print(responese.text)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## print(html[:15])</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 获取相对链接</span>
</span></span><span class=line><span class=cl>    <span class=c1>## print(responese.html.links)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 获取拼接URL后的绝对链接</span>
</span></span><span class=line><span class=cl>    <span class=c1>## print(responese.html.absolute_links)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 使用xpath选择器</span>
</span></span><span class=line><span class=cl>    <span class=c1>## print(responese.html.xpath(&#39;//li[@class=&#34;hotsearch-item odd&#34;]/a&#39;))</span>
</span></span><span class=line><span class=cl>    <span class=c1>## print(responese.html.xpath(&#39;//li[@class=&#34;hotsearch-item odd&#34;]/a&#39;, first=True).text)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 使用CSS选择器(find方法)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>responese</span><span class=o>.</span><span class=n>html</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;a.mnav&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>responese</span><span class=o>.</span><span class=n>html</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;a.mnav&#39;</span><span class=p>,</span> <span class=n>first</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=o>.</span><span class=n>text</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=例子><span>例子</span>
<a href=#%e4%be%8b%e5%ad%90 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p><strong>爬取简书用户的文章</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>requests_html</span> <span class=kn>import</span> <span class=n>HTMLSession</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>fake_useragent</span> <span class=kn>import</span> <span class=n>UserAgent</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>random_UA</span> <span class=o>=</span> <span class=n>UserAgent</span><span class=p>()</span><span class=o>.</span><span class=n>random</span>
</span></span><span class=line><span class=cl><span class=c1>## print(random_UA)</span>
</span></span><span class=line><span class=cl><span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;user-agent&#39;</span><span class=p>:</span> <span class=n>random_UA</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span> <span class=o>=</span> <span class=s1>&#39;127.0.0.1:7890&#39;</span>
</span></span><span class=line><span class=cl><span class=n>port</span> <span class=o>=</span> <span class=n>proxy</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span> <span class=o>=</span> <span class=n>proxy</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=c1>## print(proxy,port)</span>
</span></span><span class=line><span class=cl><span class=n>proxies</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;http&#34;</span><span class=p>:</span><span class=sa>f</span><span class=s2>&#34;http://</span><span class=si>{</span><span class=n>proxy</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;https&#34;</span><span class=p>:</span><span class=sa>f</span><span class=s2>&#34;http://</span><span class=si>{</span><span class=n>proxy</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;https://www.jianshu.com/u/7753478e1554&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 获取实例化session对象</span>
</span></span><span class=line><span class=cl>    <span class=n>session</span> <span class=o>=</span> <span class=n>HTMLSession</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>responese</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span><span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>,</span><span class=n>proxies</span><span class=o>=</span><span class=n>proxies</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>responese</span><span class=o>.</span><span class=n>html</span><span class=o>.</span><span class=n>render</span><span class=p>(</span><span class=n>scrolldown</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span><span class=n>sleep</span><span class=o>=</span><span class=mf>.2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>titles</span> <span class=o>=</span> <span class=n>responese</span><span class=o>.</span><span class=n>html</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s1>&#39;a.title&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=p>,</span><span class=n>title</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>titles</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[+]</span><span class=si>{</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=si>}</span><span class=s2>[</span><span class=si>{</span><span class=n>title</span><span class=o>.</span><span class=n>text</span><span class=si>}</span><span class=s2>](https://www.jianshu.com/u/7753478e1554</span><span class=si>{</span><span class=n>title</span><span class=o>.</span><span class=n>attrs</span><span class=p>[</span><span class=s1>&#39;href&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=optparse模块的使用><span>optparse模块的使用</span>
<a href=#optparse%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#optparse模块的使用</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>email</span> <span class=kn>import</span> <span class=n>parser</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>email.parser</span> <span class=kn>import</span> <span class=n>Parser</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>optparse</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=n>parser</span> <span class=o>=</span> <span class=n>optparse</span><span class=o>.</span><span class=n>OptionParser</span><span class=p>()</span><span class=c1>#初始化</span>
</span></span><span class=line><span class=cl><span class=n>parser</span><span class=o>.</span><span class=n>usage</span> <span class=o>=</span> <span class=s2>&#34;command_args.py -u user_file&#34;</span>
</span></span><span class=line><span class=cl><span class=n>parser</span><span class=o>.</span><span class=n>add_option</span><span class=p>(</span><span class=s2>&#34;-u&#34;</span><span class=p>,</span> <span class=s2>&#34;--user_file&#34;</span><span class=p>,</span> <span class=n>help</span><span class=o>=</span><span class=s2>&#34;read username from file&#34;</span><span class=p>,</span> <span class=n>action</span><span class=o>=</span><span class=s2>&#34;store&#34;</span><span class=p>,</span> <span class=nb>type</span><span class=o>=</span><span class=s2>&#34;string&#34;</span><span class=p>,</span> <span class=n>metavar</span><span class=o>=</span><span class=s2>&#34;FILE&#34;</span><span class=p>,</span> <span class=n>dest</span><span class=o>=</span><span class=s2>&#34;username_file&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=n>option</span><span class=p>,</span> <span class=n>args</span><span class=p>)</span><span class=o>=</span><span class=n>parser</span><span class=o>.</span><span class=n>parse_args</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>options</span><span class=o>.</span><span class=n>username_file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#Web密码破解命令行读取模板编写（username password url threads）</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>email</span> <span class=kn>import</span> <span class=n>parser</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>email.parser</span> <span class=kn>import</span> <span class=n>Parser</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>yaml</span> <span class=kn>import</span> <span class=n>parse</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>optparse</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>parser</span> <span class=o>=</span> <span class=n>optparse</span><span class=o>.</span><span class=n>OptionParser</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>parser</span><span class=o>.</span><span class=n>usage</span> <span class=o>=</span> <span class=s2>&#34;web_brute_command.py -s url -u user_file -p -pass_file -t num&#34;</span>
</span></span><span class=line><span class=cl><span class=n>parser</span><span class=o>.</span><span class=n>add_option</span><span class=p>(</span><span class=s2>&#34;-s&#34;</span><span class=p>,</span> <span class=s2>&#34;--site&#34;</span><span class=p>,</span> <span class=n>dest</span><span class=o>=</span><span class=s2>&#34;website&#34;</span><span class=p>,</span> <span class=n>help</span><span class=o>=</span><span class=s2>&#34;website to test&#34;</span><span class=p>,</span> <span class=n>action</span><span class=o>=</span><span class=s2>&#34;store&#34;</span><span class=p>,</span> <span class=nb>type</span><span class=o>=</span><span class=s2>&#34;string&#34;</span><span class=p>,</span> <span class=n>metavar</span><span class=o>=</span><span class=s2>&#34;URL&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>parser</span><span class=o>.</span><span class=n>add_option</span><span class=p>(</span><span class=s2>&#34;-u&#34;</span><span class=p>,</span> <span class=s2>&#34;--userfile&#34;</span><span class=p>,</span> <span class=n>dest</span><span class=o>=</span><span class=s2>&#34;userfile&#34;</span><span class=p>,</span> <span class=n>help</span><span class=o>=</span><span class=s2>&#34;username from file&#34;</span><span class=p>,</span> <span class=n>action</span><span class=o>=</span><span class=s2>&#34;store&#34;</span><span class=p>,</span> <span class=nb>type</span><span class=o>=</span><span class=s2>&#34;string&#34;</span><span class=p>,</span> <span class=n>metavar</span><span class=o>=</span><span class=s2>&#34;USERFILE&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>parser</span><span class=o>.</span><span class=n>add_option</span><span class=p>(</span><span class=s2>&#34;-p&#34;</span><span class=p>,</span> <span class=s2>&#34;--passfile&#34;</span><span class=p>,</span> <span class=n>dest</span><span class=o>=</span><span class=s2>&#34;passfile&#34;</span><span class=p>,</span> <span class=n>help</span><span class=o>=</span><span class=s2>&#34;password from file&#34;</span><span class=p>,</span> <span class=n>action</span><span class=o>=</span><span class=s2>&#34;store&#34;</span><span class=p>,</span> <span class=nb>type</span><span class=o>=</span><span class=s2>&#34;string&#34;</span><span class=p>,</span> <span class=n>metavar</span><span class=o>=</span><span class=s2>&#34;PASSFILE&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>parser</span><span class=o>.</span><span class=n>add_option</span><span class=p>(</span><span class=s2>&#34;-t&#34;</span><span class=p>,</span> <span class=s2>&#34;--threads&#34;</span><span class=p>,</span> <span class=n>dest</span><span class=o>=</span><span class=s2>&#34;threads&#34;</span><span class=p>,</span> <span class=n>help</span><span class=o>=</span><span class=s2>&#34;number of threads&#34;</span><span class=p>,</span> <span class=n>actions</span><span class=o>=</span><span class=s2>&#34;store&#34;</span><span class=p>,</span> <span class=nb>type</span><span class=o>=</span><span class=s2>&#34;int&#34;</span><span class=p>,</span> <span class=n>metavar</span><span class=o>=</span><span class=s2>&#34;THREADS&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=n>option</span><span class=p>,</span> <span class=n>args</span><span class=p>)</span><span class=o>=</span><span class=n>parser</span><span class=o>.</span><span class=n>parse_args</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>options</span><span class=o>.</span><span class=n>website</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>options</span><span class=o>.</span><span class=n>userfile</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>options</span><span class=o>.</span><span class=n>passfile</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>options</span><span class=o>.</span><span class=n>threads</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=xlwt模块的简单使用><span>xlwt模块的简单使用</span>
<a href=#xlwt%e6%a8%a1%e5%9d%97%e7%9a%84%e7%ae%80%e5%8d%95%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>xlwt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 1.创建Workbook</span>
</span></span><span class=line><span class=cl><span class=n>wb</span> <span class=o>=</span> <span class=n>xlwt</span><span class=o>.</span><span class=n>Workbook</span><span class=p>(</span><span class=n>encoding</span><span class=o>=</span><span class=s2>&#34;utf-8&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 2。创建worksheet</span>
</span></span><span class=line><span class=cl><span class=n>ws</span> <span class=o>=</span> <span class=n>wb</span><span class=o>.</span><span class=n>add_sheet</span><span class=p>(</span><span class=s2>&#34;test_sheet&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 3.写入第一行内容</span>
</span></span><span class=line><span class=cl><span class=c1>## ws.write(a,b,c)    a:行 b:列 c:内容</span>
</span></span><span class=line><span class=cl><span class=n>ws</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=s2>&#34;球队&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ws</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;号码&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ws</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=s2>&#34;姓名&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ws</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=s2>&#34;位置&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>wb</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;myExcel.xls&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>xlwt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=s2>&#34;Team&#34;</span><span class=p>:</span> <span class=s2>&#34;湖人&#34;</span><span class=p>,</span> <span class=s2>&#34;Number&#34;</span><span class=p>:</span> <span class=s2>&#34;34&#34;</span><span class=p>,</span> <span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;奥尼尔&#34;</span><span class=p>,</span> <span class=s2>&#34;Positions&#34;</span><span class=p>:</span> <span class=s2>&#34;中锋&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=s2>&#34;Team&#34;</span><span class=p>:</span> <span class=s2>&#34;湖人&#34;</span><span class=p>,</span> <span class=s2>&#34;Number&#34;</span><span class=p>:</span> <span class=s2>&#34;24&#34;</span><span class=p>,</span> <span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;科比&#34;</span><span class=p>,</span> <span class=s2>&#34;Positions&#34;</span><span class=p>:</span> <span class=s2>&#34;后卫&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=s2>&#34;Team&#34;</span><span class=p>:</span> <span class=s2>&#34;湖人&#34;</span><span class=p>,</span> <span class=s2>&#34;Number&#34;</span><span class=p>:</span> <span class=s2>&#34;23&#34;</span><span class=p>,</span> <span class=s2>&#34;Name&#34;</span><span class=p>:</span> <span class=s2>&#34;詹姆斯&#34;</span><span class=p>,</span> <span class=s2>&#34;Positions&#34;</span><span class=p>:</span> <span class=s2>&#34;前锋&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>wb</span> <span class=o>=</span> <span class=n>xlwt</span><span class=o>.</span><span class=n>Workbook</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>ws</span> <span class=o>=</span> <span class=n>wb</span><span class=o>.</span><span class=n>add_sheet</span><span class=p>(</span><span class=s2>&#34;test_sheet&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>item</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>## enumerate()函数用于将一个可遍历的数据对象(如列表、元组或字符串)组合为一个索引序列，同时列出数据和数据下标，一般用在for 循环当中</span>
</span></span><span class=line><span class=cl>    <span class=n>ws</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>item</span><span class=p>[</span><span class=s2>&#34;Team&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>ws</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>item</span><span class=p>[</span><span class=s2>&#34;Number&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>ws</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>item</span><span class=p>[</span><span class=s2>&#34;Name&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>ws</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=n>item</span><span class=p>[</span><span class=s2>&#34;Positions&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>wb</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;myExcel1.xls&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=xlsxwriter模块的使用><span>xlsxwriter模块的使用</span>
<a href=#xlsxwriter%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>write2xlsx</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>workbook</span> <span class=o>=</span> <span class=n>xw</span><span class=o>.</span><span class=n>Workbook</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>worksheet1</span> <span class=o>=</span> <span class=n>workbook</span><span class=o>.</span><span class=n>add_worksheet</span><span class=p>(</span><span class=s2>&#34;sheet1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 激活子表</span>
</span></span><span class=line><span class=cl>    <span class=n>worksheet1</span><span class=o>.</span><span class=n>activate</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Url&#39;</span><span class=p>,</span><span class=s1>&#39;Title&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>worksheet1</span><span class=o>.</span><span class=n>write_row</span><span class=p>(</span><span class=s1>&#39;A1&#39;</span><span class=p>,</span><span class=n>title</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>i</span><span class=o>=</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>        <span class=n>insertdata</span> <span class=o>=</span> <span class=p>[</span><span class=n>data</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=s2>&#34;url&#34;</span><span class=p>],</span><span class=n>data</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=s2>&#34;title&#34;</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>        <span class=n>row</span> <span class=o>=</span> <span class=s1>&#39;A&#39;</span><span class=o>+</span><span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>worksheet1</span><span class=o>.</span><span class=n>write_row</span><span class=p>(</span><span class=n>row</span><span class=p>,</span><span class=n>insertdata</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>i</span><span class=o>+=</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>workbook</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=json模块的简单使用><span>json模块的简单使用</span>
<a href=#json%e6%a8%a1%e5%9d%97%e7%9a%84%e7%ae%80%e5%8d%95%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>jsondata</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>{
</span></span></span><span class=line><span class=cl><span class=s2>&#34;Uin&#34;:0,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;UserName&#34;:&#34;@c482d142bc698bc3971d9f8c26335c5c&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;NickName&#34;:&#34;小帅b&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;HeadImgUrl&#34;:&#34;/cgi-bin/mmwebwx-bin/webwxgeticon?seq=500080&amp;username=@c482d142bc698bc3971d9f8c26335c5c&amp;skey=@crypt_b0f5e54e_b80a5e6dffebd14896dc9c72049712bf&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;ContactFlag&#34;:3,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;MemberCount&#34;:0,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;MemberList&#34;:[
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>],
</span></span></span><span class=line><span class=cl><span class=s2>&#34;RemarkName&#34;:&#34;&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;HideInputBarFlag&#34;:0,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;Sex&#34;:1,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;Signature&#34;:&#34;&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;VerifyFlag&#34;:0,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;OwnerUin&#34;:0,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;PYInitial&#34;:&#34;XSB&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;PYQuanPin&#34;:&#34;xiaoshuaib&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;RemarkPYInitial&#34;:&#34;&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;RemarkPYQuanPin&#34;:&#34;&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;StarFriend&#34;:0,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;AppAccountFlag&#34;:0,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;Statues&#34;:0,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;AttrStatus&#34;:98491,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;Province&#34;:&#34;广东&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;City&#34;:&#34;广州&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;Alias&#34;:&#34;&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;SnsFlag&#34;:48,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;UniFriend&#34;:0,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;DisplayName&#34;:&#34;&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;ChatRoomId&#34;:0,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;KeyWord&#34;:&#34;che&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;EncryChatRoomId&#34;:&#34;&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;IsOwner&#34;:0
</span></span></span><span class=line><span class=cl><span class=s2>}
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>myfriend</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>jsondata</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## json.load() 和 json.loads() 区别：</span>
</span></span><span class=line><span class=cl><span class=c1>## loads() 传的是json字符串，而 load() 传的是文件对象</span>
</span></span><span class=line><span class=cl><span class=c1>## 使用 loads() 时需要先读取文件在使用，而 load() 则不用</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>myfriend</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>NickName</span> <span class=o>=</span> <span class=n>myfriend</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;NickName&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>NickName</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>jsondata</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;{
</span></span></span><span class=line><span class=cl><span class=s2>&#34;MemberList&#34;:[
</span></span></span><span class=line><span class=cl><span class=s2>{
</span></span></span><span class=line><span class=cl><span class=s2>&#34;UserName&#34;:&#34;小帅b&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;sex&#34;:&#34;男&#34;
</span></span></span><span class=line><span class=cl><span class=s2>},
</span></span></span><span class=line><span class=cl><span class=s2>{
</span></span></span><span class=line><span class=cl><span class=s2>&#34;UserName&#34;:&#34;小帅b的1号女朋友&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;sex&#34;:&#34;女&#34;
</span></span></span><span class=line><span class=cl><span class=s2>},
</span></span></span><span class=line><span class=cl><span class=s2>{
</span></span></span><span class=line><span class=cl><span class=s2>&#34;UserName&#34;:&#34;小帅b的2号女朋友&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>&#34;sex&#34;:&#34;女&#34;
</span></span></span><span class=line><span class=cl><span class=s2>}
</span></span></span><span class=line><span class=cl><span class=s2>]
</span></span></span><span class=line><span class=cl><span class=s2>}&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>myfriend</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>jsondata</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(myfriend)</span>
</span></span><span class=line><span class=cl><span class=n>memberList</span> <span class=o>=</span> <span class=n>myfriend</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;MemberList&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>memberList</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=scipy模块的使用-1><span>scipy模块的使用</span>
<a href=#scipy%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8-1 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>#经常要导入csv数据</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>scipy.stats</span> <span class=k>as</span> <span class=nn>stats</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>scipy.optimize</span> <span class=k>as</span> <span class=nn>opt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## rv_unif = stats.uniform.rvs(size=10)</span>
</span></span><span class=line><span class=cl><span class=c1>## 均匀分布</span>
</span></span><span class=line><span class=cl><span class=c1>## print(rv_unif)</span>
</span></span><span class=line><span class=cl><span class=c1>## rv_beta = stats.beta.rvs(size=10, a=4, b=2)</span>
</span></span><span class=line><span class=cl><span class=c1>## 贝塔分布</span>
</span></span><span class=line><span class=cl><span class=c1>## print(rv_beta)</span>
</span></span><span class=line><span class=cl><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>seed</span><span class=p>(</span><span class=n>seed</span><span class=o>=</span><span class=mi>2015</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 随机数生成的seed</span>
</span></span><span class=line><span class=cl><span class=n>rv_beta</span> <span class=o>=</span> <span class=n>stats</span><span class=o>.</span><span class=n>beta</span><span class=o>.</span><span class=n>rvs</span><span class=p>(</span><span class=n>size</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>a</span><span class=o>=</span><span class=mi>4</span><span class=p>,</span> <span class=n>b</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;method 1:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>rv_beta</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>seed</span><span class=p>(</span><span class=n>seed</span><span class=o>=</span><span class=mi>2015</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>beta</span> <span class=o>=</span> <span class=n>stats</span><span class=o>.</span><span class=n>beta</span><span class=p>(</span><span class=n>a</span><span class=o>=</span><span class=mi>4</span><span class=p>,</span> <span class=n>b</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;method 2:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>beta</span><span class=o>.</span><span class=n>rvs</span><span class=p>(</span><span class=n>size</span><span class=o>=</span><span class=mi>10</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=seaborn模块的使用><span>seaborn模块的使用</span>
<a href=#seaborn%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback></code></pre></td></tr></table></div></div><h4 class=heading-element id=asyncio模块的学习与使用><span>asyncio模块的学习与使用</span>
<a href=#asyncio%e6%a8%a1%e5%9d%97%e7%9a%84%e5%ad%a6%e4%b9%a0%e4%b8%8e%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><h5 class=heading-element id=协程的概念><span>协程的概念</span>
<a href=#%e5%8d%8f%e7%a8%8b%e7%9a%84%e6%a6%82%e5%bf%b5 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>在同一线程内，一段执行代码过程中，可以中断并跳转到另一段代码中，接着之前中断的地方继续执行。协程运行状态于多线程类似。</p><h5 class=heading-element id=协程的优点><span>协程的优点</span>
<a href=#%e5%8d%8f%e7%a8%8b%e7%9a%84%e4%bc%98%e7%82%b9 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>-无需线程上下文切换，避免了无意义的调度，可以提高性能
-无需原子操作锁定及同步开销【避免的资源竞争】
-方便切换控制流，简化编程模型
-高并发+高扩展性+低成本，一个CPU支特上万的协程不是问题，一很适合用于高并发处理</p><h5 class=heading-element id=协程缺点><span>协程缺点：</span>
<a href=#%e5%8d%8f%e7%a8%8b%e7%bc%ba%e7%82%b9 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>-无法利用多核资源。协程的本质是单线程，不能同时将单个CPU的多个核用上，协程需要进程配合才能运行在多CPU上。（不过我们日常编程不会有这个问题，除非是CPU密集型应用)
-进行阻塞操作（如IO时)会阻塞掉整个程序</p><h5 class=heading-element id=生成器的学习><span>生成器的学习</span>
<a href=#%e7%94%9f%e6%88%90%e5%99%a8%e7%9a%84%e5%ad%a6%e4%b9%a0 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>func</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;这是一个生成器函数...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>## Cpython遇到yield关键字会暂停，下一次运行的时候会接着上一次运行的位置继续运行</span>
</span></span><span class=line><span class=cl>        <span class=k>yield</span> <span class=s2>&#34;这是生成器函数返回的数据...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 会返回一个对象：生成器对象</span>
</span></span><span class=line><span class=cl><span class=n>obj</span> <span class=o>=</span> <span class=n>func</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>obj</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 生成器需要通过next方法进行驱动</span>
</span></span><span class=line><span class=cl><span class=c1>## 中断暂停的特点：在运行第一个任务的时候遇到yield暂停并切换到另外一个任务上继续执行</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>next</span><span class=p>(</span><span class=n>obj</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>next</span><span class=p>(</span><span class=n>obj</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## 利用生成器特性进行任务切换</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>func_a</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;这是func_a函数&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>yield</span> 
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span> <span class=c1>## 让程序进行休眠</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>func_b</span><span class=p>(</span><span class=n>obj</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;这是func_b函数&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>obj</span><span class=o>.</span><span class=fm>__next__</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=n>func_a</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>func_b</span><span class=p>(</span><span class=n>a</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=同步程序与异步程序的区别><span>同步程序与异步程序的区别</span>
<a href=#%e5%90%8c%e6%ad%a5%e7%a8%8b%e5%ba%8f%e4%b8%8e%e5%bc%82%e6%ad%a5%e7%a8%8b%e5%ba%8f%e7%9a%84%e5%8c%ba%e5%88%ab class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## 同步程序</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>func</span><span class=p>(</span><span class=n>i</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=n>now</span> <span class=o>=</span> <span class=k>lambda</span><span class=p>:</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>start</span> <span class=o>=</span> <span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>func</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[+]同步程序所花费的时间为</span><span class=si>{</span><span class=n>now</span><span class=p>()</span><span class=o>-</span><span class=n>start</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## 异步程序</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>now</span> <span class=o>=</span> <span class=k>lambda</span><span class=p>:</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>start</span> <span class=o>=</span> <span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1>## 创建一个协程函数</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>func</span><span class=p>(</span><span class=n>i</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=c1>## 要用asyncio中的sleep</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>    
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>func</span><span class=p>(</span><span class=n>i</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[+]异步程序所花费的时间为</span><span class=si>{</span><span class=n>now</span><span class=p>()</span><span class=o>-</span><span class=n>start</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=asyncio中的概念><span>asyncio中的概念</span>
<a href=#asyncio%e4%b8%ad%e7%9a%84%e6%a6%82%e5%bf%b5 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><p>事件循环</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>类似于一个无限死循环的列表，在创建一些协程任务的时候，会将任务放到事件循环中，事件循环会对当前存在的任务进行状态的判断：已完成/未完成。对已完成的任务进行删除，对未完成的任务/等待执行的任务会被事件循环调度。若当前事件循环中的任务已经全部完成，则事件循环列表为空。若事件循环列表为空，则中断循环并退出。</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## 使用事件循环</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 协程任务1</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>work_1</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;我是协程任务1...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl><span class=c1>## 协程任务1</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>work_2</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;我是协程任务2...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl><span class=c1>## 将当前的协程函数转为协程对象，并把多个协程对象添加到一个列表中</span>
</span></span><span class=line><span class=cl><span class=n>tasks</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=n>work_1</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=n>work_2</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 创建一个事件循环对象</span>
</span></span><span class=line><span class=cl><span class=c1>## loop = asyncio.get_event_loop()</span>
</span></span><span class=line><span class=cl><span class=c1>## 使用事件循环调度执行多个协程任务</span>
</span></span><span class=line><span class=cl><span class=c1>## loop.run_until_complete(asyncio.wait(tasks))</span>
</span></span><span class=line><span class=cl><span class=c1>## print(loop)</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>1.需要使用asyncio创建事件循环对象
</span></span></span><span class=line><span class=cl><span class=s2>2.使用事件循环对象执行多个协程任务
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>## 使用python3.7以上版本语法运行多个任务</span>
</span></span><span class=line><span class=cl><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>asyncio</span><span class=o>.</span><span class=n>wait</span><span class=p>(</span><span class=n>tasks</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><p>协程</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>通过async关键字装饰的程序是一个协程函数。若一个协程函数后存在()，则会返回一个协程对象。</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## 快速上手.py</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>协程函数
</span></span></span><span class=line><span class=cl><span class=s2>    使用async关键字定义的函数
</span></span></span><span class=line><span class=cl><span class=s2>协程对象
</span></span></span><span class=line><span class=cl><span class=s2>    协程函数()会返回一个协程对象，可以使用事件循环去调度协程对象
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>work</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;运行协程任务...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=c1>## print(obj)</span>
</span></span><span class=line><span class=cl><span class=c1>## python3.6</span>
</span></span><span class=line><span class=cl><span class=c1>## 获取一个事件循环</span>
</span></span><span class=line><span class=cl><span class=c1>## loop = asyncio.get_event_loop()</span>
</span></span><span class=line><span class=cl><span class=c1>## loop.run_until_complete(work())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## python3.7以上版本</span>
</span></span><span class=line><span class=cl><span class=c1>## async def main():</span>
</span></span><span class=line><span class=cl><span class=c1>##     tasks = [</span>
</span></span><span class=line><span class=cl><span class=c1>##         asyncio.create_task(work())</span>
</span></span><span class=line><span class=cl><span class=c1>##     ]</span>
</span></span><span class=line><span class=cl><span class=c1>##     await asyncio.wait(tasks)</span>
</span></span><span class=line><span class=cl><span class=n>task</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=n>work</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=c1>#asyncio.run(main())</span>
</span></span><span class=line><span class=cl><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>asyncio</span><span class=o>.</span><span class=n>wait</span><span class=p>(</span><span class=n>task</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><p>task对象</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>一个协程对象可以原生进行任务的挂起。
</span></span><span class=line><span class=cl>task对象就是往事件循环中加入任务用的，用于开发调度协程
</span></span><span class=line><span class=cl>task可以用来进行并发调度任务</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## task对象</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>other</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;协程任务启动...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;协程任务完成...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;这是当前协程任务的返回值...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;正在执行协程任务函数: other...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>task1</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=n>other</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=c1>#提交任务到事件循环</span>
</span></span><span class=line><span class=cl>    <span class=n>task2</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=n>other</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=n>res_1</span> <span class=o>=</span> <span class=k>await</span> <span class=n>task1</span>
</span></span><span class=line><span class=cl>    <span class=n>res_2</span> <span class=o>=</span> <span class=k>await</span> <span class=n>task2</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;当前任务的返回值为: </span><span class=si>{</span><span class=n>res_1</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;当前任务的返回值为: </span><span class=si>{</span><span class=n>res_2</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span></span></span></code></pre></td></tr></table></div></div><p>future对象</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>类似于task对象，task对象其实是future对象的一个子类。</span></span></code></pre></td></tr></table></div></div><p>async / await关键字</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>async用于定义协程函数，await用于挂起/堵塞协程任务</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>await可以获取到可等待对象的返回值
</span></span></span><span class=line><span class=cl><span class=s2>    当事件循环遇到await关键字之后会调度其他任务
</span></span></span><span class=line><span class=cl><span class=s2>协程对象
</span></span></span><span class=line><span class=cl><span class=s2>future对象
</span></span></span><span class=line><span class=cl><span class=s2>task对象
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>work</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 模拟耗时任务</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;这是一个协程任务&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>res</span> <span class=o>=</span> <span class=k>await</span> <span class=n>work</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 如果当前任务是一个耗时任务，则会阻塞当前代码</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=协程嵌套><span>协程嵌套</span>
<a href=#%e5%8d%8f%e7%a8%8b%e5%b5%8c%e5%a5%97 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## 协程嵌套</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>other</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;协程任务启动...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;协程任务完成...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;这是当前协程任务的返回值...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;正在执行协程任务函数: other...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 当前程序是一个同步任务,await遇到耗时任务会阻塞主程序代码</span>
</span></span><span class=line><span class=cl>    <span class=n>res_1</span> <span class=o>=</span> <span class=k>await</span> <span class=n>other</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1>## await拿到任务返回值后才会解阻塞</span>
</span></span><span class=line><span class=cl>    <span class=c1>## await用来等待任务的返回结果的，不是用来进行异步任务并发的</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 任务的并发要用到task对象</span>
</span></span><span class=line><span class=cl>    <span class=n>res_2</span> <span class=o>=</span> <span class=k>await</span> <span class=n>other</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;当前任务的返回值为: </span><span class=si>{</span><span class=n>res_1</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;当前任务的返回值为: </span><span class=si>{</span><span class=n>res_2</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span></span></span></code></pre></td></tr></table></div></div><h5 class=heading-element id=协程并发><span>协程并发</span>
<a href=#%e5%8d%8f%e7%a8%8b%e5%b9%b6%e5%8f%91 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## 协程并发</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>work</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;当前接受的参数为:</span><span class=si>{</span><span class=n>x</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 模拟一个耗时任务</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;当前任务的返回值为:</span><span class=si>{</span><span class=n>x</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 创建十个任务，并将十个任务提交到事件循环</span>
</span></span><span class=line><span class=cl>    <span class=n>tasks</span> <span class=o>=</span> <span class=p>[</span><span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=n>work</span><span class=p>(</span><span class=n>i</span><span class=p>))</span><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>    <span class=c1>## wait方法获取的返回值是无序的</span>
</span></span><span class=line><span class=cl>    <span class=c1>## done,pending = await asyncio.wait(tasks) </span>
</span></span><span class=line><span class=cl>    <span class=c1>#asyncio.wait接受的是一个可迭代的对象</span>
</span></span><span class=line><span class=cl>    <span class=c1>## done可以拿到task任务的返回值</span>
</span></span><span class=line><span class=cl>    <span class=c1>## pending表示当前任务的执行状态</span>
</span></span><span class=line><span class=cl>    <span class=c1>## print(done,pending)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## for item in done:</span>
</span></span><span class=line><span class=cl>        <span class=c1>## print(item.result())</span>
</span></span><span class=line><span class=cl>    <span class=n>res</span> <span class=o>=</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>gather</span><span class=p>(</span><span class=o>*</span><span class=n>tasks</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## gather函数会对当前列表进行解包</span>
</span></span><span class=line><span class=cl>    <span class=c1>## gather用来收集所有已完成任务的返回值，并且获取到的任务的返回值是有顺序的</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>    
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=aiohttp模块的使用><span>aiohttp模块的使用</span>
<a href=#aiohttp%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>aiohttp</span> <span class=c1>## 导入异步HTTP请求库 aiohttp</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span> <span class=c1>## 导入异步编程库 asyncio</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;http://www.example.com&#39;</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>fetch</span><span class=p>(</span><span class=n>session</span><span class=p>,</span><span class=n>url</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 使用session对象发出GET请求</span>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>with</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span> <span class=k>as</span> <span class=n>response</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 返回响应文本</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>await</span> <span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 创建异步HTTP会话</span>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>with</span> <span class=n>aiohttp</span><span class=o>.</span><span class=n>ClientSession</span><span class=p>()</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 调用fetch函数</span>
</span></span><span class=line><span class=cl>        <span class=n>html</span> <span class=o>=</span> <span class=k>await</span> <span class=n>fetch</span><span class=p>(</span><span class=n>session</span><span class=p>,</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>html</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>aiohttp</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>with</span> <span class=n>aiohttp</span><span class=o>.</span><span class=n>ClientSession</span><span class=p>()</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 发送get请求</span>
</span></span><span class=line><span class=cl>        <span class=k>async</span> <span class=k>with</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;&lt;https://www.example.com&gt;&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>resp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=k>await</span> <span class=n>resp</span><span class=o>.</span><span class=n>text</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 发送post请求</span>
</span></span><span class=line><span class=cl>        <span class=k>async</span> <span class=k>with</span> <span class=n>session</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=s1>&#39;&lt;https://www.example.com&gt;&#39;</span><span class=p>,</span> <span class=n>json</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;key&#39;</span><span class=p>:</span> <span class=s1>&#39;value&#39;</span><span class=p>})</span> <span class=k>as</span> <span class=n>resp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=k>await</span> <span class=n>resp</span><span class=o>.</span><span class=n>text</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 发送put请求</span>
</span></span><span class=line><span class=cl>        <span class=k>async</span> <span class=k>with</span> <span class=n>session</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=s1>&#39;&lt;https://www.example.com&gt;&#39;</span><span class=p>,</span> <span class=n>json</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;key&#39;</span><span class=p>:</span> <span class=s1>&#39;value&#39;</span><span class=p>})</span> <span class=k>as</span> <span class=n>resp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=k>await</span> <span class=n>resp</span><span class=o>.</span><span class=n>text</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 发送delete请求</span>
</span></span><span class=line><span class=cl>        <span class=k>async</span> <span class=k>with</span> <span class=n>session</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=s1>&#39;&lt;https://www.example.com&gt;&#39;</span><span class=p>,</span> <span class=n>json</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;key&#39;</span><span class=p>:</span> <span class=s1>&#39;value&#39;</span><span class=p>})</span> <span class=k>as</span> <span class=n>resp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=k>await</span> <span class=n>resp</span><span class=o>.</span><span class=n>text</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>aiohttp</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>urls</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;https://images.pexels.com/photos/17743151/pexels-photo-17743151.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=1260&amp;h=750&amp;dpr=2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;https://images.pexels.com/photos/17742455/pexels-photo-17742455.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=1260&amp;h=750&amp;dpr=2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;https://images.pexels.com/photos/17820682/pexels-photo-17820682.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600&amp;lazy=load&#34;</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>aiodownload</span><span class=p>(</span><span class=n>url</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=n>url</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;?&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>rsplit</span><span class=p>(</span><span class=s2>&#34;/&#34;</span><span class=p>,</span><span class=mi>1</span><span class=p>)[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=c1>#这里rsplit是指从右边开始切一次，取第二个元素</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 发送请求</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 写了with后，就有了上下文管理器，运行完后会自动关闭session</span>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>with</span> <span class=n>aiohttp</span><span class=o>.</span><span class=n>ClientSession</span><span class=p>()</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 得到图片数据</span>
</span></span><span class=line><span class=cl>        <span class=k>async</span> <span class=k>with</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>)</span> <span class=k>as</span> <span class=n>response</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 保存到文件</span>
</span></span><span class=line><span class=cl>            <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=n>mode</span><span class=o>=</span><span class=s1>&#39;wb&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1>## 读取内容是异步的，因此需要await</span>
</span></span><span class=line><span class=cl>                <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=k>await</span> <span class=n>response</span><span class=o>.</span><span class=n>content</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[+]任务结束&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>tasks</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>url</span> <span class=ow>in</span> <span class=n>urls</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>tasks</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>aiodownload</span><span class=p>(</span><span class=n>url</span><span class=p>))</span>        
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>gather</span><span class=p>(</span><span class=o>*</span><span class=n>tasks</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=pydocx库的使用><span>pydocx库的使用</span>
<a href=#pydocx%e5%ba%93%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>docx</span> <span class=kn>import</span> <span class=n>Document</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>GenerateNewWord</span><span class=p>(</span><span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>document</span> <span class=o>=</span> <span class=n>Document</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>document</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>newname</span> <span class=o>=</span> <span class=s2>&#34;114514.docx&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>GenerateNewWord</span><span class=p>(</span><span class=n>newname</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=colorama模块的使用><span>colorama模块的使用</span>
<a href=#colorama%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>colorama</span> <span class=kn>import</span> <span class=n>Fore</span><span class=p>,</span> <span class=n>Back</span><span class=p>,</span> <span class=n>Style</span><span class=p>,</span> <span class=n>init</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 初始化colorama</span>
</span></span><span class=line><span class=cl><span class=n>init</span><span class=p>(</span><span class=n>autoreset</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Fore</span><span class=o>.</span><span class=n>BLUE</span> <span class=o>+</span> <span class=s1>&#39;蓝色文字&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Back</span><span class=o>.</span><span class=n>BLACK</span> <span class=o>+</span> <span class=n>Fore</span><span class=o>.</span><span class=n>LIGHTGREEN_EX</span><span class=o>+</span> <span class=s1>&#39;黑底绿字&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Style</span><span class=o>.</span><span class=n>BRIGHT</span> <span class=o>+</span> <span class=s1>&#39;这是明亮的文字&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 由于设置了 autoreset=True，所以每次输出后颜色都会重置，所以下面的文本将会是默认的颜色</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;这是普通文本&#39;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=prettytable模块的使用><span>prettytable模块的使用</span>
<a href=#prettytable%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>prettytable</span> <span class=kn>import</span> <span class=n>PrettyTable</span>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=n>PrettyTable</span><span class=p>([</span><span class=s2>&#34;姓名&#34;</span><span class=p>,</span> <span class=s2>&#34;性别&#34;</span><span class=p>,</span> <span class=s2>&#34;年龄&#34;</span><span class=p>,</span> <span class=s2>&#34;存款&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>x</span><span class=o>.</span><span class=n>add_row</span><span class=p>([</span><span class=s2>&#34;赵一&#34;</span><span class=p>,</span><span class=s2>&#34;男&#34;</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>100000</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>x</span><span class=o>.</span><span class=n>add_row</span><span class=p>([</span><span class=s2>&#34;钱二&#34;</span><span class=p>,</span><span class=s2>&#34;男&#34;</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mi>500</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>x</span><span class=o>.</span><span class=n>add_row</span><span class=p>([</span><span class=s2>&#34;孙三&#34;</span><span class=p>,</span> <span class=s2>&#34;男&#34;</span><span class=p>,</span> <span class=mi>22</span><span class=p>,</span> <span class=mf>400.7</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>x</span><span class=o>.</span><span class=n>add_row</span><span class=p>([</span><span class=s2>&#34;李四&#34;</span><span class=p>,</span> <span class=s2>&#34;男&#34;</span><span class=p>,</span> <span class=mi>23</span><span class=p>,</span> <span class=mf>619.5</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>x</span><span class=o>.</span><span class=n>add_row</span><span class=p>([</span><span class=s2>&#34;周五&#34;</span><span class=p>,</span> <span class=s2>&#34;男&#34;</span><span class=p>,</span> <span class=mi>24</span><span class=p>,</span> <span class=mf>1214.8</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>x</span><span class=o>.</span><span class=n>add_row</span><span class=p>([</span><span class=s2>&#34;吴六&#34;</span><span class=p>,</span> <span class=s2>&#34;女&#34;</span><span class=p>,</span> <span class=mi>25</span><span class=p>,</span> <span class=mf>646.9</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>x</span><span class=o>.</span><span class=n>add_row</span><span class=p>([</span><span class=s2>&#34;郑七&#34;</span><span class=p>,</span> <span class=s2>&#34;女&#34;</span><span class=p>,</span> <span class=mi>26</span><span class=p>,</span> <span class=mf>869.4</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>x</span><span class=o>.</span><span class=n>add_row</span><span class=p>([</span><span class=s2>&#34;王七加一&#34;</span><span class=p>,</span> <span class=s2>&#34;男&#34;</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mf>869.4</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>+----------+------+------+--------+
</span></span></span><span class=line><span class=cl><span class=s2>|   姓名   | 性别 | 年龄 |  存款  |
</span></span></span><span class=line><span class=cl><span class=s2>+----------+------+------+--------+
</span></span></span><span class=line><span class=cl><span class=s2>|   赵一   |  男  |  20  | 100000 |
</span></span></span><span class=line><span class=cl><span class=s2>|   钱二   |  男  |  21  |  500   |
</span></span></span><span class=line><span class=cl><span class=s2>|   孙三   |  男  |  22  | 400.7  |
</span></span></span><span class=line><span class=cl><span class=s2>|   李四   |  男  |  23  | 619.5  |
</span></span></span><span class=line><span class=cl><span class=s2>|   周五   |  男  |  24  | 1214.8 |
</span></span></span><span class=line><span class=cl><span class=s2>|   吴六   |  女  |  25  | 646.9  |
</span></span></span><span class=line><span class=cl><span class=s2>|   郑七   |  女  |  26  | 869.4  |
</span></span></span><span class=line><span class=cl><span class=s2>| 王七加一 |  男  |  21  | 869.4  |
</span></span></span><span class=line><span class=cl><span class=s2>+----------+------+------+--------+
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=paramiko模块的使用><span>paramiko模块的使用</span>
<a href=#paramiko%e6%a8%a1%e5%9d%97%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>使用用户名和密码 ssh 连接（执行一个命令就要连接一次）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>paramiko</span>
</span></span><span class=line><span class=cl><span class=c1>## 初始化</span>
</span></span><span class=line><span class=cl><span class=n>ssh</span> <span class=o>=</span> <span class=n>paramiko</span><span class=o>.</span><span class=n>SSHClient</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1>## 允许连接不在know_hosts文件中的主机</span>
</span></span><span class=line><span class=cl><span class=n>ssh</span><span class=o>.</span><span class=n>set_missing_host_key_policy</span><span class=p>(</span><span class=n>paramiko</span><span class=o>.</span><span class=n>AutoAddPolicy</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=c1>## 建立连接</span>
</span></span><span class=line><span class=cl><span class=n>ssh</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=s2>&#34;192.168.58.133&#34;</span><span class=p>,</span> <span class=n>username</span><span class=o>=</span><span class=s2>&#34;kali&#34;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>22</span><span class=p>,</span> <span class=n>password</span><span class=o>=</span><span class=s2>&#34;kali&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 执行命令</span>
</span></span><span class=line><span class=cl><span class=n>ssh_stdin</span><span class=p>,</span> <span class=n>ssh_stdout</span><span class=p>,</span> <span class=n>ssh_stderr</span> <span class=o>=</span> <span class=n>ssh</span><span class=o>.</span><span class=n>exec_command</span><span class=p>(</span><span class=s2>&#34;neofetch&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>ssh_stdout</span><span class=o>.</span><span class=n>read</span><span class=p>()</span><span class=o>.</span><span class=n>decode</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>ssh</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p><strong>使用户名和密码的 transport 方式登录</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>paramiko</span>
</span></span><span class=line><span class=cl><span class=c1>## 建立连接</span>
</span></span><span class=line><span class=cl><span class=n>trans</span> <span class=o>=</span> <span class=n>paramiko</span><span class=o>.</span><span class=n>Transport</span><span class=p>((</span><span class=s2>&#34;192.168.58.133&#34;</span><span class=p>,</span> <span class=mi>22</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>trans</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=n>username</span><span class=o>=</span><span class=s2>&#34;kali&#34;</span><span class=p>,</span> <span class=n>password</span><span class=o>=</span><span class=s2>&#34;kali&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 将sshclient的对象的transport指定为以上的trans</span>
</span></span><span class=line><span class=cl><span class=n>ssh</span> <span class=o>=</span> <span class=n>paramiko</span><span class=o>.</span><span class=n>SSHClient</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>ssh</span><span class=o>.</span><span class=n>_transport</span> <span class=o>=</span> <span class=n>trans</span>
</span></span><span class=line><span class=cl><span class=n>ssh_stdin</span><span class=p>,</span> <span class=n>ssh_stdout</span><span class=p>,</span> <span class=n>ssh_stderr</span> <span class=o>=</span> <span class=n>ssh</span><span class=o>.</span><span class=n>exec_command</span><span class=p>(</span><span class=s2>&#34;neofetch&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>ssh_stdout</span><span class=o>.</span><span class=n>read</span><span class=p>()</span><span class=o>.</span><span class=n>decode</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>trans</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>基于密钥的 Transport 方式登录</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>paramiko</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 指定本地的RSA私钥文件</span>
</span></span><span class=line><span class=cl><span class=c1>## 如果建立密钥对时设置的有密码，password为设定的密码，如无不用指定password参数</span>
</span></span><span class=line><span class=cl><span class=n>pkey</span> <span class=o>=</span> <span class=n>paramiko</span><span class=o>.</span><span class=n>RSAKey</span><span class=o>.</span><span class=n>from_private_key_file</span><span class=p>(</span><span class=s1>&#39;/home/you_username/.ssh/id_rsa&#39;</span><span class=p>,</span> <span class=n>password</span><span class=o>=</span><span class=s1>&#39;12345&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 建立连接</span>
</span></span><span class=line><span class=cl><span class=n>trans</span> <span class=o>=</span> <span class=n>paramiko</span><span class=o>.</span><span class=n>Transport</span><span class=p>((</span><span class=s1>&#39;xx.xx.xx.xx&#39;</span><span class=p>,</span> <span class=mi>22</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>trans</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=n>username</span><span class=o>=</span><span class=s1>&#39;you_username&#39;</span><span class=p>,</span> <span class=n>pkey</span><span class=o>=</span><span class=n>pkey</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 将sshclient的对象的transport指定为以上的trans</span>
</span></span><span class=line><span class=cl><span class=n>ssh</span> <span class=o>=</span> <span class=n>paramiko</span><span class=o>.</span><span class=n>SSHClient</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>ssh</span><span class=o>.</span><span class=n>_transport</span> <span class=o>=</span> <span class=n>trans</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 执行命令，和传统方法一样</span>
</span></span><span class=line><span class=cl><span class=n>stdin</span><span class=p>,</span> <span class=n>stdout</span><span class=p>,</span> <span class=n>stderr</span> <span class=o>=</span> <span class=n>ssh</span><span class=o>.</span><span class=n>exec_command</span><span class=p>(</span><span class=s1>&#39;df -hl&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>stdout</span><span class=o>.</span><span class=n>read</span><span class=p>()</span><span class=o>.</span><span class=n>decode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 关闭连接</span>
</span></span><span class=line><span class=cl><span class=n>trans</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>实现 sftp 文件传输</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>paramiko</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 实例化一个trans对象## 实例化一个transport对象</span>
</span></span><span class=line><span class=cl><span class=n>trans</span> <span class=o>=</span> <span class=n>paramiko</span><span class=o>.</span><span class=n>Transport</span><span class=p>((</span><span class=s1>&#39;xx.xx.xx.xx&#39;</span><span class=p>,</span> <span class=mi>22</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 建立连接</span>
</span></span><span class=line><span class=cl><span class=n>trans</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=n>username</span><span class=o>=</span><span class=s1>&#39;you_username&#39;</span><span class=p>,</span> <span class=n>password</span><span class=o>=</span><span class=s1>&#39;you_passwd&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 实例化一个 sftp对象,指定连接的通道</span>
</span></span><span class=line><span class=cl><span class=n>sftp</span> <span class=o>=</span> <span class=n>paramiko</span><span class=o>.</span><span class=n>SFTPClient</span><span class=o>.</span><span class=n>from_transport</span><span class=p>(</span><span class=n>trans</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 发送文件</span>
</span></span><span class=line><span class=cl><span class=n>sftp</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>localpath</span><span class=o>=</span><span class=s1>&#39;/tmp/11.txt&#39;</span><span class=p>,</span> <span class=n>remotepath</span><span class=o>=</span><span class=s1>&#39;/tmp/22.txt&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 下载文件</span>
</span></span><span class=line><span class=cl><span class=n>sftp</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>remotepath</span><span class=o>=</span><span class=s1>&#39;/tmp/22.txt&#39;</span><span class=p>,</span> <span class=n>localpath</span><span class=o>=</span><span class=s1>&#39;/tmp/33.txt&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>trans</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=利用python脚本对数据库进行操作><span>利用Python脚本对数据库进行操作</span>
<a href=#%e5%88%a9%e7%94%a8python%e8%84%9a%e6%9c%ac%e5%af%b9%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9b%e8%a1%8c%e6%93%8d%e4%bd%9c class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h4 class=heading-element id=pymysql模块的简单使用><span>pymysql模块的简单使用</span>
<a href=#pymysql%e6%a8%a1%e5%9d%97%e7%9a%84%e7%ae%80%e5%8d%95%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pymysql</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 使用 connect 方法，传入数据库地址，账号密码，数据库名就可以得到你的数据库对象</span>
</span></span><span class=line><span class=cl><span class=n>db</span> <span class=o>=</span> <span class=n>pymysql</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>host</span><span class=o>=</span><span class=s2>&#34;localhost&#34;</span><span class=p>,</span> <span class=n>user</span><span class=o>=</span><span class=s2>&#34;root&#34;</span><span class=p>,</span> <span class=n>password</span><span class=o>=</span><span class=s2>&#34;root&#34;</span><span class=p>,</span> <span class=n>database</span><span class=o>=</span><span class=s2>&#34;avidol&#34;</span><span class=p>,</span> <span class=n>charset</span><span class=o>=</span><span class=s2>&#34;utf8&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 接着我们获取 cursor 来操作我们的 avIdol 这个数据库</span>
</span></span><span class=line><span class=cl><span class=n>cursor</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>cursor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 比如我们来创建一张数据表</span>
</span></span><span class=line><span class=cl><span class=c1>## sql = &#34;&#34;&#34;create table beautyGirls (</span>
</span></span><span class=line><span class=cl><span class=c1>##    name char(20) not null,</span>
</span></span><span class=line><span class=cl><span class=c1>##    age int)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>## sql = &#34;insert into beautyGirls(name,age) values(&#39;Mrs.cang&#39;,18)&#34;</span>
</span></span><span class=line><span class=cl><span class=n>sql</span> <span class=o>=</span> <span class=s2>&#34;delete from beautyGirls where age = &#39;</span><span class=si>%d</span><span class=s2>&#39;&#34;</span> <span class=o>%</span> <span class=p>(</span><span class=mi>18</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=n>sql</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 回滚</span>
</span></span><span class=line><span class=cl>    <span class=n>db</span><span class=o>.</span><span class=n>rollback</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1>## 最后我们关闭这个数据库的连接</span>
</span></span><span class=line><span class=cl><span class=n>db</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy</span> <span class=kn>import</span> <span class=n>create_engine</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&#34;xsb.csv&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 当engine连接的时候我们就插入数据</span>
</span></span><span class=line><span class=cl><span class=n>engine</span> <span class=o>=</span> <span class=n>create_engine</span><span class=p>(</span><span class=s2>&#34;mysql://root:root@localhost/xsb?charset=utf8&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## user:password</span>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>engine</span><span class=o>.</span><span class=n>connect</span><span class=p>()</span> <span class=k>as</span> <span class=n>conn</span><span class=p>,</span> <span class=n>conn</span><span class=o>.</span><span class=n>begin</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>df</span><span class=o>.</span><span class=n>to_sql</span><span class=p>(</span><span class=s2>&#34;xsb&#34;</span><span class=p>,</span> <span class=n>conn</span><span class=p>,</span> <span class=n>if_exists</span><span class=o>=</span><span class=s2>&#34;replace&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=pymongo模块的简单使用><span>pymongo模块的简单使用</span>
<a href=#pymongo%e6%a8%a1%e5%9d%97%e7%9a%84%e7%ae%80%e5%8d%95%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pymongo</span> <span class=kn>import</span> <span class=n>MongoClient</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>conn</span> <span class=o>=</span> <span class=n>MongoClient</span><span class=p>(</span><span class=s2>&#34;mongodb://localhost:27017/&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(conn)</span>
</span></span><span class=line><span class=cl><span class=n>db</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>avIdol</span>
</span></span><span class=line><span class=cl><span class=c1>## 删除全部数据</span>
</span></span><span class=line><span class=cl><span class=n>db</span><span class=o>.</span><span class=n>col</span><span class=o>.</span><span class=n>remove</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>db</span><span class=o>.</span><span class=n>col</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;波多野結衣&#34;</span><span class=p>,</span> <span class=s2>&#34;bwh&#34;</span><span class=p>:</span> <span class=s1>&#39;{ &#34;b&#34;: 90, &#34;w&#34;: 59, &#34;h&#34;: 85}&#39;</span><span class=p>,</span> <span class=s2>&#34;age&#34;</span><span class=p>:</span> <span class=mi>30</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;吉泽明步&#34;</span><span class=p>,</span> <span class=s2>&#34;bwh&#34;</span><span class=p>:</span> <span class=s1>&#39;{ &#34;b&#34;: 86, &#34;w&#34;: 58, &#34;h&#34;: 86}&#39;</span><span class=p>,</span> <span class=s2>&#34;age&#34;</span><span class=p>:</span> <span class=mi>35</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;桃乃木香奈&#34;</span><span class=p>,</span> <span class=s2>&#34;bwh&#34;</span><span class=p>:</span> <span class=s1>&#39;{ &#34;b&#34;: 80, &#34;w&#34;: 54, &#34;h&#34;: 80}&#39;</span><span class=p>,</span> <span class=s2>&#34;age&#34;</span><span class=p>:</span> <span class=mi>22</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;西宫梦&#34;</span><span class=p>,</span> <span class=s2>&#34;bwh&#34;</span><span class=p>:</span> <span class=s1>&#39;{ &#34;b&#34;: 85, &#34;w&#34;: 56, &#34;h&#34;: 86}&#39;</span><span class=p>,</span> <span class=s2>&#34;age&#34;</span><span class=p>:</span> <span class=mi>22</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;松下纱荣子&#34;</span><span class=p>,</span> <span class=s2>&#34;bwh&#34;</span><span class=p>:</span> <span class=s1>&#39;{ &#34;b&#34;: 88, &#34;w&#34;: 57, &#34;h&#34;: 86}&#39;</span><span class=p>,</span> <span class=s2>&#34;age&#34;</span><span class=p>:</span> <span class=mi>28</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## db.col.insert({&#34;name&#34;: &#34;波多野結衣&#34;, &#34;bwh&#34;: &#39;{ &#34;b&#34;: 90, &#34;w&#34;: 59, &#34;h&#34;: 85}&#39;, &#34;age&#34;: 30})</span>
</span></span><span class=line><span class=cl><span class=c1>## print(db.col.find_one())</span>
</span></span><span class=line><span class=cl><span class=c1>## 按name来删除</span>
</span></span><span class=line><span class=cl><span class=n>db</span><span class=o>.</span><span class=n>col</span><span class=o>.</span><span class=n>remove</span><span class=p>({</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;波多野結衣&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=c1>## 把 吉泽明步 换成 苍井空</span>
</span></span><span class=line><span class=cl><span class=n>db</span><span class=o>.</span><span class=n>col</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;吉泽明步&#34;</span><span class=p>},</span> <span class=p>{</span><span class=s2>&#34;$set&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;苍井空&#34;</span><span class=p>}})</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>db</span><span class=o>.</span><span class=n>col</span><span class=o>.</span><span class=n>find</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>item</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=多线程多进程协程微线程><span>多线程、多进程、协程(微线程)</span>
<a href=#%e5%a4%9a%e7%ba%bf%e7%a8%8b%e5%a4%9a%e8%bf%9b%e7%a8%8b%e5%8d%8f%e7%a8%8b%e5%be%ae%e7%ba%bf%e7%a8%8b class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p><strong>简单的多线程</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## -*- encoding: utf-8 -*-</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyThread</span><span class=p>(</span><span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 创建一个线程类，并继承threading.Thread</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>threadID</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>counter</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>threadID</span> <span class=o>=</span> <span class=n>threadID</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>counter</span> <span class=o>=</span> <span class=n>counter</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;开始线程：&#34;</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>moyu_time</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>counter</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;退出线程：&#34;</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>moyu_time</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>delay</span><span class=p>,</span> <span class=n>counter</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=n>counter</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>delay</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;</span><span class=si>%s</span><span class=s2> 开始摸鱼 </span><span class=si>%s</span><span class=s2> &#34;</span> <span class=o>%</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&#34;%Y-%m-</span><span class=si>%d</span><span class=s2> %H:%M:%S&#34;</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>localtime</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>counter</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 创建新线程</span>
</span></span><span class=line><span class=cl>    <span class=n>thread1</span> <span class=o>=</span> <span class=n>MyThread</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;小明&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>thread2</span> <span class=o>=</span> <span class=n>MyThread</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=s2>&#34;小红&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 开启新线程</span>
</span></span><span class=line><span class=cl>    <span class=n>thread1</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>thread2</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 等待线程终止</span>
</span></span><span class=line><span class=cl>    <span class=n>thread1</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>thread2</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 用到的join方法呢是为了让线程执行完再终止主程序</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;退出主线程&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><strong>线程池</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## -*- encoding: utf-8 -*-</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>concurrent.futures</span> <span class=kn>import</span> <span class=n>ThreadPoolExecutor</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>moyu_time</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>delay</span><span class=p>,</span> <span class=n>counter</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=n>counter</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>delay</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;</span><span class=si>%s</span><span class=s2> 开始摸鱼 </span><span class=si>%s</span><span class=s2>&#34;</span> <span class=o>%</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&#34;%Y-%m-</span><span class=si>%d</span><span class=s2> %H:%M:%S&#34;</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>localtime</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>counter</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 线程池</span>
</span></span><span class=line><span class=cl>    <span class=n>pool</span> <span class=o>=</span> <span class=n>ThreadPoolExecutor</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 往池子里塞20个线程然后在循环的时候每次拿一个线程来摸鱼</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>pool</span><span class=o>.</span><span class=n>submit</span><span class=p>(</span><span class=n>moyu_time</span><span class=p>(</span><span class=s2>&#34;xiaoshuaib&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>),</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div><p><strong>队列+多线程</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## -*- encoding: utf-8 -*-</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>queue</span> <span class=kn>import</span> <span class=n>Queue</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CustomThread</span><span class=p>(</span><span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 创建一个线程类，并继承threading.Thread</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>queue</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span> <span class=o>=</span> <span class=n>queue</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>q_method</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>q_method</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=o>.</span><span class=n>task_done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>moyu</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34; 开始摸鱼 </span><span class=si>%s</span><span class=s2>&#34;</span> <span class=o>%</span> <span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&#34;%Y-%m-</span><span class=si>%d</span><span class=s2> %H:%M:%S&#34;</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>localtime</span><span class=p>())))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>queue_pool</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 创建一个长度为5的队列</span>
</span></span><span class=line><span class=cl>    <span class=n>queue</span> <span class=o>=</span> <span class=n>Queue</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 根据队列的长度创建线程</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>queue</span><span class=o>.</span><span class=n>maxsize</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>t</span> <span class=o>=</span> <span class=n>CustomThread</span><span class=p>(</span><span class=n>queue</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 将每个线程都置于守护状态</span>
</span></span><span class=line><span class=cl>        <span class=n>t</span><span class=o>.</span><span class=n>setDaemon</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>t</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>20</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 利用put方法，将任务往队列里塞</span>
</span></span><span class=line><span class=cl>        <span class=n>queue</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>moyu</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>queue</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>queue_pool</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>multiprocessing</span> <span class=kn>import</span> <span class=n>Process</span>
</span></span><span class=line><span class=cl><span class=c1>## 使用 Process 这个类来创建进程</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;hello&#34;</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>p</span> <span class=o>=</span> <span class=n>Process</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>f</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=s2>&#34;xiao&#34;</span><span class=p>,))</span>
</span></span><span class=line><span class=cl>    <span class=n>p</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>p</span><span class=o>.</span><span class=n>join</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## -*- encoding: utf-8 -*-</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>multiprocessing</span> <span class=kn>import</span> <span class=n>Pool</span>
</span></span><span class=line><span class=cl><span class=c1>## 使用进程池的方式</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span> <span class=o>*</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=n>Pool</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span> <span class=k>as</span> <span class=n>p</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>p</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>f</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]))</span></span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=python启动一个本地服务><span>Python启动一个本地服务</span>
<a href=#python%e5%90%af%e5%8a%a8%e4%b8%80%e4%b8%aa%e6%9c%ac%e5%9c%b0%e6%9c%8d%e5%8a%a1 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python -m http.server <span class=m>8888</span></span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=python数据可视化><span>Python数据可视化</span>
<a href=#python%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h4 class=heading-element id=画sin和cos线><span>画sin和cos线</span>
<a href=#%e7%94%bbsin%e5%92%8ccos%e7%ba%bf class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linspace</span><span class=p>(</span><span class=o>-</span><span class=n>np</span><span class=o>.</span><span class=n>pi</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>pi</span><span class=p>,</span> <span class=mi>256</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cos</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>cos</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sin</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>sin</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>cos</span><span class=p>,</span> <span class=s2>&#34;--&#34;</span><span class=p>,</span> <span class=n>linewidth</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>sin</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=画个饼图><span>画个饼图</span>
<a href=#%e7%94%bb%e4%b8%aa%e9%a5%bc%e5%9b%be class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## Pie chart, where the slices will be ordered and plotted counter-clockwise:</span>
</span></span><span class=line><span class=cl><span class=n>labels</span> <span class=o>=</span> <span class=s2>&#34;Frogs&#34;</span><span class=p>,</span> <span class=s2>&#34;Hogs&#34;</span><span class=p>,</span> <span class=s2>&#34;Dogs&#34;</span><span class=p>,</span> <span class=s2>&#34;Logs&#34;</span>
</span></span><span class=line><span class=cl><span class=n>sizes</span> <span class=o>=</span> <span class=p>[</span><span class=mi>15</span><span class=p>,</span> <span class=mi>30</span><span class=p>,</span> <span class=mi>45</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>explode</span> <span class=o>=</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## only &#34;explode&#34; the 2nd slice (i.e. &#39;Hogs&#39;)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fig1</span><span class=p>,</span> <span class=n>ax1</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>ax1</span><span class=o>.</span><span class=n>pie</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>sizes</span><span class=p>,</span> <span class=n>explode</span><span class=o>=</span><span class=n>explode</span><span class=p>,</span> <span class=n>labels</span><span class=o>=</span><span class=n>labels</span><span class=p>,</span> <span class=n>autopct</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>%1.1f%%</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>shadow</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>startangle</span><span class=o>=</span><span class=mi>90</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax1</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s2>&#34;equal&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## Equal aspect ratio ensures that pie is drawn as a circle.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=画直方图><span>画直方图</span>
<a href=#%e7%94%bb%e7%9b%b4%e6%96%b9%e5%9b%be class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>seed</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>mu</span> <span class=o>=</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl><span class=n>sigma</span> <span class=o>=</span> <span class=mi>25</span>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>normal</span><span class=p>(</span><span class=n>mu</span><span class=p>,</span> <span class=n>sigma</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=p>,</span> <span class=p>(</span><span class=n>ax0</span><span class=p>,</span> <span class=n>ax1</span><span class=p>)</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=n>ncols</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=mi>4</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ax0</span><span class=o>.</span><span class=n>hist</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=n>density</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>histtype</span><span class=o>=</span><span class=s2>&#34;stepfilled&#34;</span><span class=p>,</span> <span class=n>facecolor</span><span class=o>=</span><span class=s2>&#34;g&#34;</span><span class=p>,</span> <span class=n>alpha</span><span class=o>=</span><span class=mf>0.75</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax0</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>&#34;stepfilled&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## Create a histogram by providing the bin edges (unequally spaced).</span>
</span></span><span class=line><span class=cl><span class=n>bins</span> <span class=o>=</span> <span class=p>[</span><span class=mi>100</span><span class=p>,</span> <span class=mi>150</span><span class=p>,</span> <span class=mi>180</span><span class=p>,</span> <span class=mi>195</span><span class=p>,</span> <span class=mi>205</span><span class=p>,</span> <span class=mi>220</span><span class=p>,</span> <span class=mi>250</span><span class=p>,</span> <span class=mi>300</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>ax1</span><span class=o>.</span><span class=n>hist</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>bins</span><span class=p>,</span> <span class=n>density</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>histtype</span><span class=o>=</span><span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=n>rwidth</span><span class=o>=</span><span class=mf>0.8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax1</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s2>&#34;unequal bins&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=o>.</span><span class=n>tight_layout</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=画散点图><span>画散点图</span>
<a href=#%e7%94%bb%e6%95%a3%e7%82%b9%e5%9b%be class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>seaborn</span> <span class=k>as</span> <span class=nn>sns</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>sns</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>style</span><span class=o>=</span><span class=s2>&#34;darkgrid&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>tips</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>load_dataset</span><span class=p>(</span><span class=s2>&#34;tips&#34;</span><span class=p>,</span> <span class=n>data_home</span><span class=o>=</span><span class=s2>&#34;seaborn-data&#34;</span><span class=p>,</span> <span class=n>cache</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## name: str，代表数据集名字；</span>
</span></span><span class=line><span class=cl><span class=c1>## cache: boolean，当为True时，从本地加载数据，反之则从网上下载；</span>
</span></span><span class=line><span class=cl><span class=c1>## data_home: string，代表本地数据的路径</span>
</span></span><span class=line><span class=cl><span class=n>sns</span><span class=o>.</span><span class=n>relplot</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s2>&#34;total_bill&#34;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s2>&#34;tip&#34;</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>tips</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=画折线图><span>画折线图</span>
<a href=#%e7%94%bb%e6%8a%98%e7%ba%bf%e5%9b%be class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>seaborn</span> <span class=k>as</span> <span class=nn>sns</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>sns</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>style</span><span class=o>=</span><span class=s2>&#34;darkgrid&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fmri</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>load_dataset</span><span class=p>(</span><span class=s2>&#34;fmri&#34;</span><span class=p>,</span> <span class=n>data_home</span><span class=o>=</span><span class=s2>&#34;seaborn-data&#34;</span><span class=p>,</span> <span class=n>cache</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sns</span><span class=o>.</span><span class=n>relplot</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s2>&#34;timepoint&#34;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s2>&#34;signal&#34;</span><span class=p>,</span> <span class=n>hue</span><span class=o>=</span><span class=s2>&#34;event&#34;</span><span class=p>,</span> <span class=n>kind</span><span class=o>=</span><span class=s2>&#34;line&#34;</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>fmri</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=画直方图-1><span>画直方图</span>
<a href=#%e7%94%bb%e7%9b%b4%e6%96%b9%e5%9b%be-1 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>seaborn</span> <span class=k>as</span> <span class=nn>sns</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>sns</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>style</span><span class=o>=</span><span class=s2>&#34;darkgrid&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>titanic</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>load_dataset</span><span class=p>(</span><span class=s2>&#34;titanic&#34;</span><span class=p>,</span> <span class=n>data_home</span><span class=o>=</span><span class=s2>&#34;seaborn-data&#34;</span><span class=p>,</span> <span class=n>cache</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sns</span><span class=o>.</span><span class=n>catplot</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s2>&#34;sex&#34;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s2>&#34;survived&#34;</span><span class=p>,</span> <span class=n>hue</span><span class=o>=</span><span class=s2>&#34;class&#34;</span><span class=p>,</span> <span class=n>kind</span><span class=o>=</span><span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>titanic</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=pyecharts><span>pyecharts</span>
<a href=#pyecharts class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>直方图</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pyecharts.charts</span> <span class=kn>import</span> <span class=n>Bar</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pyecharts</span> <span class=kn>import</span> <span class=n>options</span> <span class=k>as</span> <span class=n>opts</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bar</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>Bar</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>add_xaxis</span><span class=p>([</span><span class=s2>&#34;衬衫&#34;</span><span class=p>,</span> <span class=s2>&#34;毛衣&#34;</span><span class=p>,</span> <span class=s2>&#34;领带&#34;</span><span class=p>,</span> <span class=s2>&#34;裤子&#34;</span><span class=p>,</span> <span class=s2>&#34;风衣&#34;</span><span class=p>,</span> <span class=s2>&#34;高跟鞋&#34;</span><span class=p>,</span> <span class=s2>&#34;袜子&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>add_yaxis</span><span class=p>(</span><span class=s2>&#34;商家A&#34;</span><span class=p>,</span> <span class=p>[</span><span class=mi>114</span><span class=p>,</span> <span class=mi>55</span><span class=p>,</span> <span class=mi>27</span><span class=p>,</span> <span class=mi>101</span><span class=p>,</span> <span class=mi>125</span><span class=p>,</span> <span class=mi>27</span><span class=p>,</span> <span class=mi>105</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>add_yaxis</span><span class=p>(</span><span class=s2>&#34;商家B&#34;</span><span class=p>,</span> <span class=p>[</span><span class=mi>57</span><span class=p>,</span> <span class=mi>134</span><span class=p>,</span> <span class=mi>137</span><span class=p>,</span> <span class=mi>129</span><span class=p>,</span> <span class=mi>145</span><span class=p>,</span> <span class=mi>60</span><span class=p>,</span> <span class=mi>49</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=n>set_global_opts</span><span class=p>(</span><span class=n>title_opts</span><span class=o>=</span><span class=n>opts</span><span class=o>.</span><span class=n>TitleOpts</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s2>&#34;某商场销售情况&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>bar</span><span class=o>.</span><span class=n>render</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>饼图</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pyecharts</span> <span class=kn>import</span> <span class=n>options</span> <span class=k>as</span> <span class=n>opts</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pyecharts.charts</span> <span class=kn>import</span> <span class=n>Bar</span><span class=p>,</span> <span class=n>WordCloud</span><span class=p>,</span> <span class=n>Pie</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pyecharts.faker</span> <span class=kn>import</span> <span class=n>Faker</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pyecharts.render</span> <span class=kn>import</span> <span class=n>make_snapshot</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>snapshot_selenium</span> <span class=kn>import</span> <span class=n>snapshot</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>pie_base</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>Pie</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>Pie</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=p>[</span><span class=nb>list</span><span class=p>(</span><span class=n>z</span><span class=p>)</span> <span class=k>for</span> <span class=n>z</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>Faker</span><span class=o>.</span><span class=n>choose</span><span class=p>(),</span> <span class=n>Faker</span><span class=o>.</span><span class=n>values</span><span class=p>())])</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>set_global_opts</span><span class=p>(</span><span class=n>title_opts</span><span class=o>=</span><span class=n>opts</span><span class=o>.</span><span class=n>TitleOpts</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s2>&#34;Pie-基本示例&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>set_series_opts</span><span class=p>(</span><span class=n>label_opts</span><span class=o>=</span><span class=n>opts</span><span class=o>.</span><span class=n>LabelOpts</span><span class=p>(</span><span class=n>formatter</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>{b}</span><span class=s2>: </span><span class=si>{c}</span><span class=s2>&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>c</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 需要安装 snapshot_selenium</span>
</span></span><span class=line><span class=cl><span class=n>make_snapshot</span><span class=p>(</span><span class=n>snapshot</span><span class=p>,</span> <span class=n>pie_base</span><span class=p>()</span><span class=o>.</span><span class=n>render</span><span class=p>(),</span> <span class=s2>&#34;pie.png&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>词云图</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pyecharts</span> <span class=kn>import</span> <span class=n>options</span> <span class=k>as</span> <span class=n>opts</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pyecharts.charts</span> <span class=kn>import</span> <span class=n>Bar</span><span class=p>,</span> <span class=n>WordCloud</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pyecharts.render</span> <span class=kn>import</span> <span class=n>make_snapshot</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>snapshot_selenium</span> <span class=kn>import</span> <span class=n>snapshot</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>words</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Sam S Club&#34;</span><span class=p>,</span> <span class=mi>10000</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Macys&#34;</span><span class=p>,</span> <span class=mi>6181</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Amy Schumer&#34;</span><span class=p>,</span> <span class=mi>4386</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Jurassic World&#34;</span><span class=p>,</span> <span class=mi>4055</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Charter Communications&#34;</span><span class=p>,</span> <span class=mi>2467</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Chick Fil A&#34;</span><span class=p>,</span> <span class=mi>2244</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Planet Fitness&#34;</span><span class=p>,</span> <span class=mi>1868</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Pitch Perfect&#34;</span><span class=p>,</span> <span class=mi>1484</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Express&#34;</span><span class=p>,</span> <span class=mi>1112</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Home&#34;</span><span class=p>,</span> <span class=mi>865</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Johnny Depp&#34;</span><span class=p>,</span> <span class=mi>847</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Lena Dunham&#34;</span><span class=p>,</span> <span class=mi>582</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Lewis Hamilton&#34;</span><span class=p>,</span> <span class=mi>555</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;KXAN&#34;</span><span class=p>,</span> <span class=mi>550</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Mary Ellen Mark&#34;</span><span class=p>,</span> <span class=mi>462</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Farrah Abraham&#34;</span><span class=p>,</span> <span class=mi>366</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Rita Ora&#34;</span><span class=p>,</span> <span class=mi>360</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Serena Williams&#34;</span><span class=p>,</span> <span class=mi>282</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;NCAA baseball tournament&#34;</span><span class=p>,</span> <span class=mi>273</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;Point Break&#34;</span><span class=p>,</span> <span class=mi>265</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>wordcloud_base</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>WordCloud</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>WordCloud</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=n>words</span><span class=p>,</span> <span class=n>word_size_range</span><span class=o>=</span><span class=p>[</span><span class=mi>20</span><span class=p>,</span> <span class=mi>100</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=n>set_global_opts</span><span class=p>(</span><span class=n>title_opts</span><span class=o>=</span><span class=n>opts</span><span class=o>.</span><span class=n>TitleOpts</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s2>&#34;WordCloud-基本示例&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>c</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 需要安装 snapshot_selenium</span>
</span></span><span class=line><span class=cl><span class=n>make_snapshot</span><span class=p>(</span><span class=n>snapshot</span><span class=p>,</span> <span class=n>wordcloud_base</span><span class=p>()</span><span class=o>.</span><span class=n>render</span><span class=p>(),</span> <span class=s2>&#34;WordCloud.png&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=object-oriented-programe><span>Object-Oriented-Programe</span>
<a href=#object-oriented-programe class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#运算符重载</span>
</span></span><span class=line><span class=cl><span class=c1>## -*- encoding: utf-8 -*-</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>@File    :   运算符重载.py
</span></span></span><span class=line><span class=cl><span class=s1>@Time    :   2022/11/16 17:23:01
</span></span></span><span class=line><span class=cl><span class=s1>@Author  :   Lunatic 
</span></span></span><span class=line><span class=cl><span class=s1>@Version :   1.0
</span></span></span><span class=line><span class=cl><span class=s1>@Contact :   goodlunatic0@gmail.com
</span></span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Vector</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>a</span> <span class=o>=</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>b</span> <span class=o>=</span> <span class=n>b</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s1>&#39;Vector (</span><span class=si>%d</span><span class=s1>, </span><span class=si>%d</span><span class=s1>)&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>a</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__add__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Vector</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>a</span> <span class=o>+</span> <span class=n>other</span><span class=o>.</span><span class=n>a</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>b</span> <span class=o>+</span> <span class=n>other</span><span class=o>.</span><span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>v1</span> <span class=o>=</span> <span class=n>Vector</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>v2</span> <span class=o>=</span> <span class=n>Vector</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=o>-</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>v1</span> <span class=o>+</span> <span class=n>v2</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#demo1</span>
</span></span><span class=line><span class=cl><span class=c1>## -*- encoding: utf-8 -*-</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>@File    :   demo.py
</span></span></span><span class=line><span class=cl><span class=s1>@Time    :   2022/11/14 19:16:38
</span></span></span><span class=line><span class=cl><span class=s1>@Author  :   Lunatic 
</span></span></span><span class=line><span class=cl><span class=s1>@Version :   1.0
</span></span></span><span class=line><span class=cl><span class=s1>@Contact :   goodlunatic0@gmail.com
</span></span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Employee</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;所有员工的基类&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>empCount</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>## empCount是一个类变量，它的值将在这个类的所有实例之间共享。可以在内部类或外部类使用 Employee.empCount 访问</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>salary</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>salary</span> <span class=o>=</span> <span class=n>salary</span>
</span></span><span class=line><span class=cl>        <span class=n>Employee</span><span class=o>.</span><span class=n>empCount</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>## 这个方法被称为类的构造函数或初始化方法，当创建了这个类的实例时就会调用该方法</span>
</span></span><span class=line><span class=cl>    <span class=c1>## self 代表类的实例，self 在定义类的方法时是必须有的，虽然在调用时不必传入相应的参数</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>displayCount</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Total Empolyee </span><span class=si>%d</span><span class=s2>&#34;</span> <span class=o>%</span> <span class=n>Employee</span><span class=o>.</span><span class=n>empCount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>displayEmployee</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Name:&#34;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=s2>&#34;,Salary: &#34;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>salary</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Test</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>prt</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## t = Test()  #&lt;__main__.Test object at 0x000002C122827880&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>## t.prt()  #&lt;class &#39;__main__.Test&#39;&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 创建实例对象</span>
</span></span><span class=line><span class=cl><span class=c1>## &#34;创建 Employee 类的第一个对象emp1&#34;</span>
</span></span><span class=line><span class=cl><span class=n>emp1</span> <span class=o>=</span> <span class=n>Employee</span><span class=p>(</span><span class=s2>&#34;zara&#34;</span><span class=p>,</span> <span class=mi>2000</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>emp2</span> <span class=o>=</span> <span class=n>Employee</span><span class=p>(</span><span class=s2>&#34;manni&#34;</span><span class=p>,</span> <span class=mi>5000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>emp1</span><span class=o>.</span><span class=n>displayEmployee</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>emp2</span><span class=o>.</span><span class=n>displayEmployee</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Total Employee </span><span class=si>%d</span><span class=s2>&#34;</span> <span class=o>%</span> <span class=n>Employee</span><span class=o>.</span><span class=n>empCount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>emp1</span><span class=o>.</span><span class=n>age</span> <span class=o>=</span> <span class=mi>7</span>
</span></span><span class=line><span class=cl><span class=n>emp2</span><span class=o>.</span><span class=n>age</span> <span class=o>=</span> <span class=mi>8</span>
</span></span><span class=line><span class=cl><span class=k>del</span> <span class=n>emp1</span><span class=o>.</span><span class=n>age</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;age=&#34;</span><span class=p>,</span> <span class=n>emp2</span><span class=o>.</span><span class=n>age</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## hasattr(emp2, &#39;age&#39;)</span>
</span></span><span class=line><span class=cl><span class=c1>## 检查是否存在一个属性</span>
</span></span><span class=line><span class=cl><span class=c1>## getattr(emp2, &#39;age&#39;)</span>
</span></span><span class=line><span class=cl><span class=c1>## 访问对象的属性</span>
</span></span><span class=line><span class=cl><span class=c1>## setattr(emp2, &#39;age&#39;)</span>
</span></span><span class=line><span class=cl><span class=c1>## 设置一个属性。如果属性不存在，会创建一个新属性</span>
</span></span><span class=line><span class=cl><span class=c1>## delattr(emp2, &#39;age&#39;)</span>
</span></span><span class=line><span class=cl><span class=c1>## 删除属性</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Employee.__doc__:&#34;</span><span class=p>,</span> <span class=n>Employee</span><span class=o>.</span><span class=vm>__doc__</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Empolyee.__name__:&#34;</span><span class=p>,</span> <span class=n>Employee</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Employee.__module__:&#34;</span><span class=p>,</span> <span class=n>Employee</span><span class=o>.</span><span class=vm>__module__</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Employee.__bases__:&#34;</span><span class=p>,</span> <span class=n>Employee</span><span class=o>.</span><span class=vm>__bases__</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Employee.__dict__:&#34;</span><span class=p>,</span> <span class=n>Employee</span><span class=o>.</span><span class=vm>__dict__</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#demo2</span>
</span></span><span class=line><span class=cl><span class=c1>## -*- coding: UTF-8 -*-</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Point</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>y</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__del__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>class_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>class_name</span><span class=p>,</span> <span class=s2>&#34;销毁&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>pt1</span> <span class=o>=</span> <span class=n>Point</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>pt2</span> <span class=o>=</span> <span class=n>pt1</span>
</span></span><span class=line><span class=cl><span class=n>pt3</span> <span class=o>=</span> <span class=n>pt1</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>pt1</span><span class=p>),</span> <span class=nb>id</span><span class=p>(</span><span class=n>pt2</span><span class=p>),</span> <span class=nb>id</span><span class=p>(</span><span class=n>pt3</span><span class=p>))</span>  <span class=c1>## 打印对象的id</span>
</span></span><span class=line><span class=cl><span class=k>del</span> <span class=n>pt1</span>
</span></span><span class=line><span class=cl><span class=k>del</span> <span class=n>pt2</span>
</span></span><span class=line><span class=cl><span class=k>del</span> <span class=n>pt3</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#demo3</span>
</span></span><span class=line><span class=cl><span class=c1>## -*- coding: UTF-8 -*-</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Parent</span><span class=p>:</span>  <span class=c1>## 定义父类</span>
</span></span><span class=line><span class=cl>    <span class=n>parentAttr</span> <span class=o>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;调用父类构造函数&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>parentMethod</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;调用父类方法&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>setAttr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>attr</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>Parent</span><span class=o>.</span><span class=n>parentAttr</span> <span class=o>=</span> <span class=n>attr</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>getAttr</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;父类属性 :&#34;</span><span class=p>,</span> <span class=n>Parent</span><span class=o>.</span><span class=n>parentAttr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>myMethod</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;调用父类方法&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Child</span><span class=p>(</span><span class=n>Parent</span><span class=p>):</span>  <span class=c1>## 定义子类</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;调用子类构造方法&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>childMethod</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;调用子类方法&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>myMethod</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;调用子类方法&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=n>Child</span><span class=p>()</span>  <span class=c1>## 实例化子类</span>
</span></span><span class=line><span class=cl><span class=n>c</span><span class=o>.</span><span class=n>childMethod</span><span class=p>()</span>  <span class=c1>## 调用子类的方法</span>
</span></span><span class=line><span class=cl><span class=n>c</span><span class=o>.</span><span class=n>parentMethod</span><span class=p>()</span>  <span class=c1>## 调用父类方法</span>
</span></span><span class=line><span class=cl><span class=n>c</span><span class=o>.</span><span class=n>setAttr</span><span class=p>(</span><span class=mi>200</span><span class=p>)</span>  <span class=c1>## 再次调用父类的方法 - 设置属性值</span>
</span></span><span class=line><span class=cl><span class=n>c</span><span class=o>.</span><span class=n>getAttr</span><span class=p>()</span>  <span class=c1>## 再次调用父类的方法 - 获取属性值</span>
</span></span><span class=line><span class=cl><span class=n>c</span><span class=o>.</span><span class=n>myMethod</span><span class=p>()</span>  <span class=c1>#在子类重写父类的方法</span></span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=人工智能><span>人工智能</span>
<a href=#%e4%ba%ba%e5%b7%a5%e6%99%ba%e8%83%bd class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p><strong>详见博客中 Artificial Intelligence 这篇文章</strong></p><h2 class=heading-element id=数字图像处理><span>数字图像处理</span>
<a href=#%e6%95%b0%e5%ad%97%e5%9b%be%e5%83%8f%e5%a4%84%e7%90%86 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h4 class=heading-element id=基于opencv的svm算法识别手写数字><span>基于opencv的svm算法识别手写数字</span>
<a href=#%e5%9f%ba%e4%ba%8eopencv%e7%9a%84svm%e7%ae%97%e6%b3%95%e8%af%86%e5%88%ab%e6%89%8b%e5%86%99%e6%95%b0%e5%ad%97 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p><strong>训练模型</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>cv2</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>keras.datasets</span> <span class=kn>import</span> <span class=n>mnist</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>keras</span> <span class=kn>import</span> <span class=n>utils</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 使用 Keras 载入训练数据</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=n>train_images</span><span class=p>,</span> <span class=n>train_labels</span><span class=p>),</span> <span class=p>(</span><span class=n>test_images</span><span class=p>,</span> <span class=n>test_labels</span><span class=p>)</span> <span class=o>=</span> <span class=n>mnist</span><span class=o>.</span><span class=n>load_data</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1>## print(train_images.shape)  ## (60000, 28, 28) 60000个样本、每个样本的宽高是28*28</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 变换数据的形状并归一化,将每张图像转换成了一个长度为 784 的一维数组</span>
</span></span><span class=line><span class=cl>    <span class=n>train_images</span> <span class=o>=</span> <span class=n>train_images</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=n>train_images</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## print(train_images.shape)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 将数据类型转换为 float32 类型</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 因为像素值原本的范围是 0 到 255，所以除以 255 可以将它们归一化到 0 到 1 之间</span>
</span></span><span class=line><span class=cl>    <span class=n>train_images</span> <span class=o>=</span> <span class=n>train_images</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=s1>&#39;float32&#39;</span><span class=p>)</span> <span class=o>/</span> <span class=mi>255</span>
</span></span><span class=line><span class=cl>    <span class=n>test_images</span> <span class=o>=</span> <span class=n>test_images</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=n>test_images</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>test_images</span> <span class=o>=</span> <span class=n>test_images</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=s1>&#39;float32&#39;</span><span class=p>)</span> <span class=o>/</span> <span class=mi>255</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>## print(train_labels)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 将标签数据转为int32 并且形状为(60000,1)</span>
</span></span><span class=line><span class=cl>    <span class=n>train_labels</span> <span class=o>=</span> <span class=n>train_labels</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>int32</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>test_labels</span> <span class=o>=</span> <span class=n>test_labels</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>int32</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 将 train_labels 的形状重新塑形为一个二维数组，第一维度填-1即让numpy自动计算</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 第二维度填1即每个样本的标签数量为 1</span>
</span></span><span class=line><span class=cl>    <span class=n>train_labels</span> <span class=o>=</span> <span class=n>train_labels</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>test_labels</span> <span class=o>=</span> <span class=n>test_labels</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## print(train_labels)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 创建svm模型</span>
</span></span><span class=line><span class=cl>    <span class=n>svm</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>ml</span><span class=o>.</span><span class=n>SVM_create</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 设置类型为SVM_C_SVC代表分类</span>
</span></span><span class=line><span class=cl>    <span class=n>svm</span><span class=o>.</span><span class=n>setType</span><span class=p>(</span><span class=n>cv2</span><span class=o>.</span><span class=n>ml</span><span class=o>.</span><span class=n>SVM_C_SVC</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 设置核函数</span>
</span></span><span class=line><span class=cl>    <span class=n>svm</span><span class=o>.</span><span class=n>setKernel</span><span class=p>(</span><span class=n>cv2</span><span class=o>.</span><span class=n>ml</span><span class=o>.</span><span class=n>SVM_POLY</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 设置其他参数</span>
</span></span><span class=line><span class=cl>    <span class=n>svm</span><span class=o>.</span><span class=n>setGamma</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>svm</span><span class=o>.</span><span class=n>setDegree</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 设置迭代终止条件</span>
</span></span><span class=line><span class=cl>    <span class=n>svm</span><span class=o>.</span><span class=n>setTermCriteria</span><span class=p>((</span><span class=n>cv2</span><span class=o>.</span><span class=n>TermCriteria_MAX_ITER</span><span class=p>,</span> <span class=mi>300</span><span class=p>,</span> <span class=mf>1e-3</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 开始训练</span>
</span></span><span class=line><span class=cl>    <span class=n>svm</span><span class=o>.</span><span class=n>train</span><span class=p>(</span><span class=n>train_images</span><span class=p>,</span> <span class=n>cv2</span><span class=o>.</span><span class=n>ml</span><span class=o>.</span><span class=n>ROW_SAMPLE</span><span class=p>,</span> <span class=n>train_labels</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>svm</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;mnist_svm.xml&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 在测试集上对模型准确度进行测试,第一个值为数据1的预测结果</span>
</span></span><span class=line><span class=cl>    <span class=n>test_pre</span> <span class=o>=</span> <span class=n>svm</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=n>test_images</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>test_pre</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>test_ret</span> <span class=o>=</span> <span class=n>test_pre</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=c1>## print(test_ret)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 计算准确率</span>
</span></span><span class=line><span class=cl>    <span class=n>test_ret</span> <span class=o>=</span> <span class=n>test_ret</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,)</span>
</span></span><span class=line><span class=cl>    <span class=n>test_labels</span> <span class=o>=</span> <span class=n>test_labels</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 比较相同位置的两个元素是否相等，会生成一个bool数组</span>
</span></span><span class=line><span class=cl>    <span class=n>test_sum</span> <span class=o>=</span> <span class=p>(</span><span class=n>test_ret</span> <span class=o>==</span> <span class=n>test_labels</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>## print(test_sum)</span>
</span></span><span class=line><span class=cl>    <span class=n>acc</span> <span class=o>=</span> <span class=n>test_sum</span><span class=o>.</span><span class=n>mean</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>acc</span><span class=p>)</span>  <span class=c1>## 0.9687</span></span></span></code></pre></td></tr></table></div></div><p><strong>预测手写数字</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>cv2</span> <span class=k>as</span> <span class=nn>cv</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>img0</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>imread</span><span class=p>(</span><span class=s1>&#39;test.png&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 显示图像，2是窗口名称，img0是要显示的图像对象</span>
</span></span><span class=line><span class=cl><span class=c1>## cv.imshow(&#39;img0&#39;, img0)</span>
</span></span><span class=line><span class=cl><span class=c1>## 使窗口等待用户按下任意键。参数 0 表示无限期等待用户的按键输入。</span>
</span></span><span class=line><span class=cl><span class=c1>## cv.waitKey(0)</span>
</span></span><span class=line><span class=cl><span class=c1>## 图像二值化</span>
</span></span><span class=line><span class=cl><span class=n>ret</span><span class=p>,</span> <span class=n>img1</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>threshold</span><span class=p>(</span><span class=n>img0</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>255</span><span class=p>,</span> <span class=n>cv</span><span class=o>.</span><span class=n>THRESH_BINARY_INV</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## cv.imshow(&#39;2&#39;, img1)</span>
</span></span><span class=line><span class=cl><span class=c1>## cv.waitKey(0)</span>
</span></span><span class=line><span class=cl><span class=c1>## 创建一个3x3的矩形核，用于图像膨胀</span>
</span></span><span class=line><span class=cl><span class=n>kernel1</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>ones</span><span class=p>((</span><span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>),</span> <span class=n>np</span><span class=o>.</span><span class=n>uint8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>img2</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>dilate</span><span class=p>(</span><span class=n>img1</span><span class=p>,</span> <span class=n>kernel1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## cv.imshow(&#34;img2&#34;,img2)</span>
</span></span><span class=line><span class=cl><span class=c1>## cv.waitKey(0)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 剔除小连通域(噪点)</span>
</span></span><span class=line><span class=cl><span class=c1>## 函数返回检测到的轮廓列表 contours 和层级信息 hierarchy</span>
</span></span><span class=line><span class=cl><span class=n>contours</span><span class=p>,</span> <span class=n>hierarchy</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>findContours</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>img2</span><span class=p>,</span> <span class=n>cv</span><span class=o>.</span><span class=n>RETR_EXTERNAL</span><span class=p>,</span> <span class=n>cv</span><span class=o>.</span><span class=n>CHAIN_APPROX_NONE</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>contours</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=n>area</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>contourArea</span><span class=p>(</span><span class=n>contours</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 设定连通域最小阈值，小于该值被清理(填充为黑色)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>area</span> <span class=o>&lt;</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>cv</span><span class=o>.</span><span class=n>drawContours</span><span class=p>(</span><span class=n>img2</span><span class=p>,</span> <span class=p>[</span><span class=n>contours</span><span class=p>[</span><span class=n>i</span><span class=p>]],</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 再次进行膨胀</span>
</span></span><span class=line><span class=cl><span class=n>kernel2</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>ones</span><span class=p>((</span><span class=mi>15</span><span class=p>,</span> <span class=mi>15</span><span class=p>),</span> <span class=n>np</span><span class=o>.</span><span class=n>uint8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>img3</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>dilate</span><span class=p>(</span><span class=n>img2</span><span class=p>,</span> <span class=n>kernel2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## roi提取</span>
</span></span><span class=line><span class=cl><span class=n>contours</span><span class=p>,</span> <span class=n>hierarchy</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>findContours</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>img3</span><span class=p>,</span> <span class=n>cv</span><span class=o>.</span><span class=n>RETR_LIST</span><span class=p>,</span> <span class=n>cv</span><span class=o>.</span><span class=n>CHAIN_APPROX_SIMPLE</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>w</span><span class=p>,</span> <span class=n>h</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>boundingRect</span><span class=p>(</span><span class=n>contours</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl><span class=n>brcnt</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[[</span><span class=n>x</span><span class=o>-</span><span class=n>a</span><span class=p>,</span> <span class=n>y</span><span class=o>-</span><span class=n>a</span><span class=p>]],</span> <span class=p>[[</span><span class=n>x</span><span class=o>+</span><span class=n>w</span><span class=o>+</span><span class=n>a</span><span class=p>,</span> <span class=n>y</span><span class=o>-</span><span class=n>a</span><span class=p>]],</span>
</span></span><span class=line><span class=cl>                 <span class=p>[[</span><span class=n>x</span><span class=o>+</span><span class=n>w</span><span class=o>+</span><span class=n>a</span><span class=p>,</span> <span class=n>y</span><span class=o>+</span><span class=n>h</span><span class=o>+</span><span class=n>a</span><span class=p>]],</span> <span class=p>[[</span><span class=n>x</span><span class=o>-</span><span class=n>a</span><span class=p>,</span> <span class=n>y</span><span class=o>+</span><span class=n>h</span><span class=o>+</span><span class=n>a</span><span class=p>]]])</span>
</span></span><span class=line><span class=cl><span class=n>cv</span><span class=o>.</span><span class=n>drawContours</span><span class=p>(</span><span class=n>img3</span><span class=p>,</span> <span class=p>[</span><span class=n>brcnt</span><span class=p>],</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=p>(</span><span class=mi>255</span><span class=p>,</span> <span class=mi>255</span><span class=p>,</span> <span class=mi>255</span><span class=p>),</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## cv.imshow(&#39;img3&#39;, img3)</span>
</span></span><span class=line><span class=cl><span class=c1>## cv.waitKey(0)</span>
</span></span><span class=line><span class=cl><span class=c1>## img4就是提取roi后的图片</span>
</span></span><span class=line><span class=cl><span class=n>img4</span> <span class=o>=</span> <span class=n>img3</span><span class=p>[</span><span class=n>y</span><span class=o>-</span><span class=n>a</span><span class=p>:</span><span class=n>y</span><span class=o>+</span><span class=n>h</span><span class=o>+</span><span class=n>a</span><span class=p>,</span> <span class=n>x</span><span class=o>-</span><span class=n>a</span><span class=p>:</span><span class=n>x</span><span class=o>+</span><span class=n>w</span><span class=o>+</span><span class=n>a</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=c1>## cv.imshow(&#39;img4&#39;, img4)</span>
</span></span><span class=line><span class=cl><span class=c1>## cv.waitKey(0)</span>
</span></span><span class=line><span class=cl><span class=n>img5</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>resize</span><span class=p>(</span><span class=n>img4</span><span class=p>,</span> <span class=p>(</span><span class=mi>28</span><span class=p>,</span> <span class=mi>28</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>## cv.imshow(&#39;img5&#39;, img5)</span>
</span></span><span class=line><span class=cl><span class=c1>## cv.waitKey(0)</span>
</span></span><span class=line><span class=cl><span class=n>cv</span><span class=o>.</span><span class=n>imwrite</span><span class=p>(</span><span class=s1>&#39;img5.png&#39;</span><span class=p>,</span> <span class=n>img5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 这里就是读取预处理好的图片了</span>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>imread</span><span class=p>(</span><span class=s1>&#39;img5.png&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 将数据类型由uint8转为float32</span>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>img</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>float32</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 图片形状由(28,28)转为(784,)</span>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>img</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,)</span>
</span></span><span class=line><span class=cl><span class=c1>## 增加一个维度变为(1,784)</span>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>img</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 图片数据归一化</span>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>img</span><span class=o>/</span><span class=mi>255</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 载入svm模型</span>
</span></span><span class=line><span class=cl><span class=n>svm</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>ml</span><span class=o>.</span><span class=n>SVM_load</span><span class=p>(</span><span class=s1>&#39;mnist_svm.xml&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## 进行预测</span>
</span></span><span class=line><span class=cl><span class=n>img_pre</span> <span class=o>=</span> <span class=n>svm</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>img_pre</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span></span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=利用python进行自动化处理><span>利用Python进行自动化处理</span>
<a href=#%e5%88%a9%e7%94%a8python%e8%bf%9b%e8%a1%8c%e8%87%aa%e5%8a%a8%e5%8c%96%e5%a4%84%e7%90%86 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h4 class=heading-element id=1读取指定目录下的文件列表并按照数字顺序排列><span>1.读取指定目录下的文件列表，并按照数字顺序排列</span>
<a href=#1%e8%af%bb%e5%8f%96%e6%8c%87%e5%ae%9a%e7%9b%ae%e5%bd%95%e4%b8%8b%e7%9a%84%e6%96%87%e4%bb%b6%e5%88%97%e8%a1%a8%e5%b9%b6%e6%8c%89%e7%85%a7%e6%95%b0%e5%ad%97%e9%a1%ba%e5%ba%8f%e6%8e%92%e5%88%97 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## -*- encoding: utf-8 -*-</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>filedir</span> <span class=o>=</span> <span class=sa>r</span><span class=s1>&#39;C:\Users\GoodLunatic\Desktop\500\file&#39;</span>
</span></span><span class=line><span class=cl><span class=n>filenames</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>filedir</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>filenames</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=nb>int</span><span class=p>(</span><span class=n>x</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&#34;p&#34;</span><span class=p>)[</span><span class=mi>1</span><span class=p>]))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>filenames</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=2读取目录中的文件并合并到一个文件中><span>2.读取目录中的文件并合并到一个文件中</span>
<a href=#2%e8%af%bb%e5%8f%96%e7%9b%ae%e5%bd%95%e4%b8%ad%e7%9a%84%e6%96%87%e4%bb%b6%e5%b9%b6%e5%90%88%e5%b9%b6%e5%88%b0%e4%b8%80%e4%b8%aa%e6%96%87%e4%bb%b6%e4%b8%ad class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## -*- encoding: utf-8 -*-</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=n>fileobjs</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=n>filedir</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;please input the dir:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>filenames</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>filedir</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>filenames</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=nb>int</span><span class=p>(</span><span class=n>x</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&#34;p&#34;</span><span class=p>)[</span><span class=mi>1</span><span class=p>]))</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>filename</span> <span class=ow>in</span> <span class=n>filenames</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>filename</span> <span class=o>=</span> <span class=n>filedir</span><span class=o>+</span><span class=s1>&#39;</span><span class=se>\\</span><span class=s1>&#39;</span><span class=o>+</span><span class=n>filename</span>
</span></span><span class=line><span class=cl>    <span class=n>fileobjs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## print(fileobjs)</span>
</span></span><span class=line><span class=cl><span class=n>f1</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;flag.txt&#39;</span><span class=p>,</span> <span class=s1>&#39;w+&#39;</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>fileobj</span> <span class=ow>in</span> <span class=n>fileobjs</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>fileobj</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>f</span><span class=o>.</span><span class=n>readlines</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=n>line</span> <span class=o>=</span> <span class=n>line</span><span class=o>.</span><span class=n>strip</span><span class=p>(</span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>f1</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>f</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>f1</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=2压缩包相关zipfile模块><span>2.压缩包相关（zipfile模块）</span>
<a href=#2%e5%8e%8b%e7%bc%a9%e5%8c%85%e7%9b%b8%e5%85%b3zipfile%e6%a8%a1%e5%9d%97 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>zipfile模块常用高度两个类：ZipFile和ZipInfo</p><p>ZipFile：用来创建和读取zip文件</p><p>ZipInfo：读取存储的zip文件中每个文件的信息</p><p>（1）class zipfile.ZipFile(file[, mode[, compression[, allowZip64]]])</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>file-表示文件的路径或类文件对象
</span></span><span class=line><span class=cl>mode-表示打开zip文件的格式，默认值为&#39;r&#39;，但是可以改为&#39;w&#39;,&#39;a&#39;
</span></span><span class=line><span class=cl>compression-表示在写zip文档时所使用的压缩方法：zipfile.ZIP_STORED或zipfile._DEFLATED
</span></span><span class=line><span class=cl>allowZip64-如果要操作的压缩文件大小超过2G，要把allowZip64设为true</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>zipfile</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>filename</span> <span class=o>=</span> <span class=s2>&#34;1.zip&#34;</span>
</span></span><span class=line><span class=cl><span class=n>f</span> <span class=o>=</span> <span class=n>zipfile</span><span class=o>.</span><span class=n>ZipFile</span><span class=p>(</span><span class=n>filename</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>f_name</span> <span class=ow>in</span> <span class=n>f</span><span class=o>.</span><span class=n>namelist</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1>#namelist()会返回一个包含压缩包内所有文件的列表</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>f_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#ZipFile.getinfo()获取zip文件中指定文件的信息</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=o>.</span><span class=n>getinfo</span><span class=p>(</span><span class=s1>&#39;Matryoshka1000.zip&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>#Zipfile.infolist()获取zip文件中所有文件的信息，并返回一个列表</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=o>.</span><span class=n>infolist</span><span class=p>())</span></span></span></code></pre></td></tr></table></div></div><p>ZipFile.extract(member[, path[, pwd]])</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>#将zip文件中的指定文件解压到指定目录
</span></span><span class=line><span class=cl>-member指定要解压的文件名称或者对应的Zipinfo对象
</span></span><span class=line><span class=cl>-path指定了解析文件保存的文件夹</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>zipfile</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>filename</span> <span class=o>=</span> <span class=s2>&#34;2.zip&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>## os.getcwd()返回当前文件运行的路径</span>
</span></span><span class=line><span class=cl><span class=n>f</span> <span class=o>=</span> <span class=n>zipfile</span><span class=o>.</span><span class=n>ZipFile</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>(),</span><span class=n>filename</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>file</span> <span class=ow>in</span> <span class=n>f</span><span class=o>.</span><span class=n>namelist</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1>## 将压缩包中的文件解压到Desktop,这里也可以解压到还未创建的文件夹</span>
</span></span><span class=line><span class=cl>    <span class=c1>## f.extract(file,r&#39;C:\Users\GoodLunatic\Desktop&#39;)</span>
</span></span><span class=line><span class=cl>    <span class=n>f</span><span class=o>.</span><span class=n>extract</span><span class=p>(</span><span class=n>file</span><span class=p>,</span><span class=sa>r</span><span class=s1>&#39;C:\Users\GoodLunatic\Desktop\2&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>f</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>ZipFile.write(filename[, arcname[, compress_type]])</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>#将指定文件添加到zip文件中
</span></span><span class=line><span class=cl>filename-文件路径
</span></span><span class=line><span class=cl>arcname-添加到zip文档之后保存的名称
</span></span><span class=line><span class=cl>compress_type表示压缩方法：zipfile.ZIP_STORED或zipfile.ZIP_DEFLATED</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>zipfile</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=c1>#新建一个3.zip压缩包</span>
</span></span><span class=line><span class=cl><span class=n>zipFile</span> <span class=o>=</span> <span class=n>zipfile</span><span class=o>.</span><span class=n>ZipFile</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;C:\Users\GoodLunatic\Desktop\3.zip&#39;</span><span class=p>,</span><span class=s1>&#39;w&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#将flag.txt名称修改后使用ZIP_DEFLATED算法添加到3.zip</span>
</span></span><span class=line><span class=cl><span class=n>zipFile</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;C:\Users\GoodLunatic\Desktop\flag.txt&#39;</span><span class=p>,</span><span class=s1>&#39;修改后的flag.txt&#39;</span><span class=p>,</span><span class=n>zipfile</span><span class=o>.</span><span class=n>ZIP_DEFLATED</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>zipFile</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>ZipFile.writestr(zinfo_or_arcname, pwd(byte))</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>writestr()支持将二进制数据直接写入到压缩文档
</span></span><span class=line><span class=cl>pwd-解压密码，byte格式</span></span></code></pre></td></tr></table></div></div><p>（2）Class ZipInfo</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ZipFile.getinfo(name) 方法返回的是一个ZipInfo对象，表示zip文档中相应文件的信息。它支持如下属性：
</span></span><span class=line><span class=cl>ZipInfo.filename： 获取文件名称。
</span></span><span class=line><span class=cl>ZipInfo.date_time： 获取文件最后修改时间。返回一个包含6个元素的元组：(年, 月, 日, 时, 分, 秒)
</span></span><span class=line><span class=cl>ZipInfo.compress_type： 压缩类型。
</span></span><span class=line><span class=cl>ZipInfo.comment： 文档说明。
</span></span><span class=line><span class=cl>ZipInfo.extr： 扩展项数据。
</span></span><span class=line><span class=cl>ZipInfo.create_system： 获取创建该zip文档的系统。
</span></span><span class=line><span class=cl>ZipInfo.create_version： 获取 创建zip文档的PKZIP版本。
</span></span><span class=line><span class=cl>ZipInfo.extract_version： 获取 解压zip文档所需的PKZIP版本。
</span></span><span class=line><span class=cl>ZipInfo.reserved： 预留字段，当前实现总是返回0。
</span></span><span class=line><span class=cl>ZipInfo.flag_bits： zip标志位。
</span></span><span class=line><span class=cl>ZipInfo.volume： 文件头的卷标。
</span></span><span class=line><span class=cl>ZipInfo.internal_attr： 内部属性。
</span></span><span class=line><span class=cl>ZipInfo.external_attr： 外部属性。
</span></span><span class=line><span class=cl>ZipInfo.header_offset： 文件头偏移位。
</span></span><span class=line><span class=cl>ZipInfo.CRC： 未压缩文件的CRC-32。
</span></span><span class=line><span class=cl>ZipInfo.compress_size： 获取压缩后的大小。
</span></span><span class=line><span class=cl>ZipInfo.file_size： 获取未压缩的文件大小。</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>#将目录中多个文件添加到压缩包</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>zipfile</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>z</span> <span class=o>=</span> <span class=n>zipfile</span><span class=o>.</span><span class=n>ZipFile</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;C:\Users\GoodLunatic\Desktop\testzip.zip&#39;</span><span class=p>,</span> <span class=s1>&#39;w&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>testdir</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&#34;testdir&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>testdir</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>d</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>testdir</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>z</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>testdir</span><span class=o>+</span><span class=n>os</span><span class=o>.</span><span class=n>sep</span><span class=o>+</span><span class=n>d</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>z</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>ZipFile.extractall([path[, members[, pwd]]])</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>解压zip文档中的所有文件到当前目录。参数members的默认值为zip文档内的所有文件名称列表，也可以自己设置，选择要解压的文件名称</span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=python中各种框架的使用><span>Python中各种框架的使用</span>
<a href=#python%e4%b8%ad%e5%90%84%e7%a7%8d%e6%a1%86%e6%9e%b6%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h4 class=heading-element id=scrapy框架的使用><span>Scrapy框架的使用</span>
<a href=#scrapy%e6%a1%86%e6%9e%b6%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>创建一个爬虫项目</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>scrapy startproject qiushibaike</span></span></code></pre></td></tr></table></div></div><p>然后在spiders目录下创建我们的爬虫代码demo.py</p><p>scrapy 创建出来的文件目录解释</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>spiders目录—
</span></span><span class=line><span class=cl>用来存放我们写的爬虫文件
</span></span><span class=line><span class=cl>items.py—
</span></span><span class=line><span class=cl>用来定义我们要存储数据的字段
</span></span><span class=line><span class=cl>middlewares.py
</span></span><span class=line><span class=cl>中间件，在这里面可以做一些在爬虫过程中想干的事情，比如爬虫在响应的时候你可以做一些操作
</span></span><span class=line><span class=cl>pipelines.py
</span></span><span class=line><span class=cl>来定义一些存储信息的文件，比如我们要连接 MySQL或者 MongoDB 就可以在这里定义
</span></span><span class=line><span class=cl>settings.py
</span></span><span class=line><span class=cl>这个文件用来定义我们的各种配置，比如配置请求头信息等</span></span></code></pre></td></tr></table></div></div><p>运行我们的爬虫</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> qiushibaike/
</span></span><span class=line><span class=cl>scrapy crawl qiushibaike</span></span></code></pre></td></tr></table></div></div><p>可以使用scrapy shell 来请求网页</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>scrapy shell /home/wistbean/PycharmProjects/spider/qiushibaike/qiushi-1.html</span></span></code></pre></td></tr></table></div></div><p>shell 后面可以是你爬下来的 HTML 文件</p><p>也可以是你一个链接</p><p>获取相关数据的命令</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>content_left_div</span> <span class=o>=</span> response.xpath<span class=o>(</span><span class=s1>&#39;//*[@id=&#34;content-left&#34;]&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>content_list_div</span> <span class=o>=</span> content_left_div.xpath<span class=o>(</span><span class=s1>&#39;./div&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>content_div</span> <span class=o>=</span> content_list_div<span class=o>[</span>0<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>author</span> <span class=o>=</span> content_div.xpath<span class=o>(</span><span class=s1>&#39;./div/a[2]/h2/text()&#39;</span><span class=o>)</span>.get<span class=o>()</span>
</span></span><span class=line><span class=cl><span class=nv>content</span> <span class=o>=</span> content_div.xpath<span class=o>(</span><span class=s1>&#39;./a/div/span/text()&#39;</span><span class=o>)</span>.getall<span class=o>()</span></span></span></code></pre></td></tr></table></div></div><p>将爬下来的数据存储为 json 文件</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>scrapy crawl qiushibaike -o qiushibaike.json</span></span></code></pre></td></tr></table></div></div><p>若出现中文乱码，就在setting.py中加一句</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>FEED_EXPORT_ENCODING = &#39;utf-8&#39;</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>scrapy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>Scrapy.qiushibaike.qiushibaike.items</span> <span class=kn>import</span> <span class=n>QiushibaikeItem</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Qiushibaike</span><span class=p>(</span><span class=n>scrapy</span><span class=o>.</span><span class=n>Spider</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=s2>&#34;qiushibaike&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;User-Agent&#34;</span><span class=p>:</span> <span class=s2>&#34;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/73.0.3683.86 Chrome/73.0.3683.86 Safari/537.36&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>start_requests</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>urls</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;https://www.qiushibaike.com/text/page/1/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;https://www.qiushibaike.com/text/page/2/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>url</span> <span class=ow>in</span> <span class=n>urls</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>yield</span> <span class=n>scrapy</span><span class=o>.</span><span class=n>Request</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span> <span class=n>callback</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>parse</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=c1>## 需要返回一个 yield 生成的迭代</span>
</span></span><span class=line><span class=cl>            <span class=c1>## callback = self.parse就是要让它去回调我们的数据解析方法</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>## def parse(self, response):</span>
</span></span><span class=line><span class=cl>        <span class=c1>##     page = response.url.split(&#34;/&#34;)[-2]</span>
</span></span><span class=line><span class=cl>        <span class=c1>##     filename = &#34;qiushi-%s.html&#34; % page</span>
</span></span><span class=line><span class=cl>        <span class=c1>##     with open(filename, &#34;wb&#34;) as f:</span>
</span></span><span class=line><span class=cl>        <span class=c1>##         f.write(response.body)</span>
</span></span><span class=line><span class=cl>        <span class=c1>##     self.log(&#34;[+]Save file %s&#34; % filename)</span>
</span></span><span class=line><span class=cl>        <span class=c1>## def parse(self, response):</span>
</span></span><span class=line><span class=cl>        <span class=c1>##     content_left_div = response.xpath(&#39;//*[@id=&#34;content-left&#34;]&#39;)</span>
</span></span><span class=line><span class=cl>        <span class=c1>##     content_list_div = content_left_div.xpath(&#34;./div&#34;)</span>
</span></span><span class=line><span class=cl>        <span class=c1>##     for content_div in content_list_div:</span>
</span></span><span class=line><span class=cl>        <span class=c1>##         yield {</span>
</span></span><span class=line><span class=cl>        <span class=c1>##             &#34;author&#34;: content_div.xpath(&#34;./div/a[2]/h2/text()&#34;).get(),</span>
</span></span><span class=line><span class=cl>        <span class=c1>##             &#34;content&#34;: content_div.xpath(&#34;./a/div/span/text()&#34;).getall(),</span>
</span></span><span class=line><span class=cl>        <span class=c1>##         }</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>parse</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>response</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>content_left_div</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;//*[@id=&#34;content-left&#34;]&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>content_list_div</span> <span class=o>=</span> <span class=n>content_left_div</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s2>&#34;./div&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>content_div</span> <span class=ow>in</span> <span class=n>content_list_div</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>item</span> <span class=o>=</span> <span class=n>QiushibaikeItem</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>item</span><span class=p>[</span><span class=s2>&#34;author&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>content_div</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s2>&#34;./div/a[2]/h2/text()&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>item</span><span class=p>[</span><span class=s2>&#34;content&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>content_div</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s2>&#34;./a/div/span/text()&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>getall</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>item</span><span class=p>[</span><span class=s2>&#34;_id&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>content_div</span><span class=o>.</span><span class=n>attrib</span><span class=p>[</span><span class=s2>&#34;id&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=k>yield</span> <span class=n>item</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>next_page</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=s1>&#39;//*[@id=&#34;content-left&#34;]/ul/li[last()]/a&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>attrib</span><span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;href&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>next_page</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>yield</span> <span class=n>response</span><span class=o>.</span><span class=n>follow</span><span class=p>(</span><span class=n>next_page</span><span class=p>,</span> <span class=n>callback</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>parse</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>## if next_page is not None:</span>
</span></span><span class=line><span class=cl>        <span class=c1>##     next_page = response.urljoin(next_page)</span>
</span></span><span class=line><span class=cl>        <span class=c1>##     yield scrapy.Request(next_page, callback=self.parse)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## Define your item pipelines here</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1>## Don&#39;t forget to add your pipeline to the ITEM_PIPELINES setting</span>
</span></span><span class=line><span class=cl><span class=c1>## See: https://docs.scrapy.org/en/latest/topics/item-pipeline.html</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pymongo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## useful for handling different item types with a single interface</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>itemadapter</span> <span class=kn>import</span> <span class=n>ItemAdapter</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>QiushibaikePipeline</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>connection</span> <span class=o>=</span> <span class=n>pymongo</span><span class=o>.</span><span class=n>Mongo</span><span class=o>.</span><span class=n>MongoClient</span><span class=p>(</span><span class=s2>&#34;localhost&#34;</span><span class=p>,</span> <span class=mi>27017</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>db</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection</span><span class=o>.</span><span class=n>scrapy</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>collection</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>qiushibaike</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>,</span> <span class=n>spider</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>item</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>collection</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__del__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>connection</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>## Define here the models for your scraped items</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1>## See documentation in:</span>
</span></span><span class=line><span class=cl><span class=c1>## https://docs.scrapy.org/en/latest/topics/items.html</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>scrapy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>QiushibaikeItem</span><span class=p>(</span><span class=n>scrapy</span><span class=o>.</span><span class=n>Item</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1>## define the fields for your item here like:</span>
</span></span><span class=line><span class=cl>    <span class=c1>## name = scrapy.Field()</span>
</span></span><span class=line><span class=cl>    <span class=n>author</span> <span class=o>=</span> <span class=n>scrapy</span><span class=o>.</span><span class=n>Field</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>content</span> <span class=o>=</span> <span class=n>scrapy</span><span class=o>.</span><span class=n>Field</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>_id</span> <span class=o>=</span> <span class=n>scrapy</span><span class=o>.</span><span class=n>Field</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=flask后端框架的使用><span>Flask后端框架的使用</span>
<a href=#flask%e5%90%8e%e7%ab%af%e6%a1%86%e6%9e%b6%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><h4 class=heading-element id=helloworld><span>Helloworld</span>
<a href=#helloworld class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 使用了一个装饰器</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>index</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;&lt;h1&gt;hello world&lt;/h1&gt;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=路由的使用><span>路由的使用</span>
<a href=#%e8%b7%af%e7%94%b1%e7%9a%84%e4%bd%bf%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 使用了一个装饰器</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/hello&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;&lt;h1&gt;hello world&lt;/h1&gt;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/hi&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hi</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;hi hi&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 使用了一个装饰器</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/hello&#34;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>,</span> <span class=s2>&#34;POST&#34;</span><span class=p>],</span> <span class=n>endpoint</span><span class=o>=</span><span class=s2>&#34;hello&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;&lt;h1&gt;hello world&lt;/h1&gt;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/hi&#34;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;POST&#34;</span><span class=p>],</span> <span class=n>endpoint</span><span class=o>=</span><span class=s2>&#34;hi&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hi</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;hi hi&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=变量规则><span>变量规则</span>
<a href=#%e5%8f%98%e9%87%8f%e8%a7%84%e5%88%99 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 用了正则表达式</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/user/&lt;id&gt;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>index</span><span class=p>(</span><span class=nb>id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>id</span> <span class=o>==</span> <span class=s2>&#34;1&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;python&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>id</span> <span class=o>==</span> <span class=s2>&#34;2&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;java&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 用了正则表达式</span>
</span></span><span class=line><span class=cl><span class=c1>## 使用了转换器 string-接受任何不包含斜杠的文本 int-接受正整数 float-接受正浮点数 path-接受包含斜杠的文本</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/user/&lt;int:id&gt;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>index</span><span class=p>(</span><span class=nb>id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>id</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;python&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>id</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;java&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=自定义转换器><span>自定义转换器</span>
<a href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e8%bd%ac%e6%8d%a2%e5%99%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>werkzeug.routing</span> <span class=kn>import</span> <span class=n>BaseConverter</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>RegexConverter</span><span class=p>(</span><span class=n>BaseConverter</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url_map</span><span class=p>,</span> <span class=n>regex</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 调用父类方法</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>(</span><span class=n>RegexConverter</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>url_map</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>regex</span> <span class=o>=</span> <span class=n>regex</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>to_python</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>## 父类的方法 功能已经实现</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;to_python方法被调用&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 将自定义的转换器类添加到flask应用中</span>
</span></span><span class=line><span class=cl><span class=n>app</span><span class=o>.</span><span class=n>url_map</span><span class=o>.</span><span class=n>converters</span><span class=p>[</span><span class=s2>&#34;re&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>RegexConverter</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/index/&lt;re(&#34;1\d</span><span class=si>{5}</span><span class=s1>&#34;):value&gt;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>index</span><span class=p>(</span><span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;hello&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=渲染form表单><span>渲染form表单</span>
<a href=#%e6%b8%b2%e6%9f%93form%e8%a1%a8%e5%8d%95 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>render_template</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/index&#34;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>,</span> <span class=s2>&#34;POST&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>index</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>render_template</span><span class=p>(</span><span class=s2>&#34;index.html&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=request对象><span>request对象</span>
<a href=#request%e5%af%b9%e8%b1%a1 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><h2 class=heading-element id=python中的进程与线程><span>Python中的进程与线程</span>
<a href=#python%e4%b8%ad%e7%9a%84%e8%bf%9b%e7%a8%8b%e4%b8%8e%e7%ba%bf%e7%a8%8b class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h4 class=heading-element id=进程与线程的关系><span>进程与线程的关系</span>
<a href=#%e8%bf%9b%e7%a8%8b%e4%b8%8e%e7%ba%bf%e7%a8%8b%e7%9a%84%e5%85%b3%e7%b3%bb class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>进程只是占内存
</span></span><span class=line><span class=cl>线程才消耗CPU
</span></span><span class=line><span class=cl>默认一个进程至少一个线程
</span></span><span class=line><span class=cl>我们一般称为主进程和主线程</span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=python中的gil锁全局解释器锁><span>Python中的GIL锁(全局解释器锁)</span>
<a href=#python%e4%b8%ad%e7%9a%84gil%e9%94%81%e5%85%a8%e5%b1%80%e8%a7%a3%e9%87%8a%e5%99%a8%e9%94%81 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>GIL并不是Python的特性，它是在实现Python解释器(CPython)时所引入的一个概念，是Python原始解释器CPython内部的一把锁</p><p>每一个Python进程运行时都对应一个CPython解释器进程。在CPython解释器内部运行多个线程的时候，每个线程在解释器内部申请相应的全局资源，为了防止资源竞争而发生错误，对所有线程申请全局资源增加了限制-全局解释器锁GL。每个线程想要运行首先获取这个解释器进程中唯一的GL,因此Python进程中所有线程只能个一个交替的执行。所以在Python程序里，就算使用多线程，其实还是一个线程在工作，这是CPython的一个缺陷，其他语言没有。</p><h4 class=heading-element id=解决gil限制python并行计算问题的方法><span>解决GIL限制Python并行计算问题的方法</span>
<a href=#%e8%a7%a3%e5%86%b3gil%e9%99%90%e5%88%b6python%e5%b9%b6%e8%a1%8c%e8%ae%a1%e7%ae%97%e9%97%ae%e9%a2%98%e7%9a%84%e6%96%b9%e6%b3%95 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>1.使用进程而非线程，如Python的 multiprocessing 模块</p><p>2.使用协程，如Python的asyncio模块</p><p>3.使用Jython或者IronPython</p><h2 class=heading-element id=python中的算法><span>Python中的算法</span>
<a href=#python%e4%b8%ad%e7%9a%84%e7%ae%97%e6%b3%95 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h4 class=heading-element id=二分查找><span>二分查找</span>
<a href=#%e4%ba%8c%e5%88%86%e6%9f%a5%e6%89%be class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>list</span> <span class=o>=</span> <span class=p>[</span><span class=mi>12</span><span class=p>,</span><span class=mi>15</span><span class=p>,</span><span class=mi>22</span><span class=p>,</span><span class=mi>35</span><span class=p>,</span><span class=mi>48</span><span class=p>,</span><span class=mi>53</span><span class=p>,</span><span class=mi>129</span><span class=p>,</span><span class=mi>657</span><span class=p>,</span><span class=mi>999</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>low</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>high</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>n</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=nb>input</span><span class=p>(</span><span class=s2>&#34;请输入待查找的数:&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=n>low</span><span class=o>&lt;=</span><span class=n>high</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>mid</span> <span class=o>=</span> <span class=p>(</span><span class=n>low</span><span class=o>+</span><span class=n>high</span><span class=p>)</span><span class=o>//</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>list</span><span class=p>[</span><span class=n>mid</span><span class=p>]</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>low</span> <span class=o>=</span> <span class=n>mid</span><span class=o>+</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>high</span> <span class=o>=</span> <span class=n>mid</span><span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;需要查找的数的下标为</span><span class=si>{</span><span class=n>high</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h4 class=heading-element id=python运行时--u-参数的作用><span>Python运行时 -u 参数的作用</span>
<a href=#python%e8%bf%90%e8%a1%8c%e6%97%b6--u-%e5%8f%82%e6%95%b0%e7%9a%84%e4%bd%9c%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>一个例子</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl><span class=n>sys</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s2>&#34;stdout1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sys</span><span class=o>.</span><span class=n>stderr</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s2>&#34;stderr1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sys</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s2>&#34;stdout2&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sys</span><span class=o>.</span><span class=n>stderr</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s2>&#34;stderr2&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ python -u .<span class=se>\e</span>xp.py
</span></span><span class=line><span class=cl>stdout1stderr1stdout2stderr2
</span></span><span class=line><span class=cl>$ python .<span class=se>\e</span>xp.py
</span></span><span class=line><span class=cl>stderr1stderr2stdout1stdout2
</span></span><span class=line><span class=cl><span class=c1>#以上输出存在差异的原因是python具有缓存机制</span>
</span></span><span class=line><span class=cl><span class=c1>#sys.stderr是无缓存的，sys.stdout是有缓存的，只有遇到换行或者积累到一定大小才会显示出来</span>
</span></span><span class=line><span class=cl><span class=c1>#加了 -u 参数后，其实就是强制其标准输出不通过缓存直接打印到屏幕</span></span></span></code></pre></td></tr></table></div></div><p>平常我们使用的print函数其实也是调用了sys.stdout.write(obj+&rsquo;\n&rsquo;)函数</p><h4 class=heading-element id=踩过的坑><span>踩过的坑</span>
<a href=#%e8%b8%a9%e8%bf%87%e7%9a%84%e5%9d%91 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>以下代码，加-u和不加，输出的内容是不同的</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>image</span> <span class=o>=</span> <span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s1>&#39;flag1.png&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>w</span><span class=p>,</span><span class=n>h</span> <span class=o>=</span> <span class=n>image</span><span class=o>.</span><span class=n>size</span>
</span></span><span class=line><span class=cl><span class=c1>## print(w,h)</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl><span class=n>output</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>w</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>h</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>pixel_data</span> <span class=o>=</span> <span class=n>image</span><span class=o>.</span><span class=n>getpixel</span><span class=p>((</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>))[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>pixel_data</span> <span class=o>&lt;=</span><span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>data</span><span class=o>+=</span><span class=s1>&#39;0&#39;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>data</span><span class=o>+=</span><span class=s1>&#39;1&#39;</span>
</span></span><span class=line><span class=cl><span class=c1>## print(len(data))</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span> <span class=o>%</span> <span class=mi>8</span><span class=o>!=</span><span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span><span class=o>+=</span><span class=s1>&#39;0&#39;</span><span class=o>*</span><span class=p>(</span><span class=mi>8</span><span class=o>-</span><span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=o>%</span><span class=mi>8</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>),</span><span class=mi>8</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>binary_segment</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>:</span><span class=n>i</span><span class=o>+</span><span class=mi>8</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>int_value</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>binary_segment</span><span class=p>,</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>char_value</span> <span class=o>=</span> <span class=nb>chr</span><span class=p>(</span><span class=n>int_value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>output</span> <span class=o>+=</span> <span class=n>char_value</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>output</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="Updated on 2025-10-23 17:18:16">Updated on 2025-10-23&nbsp;</span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/posts/e19da63/index.md title="Read Markdown" class=link-to-markdown>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on X" data-sharer=twitter data-url=https://goodlunatic.github.io/posts/e19da63/ data-title="Python Basic Knowledge" data-hashtags=Language><i class="fa-brands fa-x-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://goodlunatic.github.io/posts/e19da63/ data-hashtag=Language><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://goodlunatic.github.io/posts/e19da63/ data-title="Python Basic Knowledge"><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/language/ class=post-tag title="Tags - Language">Language</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/69280be/ class=post-nav-item rel=prev title="2024 某金融系统内部赛 Misc Writeup"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>2024 某金融系统内部赛 Misc Writeup</a><a href=/posts/1618f6c/ class=post-nav-item rel=next title="2024 古剑山全国大学生网络攻防大赛 Misc Writeup">2024 古剑山全国大学生网络攻防大赛 Misc Writeup<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=giscus class=comment><script src=https://giscus.app/client.js data-repo=goodlunatic/goodlunatic.github.io data-repo-id=R_kgDOQHqgBw data-category=Announcements data-category-id=DIC_kwDOQHqgB84Cw_4D data-mapping=pathname data-strict=0 data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-lang=en data-loading=lazy crossorigin=anonymous async defer></script></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></article><aside class=toc id=toc-auto aria-label=Contents><h2 class=toc-title>Contents&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside></main><footer class=footer><div class=footer-container><div class="footer-line powered order-1">Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.152.1">Hugo</a> | Theme - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.4.0-alpha.2-20251023040336-063af2cd">FixIt</a></div><div class="footer-line copyright order-2" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2022 - 2025</span><span class=author itemprop=copyrightHolder>
<a href=https://goodlunatic.github.io target=_blank rel="external nofollow noopener noreferrer">Lunatic</a></span></div><div class="footer-line visitor"><span id=busuanzi_container_site_uv title='Total visitors'><i class="fa-regular fa-user fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title='Total visits'><i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label="Back to Top"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label="View Comments"><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><a href=https://github.com/goodlunatic title="Visit Lunatic's Github" target=_blank rel="external nofollow" class="github-corner left d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true" width="56" height="56"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><div id=mask></div><noscript><div class=noscript-warning>This website works best with JavaScript enabled.</div></noscript></div><link rel=stylesheet href=/lib/pace/themes/blue/pace-theme-minimal.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/cell-watermark/watermark.min.js defer></script><script src=https://vercount.one/js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script src=/posts/e19da63/config/page.js defer></script><script src=/js/theme.min.js defer></script></body></html>